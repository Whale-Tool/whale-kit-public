{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./node_modules/_whale-qrcode@1.0.0@whale-qrcode/qrcode.js","webpack://exports/./src/generateQrcode.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/ui\""],"names":["doc","sketch","getSelectedDocument","selection","selectedLayers","buttonRect","forEach","layer","dist","frame","width","height","onRun","context","UI","getInputFromUser","initialValue","err","value","shapeType","generate","message","inputSettings","qrcode","QRCode","options","Object","assign","getDefaultSettings","modules","length","xsize","padding","ysize","layers","y","x","module","px","toString","py","push","type","Types","Shape","style","fills","color","fill","background","borders","group","Group","name","parent","remove","typeNumber","ecl"],"mappings":";;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sCAAsC,OAAO;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA,6CAA6C,OAAO;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,uBAAuB,iCAAiC,4BAA4B,qBAAqB,0BAA0B,+DAA+D;AACzN,+BAA+B,2BAA2B,yBAAyB,iBAAiB,gDAAgD,qCAAqC,sCAAsC,yCAAyC,cAAc,qBAAqB,OAAO,8CAA8C,cAAc,qBAAqB,OAAO;AAC1Y,oCAAoC,qDAAqD,qDAAqD,kCAAkC,0BAA0B,qCAAqC,uBAAuB;A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","file":"generateQrcode.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/generateQrcode.js\");\n","/**\n * @fileoverview\n * - Using the 'QRCode for npm'\n * - this library has no dependencies.\n * \n * @author jingwhale\n * @see <a href=\"http://www.d-project.com/\" target=\"_blank\">https://github.com/jingwhale/whale-qrcode</a>\n * @see <a href=\"http://www.d-project.com/\" target=\"_blank\">http://www.d-project.com/</a>\n * @see <a href=\"http://jeromeetienne.github.com/jquery-qrcode/\" target=\"_blank\">http://jeromeetienne.github.com/jquery-qrcode/</a>\n */\n\n// /**\n//  * @fileoverview\n//  * - Using the 'QRCode for Javascript library'\n//  * - Fixed dataset of 'QRCode for Javascript library' for support full-spec.\n//  * - this library has no dependencies.\n//  *\n//  * @author jingwhale\n//  * @see <a href=\"http://www.d-project.com/\" target=\"_blank\">http://www.d-project.com/</a>\n//  * @see <a href=\"http://jeromeetienne.github.com/jquery-qrcode/\" target=\"_blank\">http://jeromeetienne.github.com/jquery-qrcode/</a>\n//  */\n\n//---------------------------------------------------------------------\n// QRCode for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//   http://www.opensource.org/licenses/mit-license.php\n//\n// The word \"QR Code\" is registered trademark of \n// DENSO WAVE INCORPORATED\n//   http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\nfunction QR8bitByte(data) {\n\tthis.mode = QRMode.MODE_8BIT_BYTE;\n\tthis.data = data;\n\tthis.parsedData = [];\n\n\t// Added to support UTF-8 Characters\n\tfor (var i = 0, l = this.data.length; i < l; i++) {\n\t\tvar byteArray = [];\n\t\tvar code = this.data.charCodeAt(i);\n\n\t\tif (code > 0x10000) {\n\t\t\tbyteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);\n\t\t\tbyteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);\n\t\t\tbyteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);\n\t\t\tbyteArray[3] = 0x80 | (code & 0x3F);\n\t\t} else if (code > 0x800) {\n\t\t\tbyteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);\n\t\t\tbyteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);\n\t\t\tbyteArray[2] = 0x80 | (code & 0x3F);\n\t\t} else if (code > 0x80) {\n\t\t\tbyteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);\n\t\t\tbyteArray[1] = 0x80 | (code & 0x3F);\n\t\t} else {\n\t\t\tbyteArray[0] = code;\n\t\t}\n\n\t\tthis.parsedData.push(byteArray);\n\t}\n\n\tthis.parsedData = Array.prototype.concat.apply([], this.parsedData);\n\n\tif (this.parsedData.length != this.data.length) {\n\t\tthis.parsedData.unshift(191);\n\t\tthis.parsedData.unshift(187);\n\t\tthis.parsedData.unshift(239);\n\t}\n}\n\nQR8bitByte.prototype = {\n\tgetLength: function (buffer) {\n\t\treturn this.parsedData.length;\n\t},\n\twrite: function (buffer) {\n\t\tfor (var i = 0, l = this.parsedData.length; i < l; i++) {\n\t\t\tbuffer.put(this.parsedData[i], 8);\n\t\t}\n\t}\n};\n\nfunction QRCodeModel(typeNumber, errorCorrectLevel) {\n\tthis.typeNumber = typeNumber;\n\tthis.errorCorrectLevel = errorCorrectLevel;\n\tthis.modules = null;\n\tthis.moduleCount = 0;\n\tthis.dataCache = null;\n\tthis.dataList = [];\n}\n\nQRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null;},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col){throw new Error(row+\",\"+col);}\nreturn this.modules[row][col];},getModuleCount:function(){return this.moduleCount;},make:function(){this.makeImpl(false,this.getBestMaskPattern());},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++){this.modules[row][col]=null;}}\nthis.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7){this.setupTypeNumber(test);}\nif(this.dataCache==null){this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList);}\nthis.mapData(this.dataCache,maskPattern);},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r)continue;for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c)continue;if((0<=r&&r<=6&&(c==0||c==6))||(0<=c&&c<=6&&(r==0||r==6))||(2<=r&&r<=4&&2<=c&&c<=4)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}},getBestMaskPattern:function(){var minLostPoint=0;var pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i;}}\nreturn pattern;},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);var cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs;var dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill();}}}\nreturn qr_mc;},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null){continue;}\nthis.modules[r][6]=(r%2==0);}\nfor(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null){continue;}\nthis.modules[6][c]=(c%2==0);}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++){for(var j=0;j<pos.length;j++){var row=pos[i];var col=pos[j];if(this.modules[row][col]!=null){continue;}\nfor(var r=-2;r<=2;r++){for(var c=-2;c<=2;c++){if(r==-2||r==2||c==-2||c==2||(r==0&&c==0)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}}}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod;}\nfor(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod;}},setupTypeInfo:function(test,maskPattern){var data=(this.errorCorrectLevel<<3)|maskPattern;var bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<6){this.modules[i][8]=mod;}else if(i<8){this.modules[i+1][8]=mod;}else{this.modules[this.moduleCount-15+i][8]=mod;}}\nfor(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<8){this.modules[8][this.moduleCount-i-1]=mod;}else if(i<9){this.modules[8][15-i-1+1]=mod;}else{this.modules[8][15-i-1]=mod;}}\nthis.modules[this.moduleCount-8][8]=(!test);},mapData:function(data,maskPattern){var inc=-1;var row=this.moduleCount-1;var bitIndex=7;var byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6)col--;while(true){for(var c=0;c<2;c++){if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length){dark=(((data[byteIndex]>>>bitIndex)&1)==1);}\nvar mask=QRUtil.getMask(maskPattern,row,col-c);if(mask){dark=!dark;}\nthis.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7;}}}\nrow+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break;}}}}};QRCodeModel.PAD0=0xEC;QRCodeModel.PAD1=0x11;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel);var buffer=new QRBitBuffer();for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer);}\nvar totalDataCount=0;for(var i=0;i<rsBlocks.length;i++){totalDataCount+=rsBlocks[i].dataCount;}\nif(buffer.getLengthInBits()>totalDataCount*8){throw new Error(\"code length overflow. (\"\n+buffer.getLengthInBits()\n+\">\"\n+totalDataCount*8\n+\")\");}\nif(buffer.getLengthInBits()+4<=totalDataCount*8){buffer.put(0,4);}\nwhile(buffer.getLengthInBits()%8!=0){buffer.putBit(false);}\nwhile(true){if(buffer.getLengthInBits()>=totalDataCount*8){break;}\nbuffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8){break;}\nbuffer.put(QRCodeModel.PAD1,8);}\nreturn QRCodeModel.createBytes(buffer,rsBlocks);};QRCodeModel.createBytes=function(buffer,rsBlocks){var offset=0;var maxDcCount=0;var maxEcCount=0;var dcdata=new Array(rsBlocks.length);var ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount;var ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++){dcdata[r][i]=0xff&buffer.buffer[i+offset];}\noffset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount);var rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1);var modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=(modIndex>=0)?modPoly.get(modIndex):0;}}\nvar totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++){totalCodeCount+=rsBlocks[i].totalCount;}\nvar data=new Array(totalCodeCount);var index=0;for(var i=0;i<maxDcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<dcdata[r].length){data[index++]=dcdata[r][i];}}}\nfor(var i=0;i<maxEcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<ecdata[r].length){data[index++]=ecdata[r][i];}}}\nreturn data;};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0),G18:(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0),G15_MASK:(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1),getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0){d^=(QRUtil.G15<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)));}\nreturn((data<<10)|d)^QRUtil.G15_MASK;},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0){d^=(QRUtil.G18<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)));}\nreturn(data<<12)|d;},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1;}\nreturn digit;},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1];},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return(i*j)%2+(i*j)%3==0;case QRMaskPattern.PATTERN110:return((i*j)%2+(i*j)%3)%2==0;case QRMaskPattern.PATTERN111:return((i*j)%3+(i+j)%2)%2==0;default:throw new Error(\"bad maskPattern:\"+maskPattern);}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++){a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));}\nreturn a;},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error(\"mode:\"+mode);}}else if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error(\"mode:\"+mode);}}else if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error(\"mode:\"+mode);}}else{throw new Error(\"type:\"+type);}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount();var lostPoint=0;for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount;col++){var sameCount=0;var dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r){continue;}\nfor(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c){continue;}\nif(r==0&&c==0){continue;}\nif(dark==qrCode.isDark(row+r,col+c)){sameCount++;}}}\nif(sameCount>5){lostPoint+=(3+sameCount-5);}}}\nfor(var row=0;row<moduleCount-1;row++){for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col))count++;if(qrCode.isDark(row+1,col))count++;if(qrCode.isDark(row,col+1))count++;if(qrCode.isDark(row+1,col+1))count++;if(count==0||count==4){lostPoint+=3;}}}\nfor(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount-6;col++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)){lostPoint+=40;}}}\nfor(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount-6;row++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)){lostPoint+=40;}}}\nvar darkCount=0;for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount;row++){if(qrCode.isDark(row,col)){darkCount++;}}}\nvar ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint;}};var QRMath={glog:function(n){if(n<1){throw new Error(\"glog(\"+n+\")\");}\nreturn QRMath.LOG_TABLE[n];},gexp:function(n){while(n<0){n+=255;}\nwhile(n>=256){n-=255;}\nreturn QRMath.EXP_TABLE[n];},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++){QRMath.EXP_TABLE[i]=1<<i;}\nfor(var i=8;i<256;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];}\nfor(var i=0;i<255;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;}\nfunction QRPolynomial(num,shift){if(num.length==undefined){throw new Error(num.length+\"/\"+shift);}\nvar offset=0;while(offset<num.length&&num[offset]==0){offset++;}\nthis.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++){this.num[i]=num[i+offset];}}\nQRPolynomial.prototype={get:function(index){return this.num[index];},getLength:function(){return this.num.length;},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++){for(var j=0;j<e.getLength();j++){num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));}}\nreturn new QRPolynomial(num,0);},mod:function(e){if(this.getLength()-e.getLength()<0){return this;}\nvar ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0));var num=new Array(this.getLength());for(var i=0;i<this.getLength();i++){num[i]=this.get(i);}\nfor(var i=0;i<e.getLength();i++){num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio);}\nreturn new QRPolynomial(num,0).mod(e);}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount;}\nQRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined){throw new Error(\"bad rs block @ typeNumber:\"+typeNumber+\"/errorCorrectLevel:\"+errorCorrectLevel);}\nvar length=rsBlock.length/3;var list=[];for(var i=0;i<length;i++){var count=rsBlock[i*3+0];var totalCount=rsBlock[i*3+1];var dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++){list.push(new QRRSBlock(totalCount,dataCount));}}\nreturn list;};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined;}};function QRBitBuffer(){this.buffer=[];this.length=0;}\nQRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return((this.buffer[bufIndex]>>>(7-index%8))&1)==1;},put:function(num,length){for(var i=0;i<length;i++){this.putBit(((num>>>(length-i-1))&1)==1);}},getLengthInBits:function(){return this.length;},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex){this.buffer.push(0);}\nif(bit){this.buffer[bufIndex]|=(0x80>>>(this.length%8));}\nthis.length++;}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];\n\t\n// Constructor \nexport default function QRCode(options) {\n\t//Default options\n\tthis.options = {\n\t\tpadding: 4,\n\t\twidth: 256, \n\t\theight: 256,\n\t\ttypeNumber: 4,\n\t\tcolor: \"#000000\",\n\t\tbackground: \"#ffffff\",\n\t\tecl: \"M\"\n\t};\n\t//In case the options is string\n\tif (typeof options === 'string') {\n\t\toptions = {\n\t\t\tcontent: options\n\t\t};\n\t}\n\t//Merge options\n\tif (options) {\n\t\t// Object.assign(this.options, options);\n\t\tfor (var i in options) {\n\t\t\tthis.options[i] = options[i];\n\t\t}\n\t}\n\t//Gets the error correction level\n\tfunction _getErrorCorrectLevel(ecl) {\n\t\tswitch (ecl) {\n\t\t\tcase \"L\":\n\t\t\treturn QRErrorCorrectLevel.L;\n\t\t\t\n\t\t\tcase \"M\":\n\t\t\treturn QRErrorCorrectLevel.M;\n\t\t\t\n\t\t\tcase \"Q\":\n\t\t\treturn QRErrorCorrectLevel.Q;\n\t\t\t\n\t\t\tcase \"H\":\n\t\t\treturn QRErrorCorrectLevel.H;\n\t\t\t\n\t\t\tdefault:\n\t\t\tthrow new Error(\"Unknwon error correction level: \" + ecl);\n\t\t}\n\t}\n\t/**\n\t * Get the type by string length\n\t * \n\t * @private\n\t * @param {String} sText\n\t * @param {Number} nCorrectLevel\n\t * @return {Number} type\n\t */\n\tfunction _getTypeNumber(sText, nCorrectLevel) {\t\t\n\t\tvar nType = 1;\n\t\tvar length = _getUTF8Length(sText);\n\t\t\n\t\tfor (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {\n\t\t\tvar nLimit = 0;\n\t\t\t\n\t\t\tswitch (nCorrectLevel) {\n\t\t\t\tcase QRErrorCorrectLevel.L :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][0];\n\t\t\t\t\tbreak;\n\t\t\t\tcase QRErrorCorrectLevel.M :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][1];\n\t\t\t\t\tbreak;\n\t\t\t\tcase QRErrorCorrectLevel.Q :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][2];\n\t\t\t\t\tbreak;\n\t\t\t\tcase QRErrorCorrectLevel.H :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][3];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tif (length <= nLimit) {\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tnType++;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (nType > QRCodeLimitLength.length) {\n\t\t\tthrow new Error(\"Too long data\");\n\t\t}\n\t\t\n\t\treturn nType;\n\t}\n\tfunction _getUTF8Length(sText) {\n\t\tvar replacedText = encodeURI(sText).toString().replace(/\\%[0-9a-fA-F]{2}/g, 'a');\n\t\treturn replacedText.length + (replacedText.length != sText ? 3 : 0);\n\t}\n\t//Generate QR Code matrix\n\tvar content = this.options.content;\n\tvar ecl = _getErrorCorrectLevel(this.options.ecl);\n\tvar type = _getTypeNumber(content, ecl);\n\tthis.qrcode = new QRCodeModel(type, ecl);\n\tthis.qrcode.addData(content);\n\tthis.qrcode.make();\n}","import sketch from 'sketch';\nimport QRCode from 'whale-qrcode';\nimport UI from 'sketch/ui';\n// documentation: https://developer.sketchapp.com/reference/api/\n\nvar doc = sketch.getSelectedDocument();\nvar selection = doc.selectedLayers;\nvar buttonRect = \"\";\nselection.forEach(layer => (buttonRect=layer));\n\nvar dist = (buttonRect.frame.width>buttonRect.frame.height)?buttonRect.frame.width:buttonRect.frame.height;\n\nexport default function onRun(context) {\n    UI.getInputFromUser(\n        \"Please fill in the QR code content：\",\n        {\n            initialValue: 'https://www.jingwhale.cc/',\n        },\n        (err, value) => {\n            if(buttonRect && (buttonRect.shapeType == \"Rectangle\")){\n                if(!!value){\n                    generate(\"\", value);\n                }else{\n                    UI.message(\"Please fill in the QR code content!\");\n                }\n            }else{\n                UI.message(\"Please select a Rectangle!\");\n            }\n\n            if (err) {\n                // most likely the user canceled the input\n                return\n            }\n        }\n    )\n}\n\nfunction generate(inputSettings, value){\n  const qrcode = new QRCode(`${value}`)\n  const options = Object.assign(getDefaultSettings(), inputSettings)\n  const modules = qrcode.qrcode.modules\n  const width = options.width\n  const height = options.height\n  const length = modules.length\n  const xsize = width / (length + 2 * options.padding)\n  const ysize = height / (length + 2 * options.padding)\n\n  let layers = []\n  for (let y = 0; y < length; y++) {\n    for (let x = 0; x < length; x++) {\n      let module = modules[x][y]\n      if (module) {\n        let px = (x * xsize + options.padding * xsize).toString()\n        let py = (y * ysize + options.padding * ysize).toString()\n        layers.push({\n          type: sketch.Types.Shape,\n          frame: {\n            x: px,\n            y: py,\n            width: xsize,\n            height: ysize,\n          },\n          style: {\n            fills: [\n              {\n                color: `${options.color}`,\n                fill: `${options.background}`\n              }\n            ],\n            borders: []\n          }\n        })\n      }\n    }\n  }\n\n  const group = new sketch.Group({\n    name: `qr-${value}`,\n    parent: buttonRect.parent,\n      frame: {\n          x: buttonRect.frame.x,\n          y: buttonRect.frame.y,\n          width: options.width,\n          height: options.height\n      },\n    layers:layers\n  });\n\n  buttonRect.remove();\n}\n\nfunction getDefaultSettings(){\n  return {\n\t\tpadding: 2,\n\t\twidth: dist,\n\t\theight: dist,\n\t\ttypeNumber: 4,\n\t\tcolor: \"#000000\",\n\t\tbackground: \"#ffffff\",\n\t\tecl: \"M\"\n\t}\n}\n","module.exports = require(\"sketch\");","module.exports = require(\"sketch/ui\");"],"sourceRoot":""}