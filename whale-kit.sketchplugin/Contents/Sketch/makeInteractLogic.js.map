{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./node_modules/@skpm/timers/immediate.js","webpack://exports/./node_modules/@skpm/timers/test-if-fiber.js","webpack://exports/./node_modules/@skpm/timers/timeout.js","webpack://exports/./node_modules/cocoascript-class/lib/index.js","webpack://exports/./node_modules/cocoascript-class/lib/runtime.js","webpack://exports/./node_modules/promise-polyfill/lib/index.js","webpack://exports/./node_modules/sketch-module-web-view/lib/browser-api.js","webpack://exports/./node_modules/sketch-module-web-view/lib/constants.js","webpack://exports/./node_modules/sketch-module-web-view/lib/dispatch-first-click.js","webpack://exports/./node_modules/sketch-module-web-view/lib/fitSubview.js","webpack://exports/./node_modules/sketch-module-web-view/lib/index.js","webpack://exports/./node_modules/sketch-module-web-view/lib/inject-client-messaging.js","webpack://exports/./node_modules/sketch-module-web-view/lib/parseWebArguments.js","webpack://exports/./node_modules/sketch-module-web-view/lib/set-delegates.js","webpack://exports/./node_modules/sketch-module-web-view/lib/webview-api.js","webpack://exports/./node_modules/sketch-module-web-view/remote.js","webpack://exports/./src/arrows/createArrow.js","webpack://exports/./src/arrows/draw.js","webpack://exports/./src/arrows/utilities/conditions.js","webpack://exports/./src/arrows/utilities/groups.js","webpack://exports/./src/arrows/utilities/styling.js","webpack://exports/./src/lib/config.js","webpack://exports/./src/makeInteractLogic.js","webpack://exports/external \"events\"","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/dom\"","webpack://exports/external \"sketch/settings\"","webpack://exports/external \"sketch/ui\""],"names":["Settings","require","createArrow","firstObjectID","secondObjectID","style","type","direction","conditionID","isCondition","document","docData","localDirection","getDirection","updateSpacing","autoAlignLayer","arrow","drawConnection","connection","firstObject","secondObject","condition","line","objectID","getLayerWithID","firstObjectMidX","frame","x","width","firstObjectMidY","y","height","secondObjectMidX","secondObjectMidY","diffX","diffY","absDiffX","Math","abs","absDiffY","sourceObjectID","childObjectID","sourceObject","childObject","settingForKey","currentSpacing","sourceMidY","childMidY","sourceMidX","childMidX","diff","UI","currentParentGroup","currentPage","currentArtboard","connectionPos","getConnectionPos","drawAngledLine","firstLayerPosX","firstLayerPosY","middlePosX","middlePosY","secondLayerPosX","secondLayerPosY","drawStraightLine","drawCurvedLine","updateCondition","addCondition","styleLine","addToArrowsGroup","firstObjectAbsPos","changeBasis","from","parent","to","secondObjectAbsPos","currentGroup","checkForGroup","path","NSBezierPath","bezierPath","moveToPoint","NSMakePoint","lineToPoint","MSShapeGroup","layerWithPath","MSPath","pathWithBezierPath","points","layers","cornerRadius","setName","curveMode","hasCurveFrom","hasCurveTo","curveFrom","curveTo","keyword","libraries","sketch","getLibraries","libraryObject","symbolReferences","symbol","g","length","getImportableSymbolReferencesForDocument","i","name","includes","alert","symbolMaster","import","createNewInstance","addToConditionGroup","conGroup","arGroup","arGroupX","arGroupY","fixGeometryWithOptions","id","deleteCondition","conditionObject","selectedGroup","remove","groupName","count","addLayers","Group","group","locked","moveToBack","adjustToFit","pluginKey","localStyle","getLayerStyles","ownStyle","sharedStyle","border","addStylePartOfType","color","MSColor","colorWithRGBADictionary","r","b","a","thickness","endMarkerType","context","command","valueForKey_onLayer_forPluginIdentifier","allStyles","allLayerStyles","styles","push","module","exports","identifier","stateColor","active","noamal","disabled","StateColorAmt","STATE_ACTIVE","STATE_DISABLED","AllType","PartType","SymbolsType","PageType","TAG_INDEX","ElementNameList","Sketch","Document","Rectangle","ShapePath","Text","Artboard","Page","getSelectedDocument","selectedPage","selectedArtBoards","allPages","pages","documentData","settingFlowKey","settingFlowData","flowArtboard","flowPage","flowBoards","newFlowBlock","dist","flowName","hasFlowPage","interactDescriptionWidth","initPositnX","initPositnY","flowArtBoardTilteHeight","flowArtBoardTilteMarginBottom","titleFontSize","flowNameFontSize","flowNameDist","flowNameColor","titleBold","titleColor","createPageAndArtboard","doPage","flowArtboardFrame","getFlowArtboardFrame","newArtBordFrameX","doNewArtBordFrameX","flowFrame","currentFlowArtboardSelected","createPageAndArtboardTitle","makeInteractLogic","doFlowArrows","selected","artBordMaxX","artBordMaxXWidth","flowPageLayers","flowPageItem","titleGroup","rectTitleBg","shapeType","ShapeType","fills","titleText","text","fontSize","fontWeight","textColor","data","maxY","maxYIndex","widthFrame","heightFrame","widthFrameBoard","heightFrameBoard","flowBoardInst","findArtBoardById","list","abId","step","maxYList","j","branch","positonIndex","child","doPageFlow","fillType","positon","flowGroup","getCurrentArtboardFrame","copyBoard","duplicate","copyBoardFrame","newBlock","blockId","rectBgFrame","rectBg","borders","flowNameText","lineHeight","createArrows","arrowIds","blockIds","firstBlock","String","message","firstFlowArr","getFlowArr","index","console","log","k","startIndex","endIndex","firstArr","item","findFlowBlockId","getCurrentArtboardFrameX","getCurrentArtboardFrameY","ArtboardDist","stepDist","distX","artboardItemId","artboardItem","branchDist","distY","positonX","positonY","column","columnList","onRun","openPannel","existingWebview","getWebview","isVisible","close","win","BrowserWindow","title","resizable","minimizable","maximizable","closable","alwaysOnTop","on","Panel","random","loadURL","closeWin","destroy","contents","webContents","setDocumentSettingForKey","items","checkSave","settingFlowDataItem","Date","getTime","unshift","s","setSelectedArtBoards","treeBook","doSerializData","documentSettingForKey","setData","selectedArtBoardsData","JSON","stringify","executeJavaScript","then","res","serializDatas","content"],"mappings":";;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA,cAAc,mBAAO,CAAC,yDAAW;;AAEjC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACdA;AACA;AACA;;;;;;;;;;;;ACFA;AACA,qBAAqB,mBAAO,CAAC,qEAAiB;;AAE9C;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,yCAAyC,cAAc,IAAI;AAC3D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;AC1Da;;AAEb;AACA;AACA,CAAC;AACD;AACA;;AAEA,eAAe,mBAAO,CAAC,qEAAc;;AAErC;;AAEA;AACA;;AAEA,6EAA6E,YAAY;;AAEzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;AC7Da;;AAEb;AACA;AACA,CAAC;AACD;AACA;AACA,kCAAkC,qCAAqC;;AAEvE;AACA;AACA,4CAA4C,sCAAsC,GAAG,YAAY;AACjG;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,iEAAiE;AACjE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,QAAQ,YAAY,WAAW;AACnD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,8GAA8G,YAAY,GAAG,YAAY,GAAG,aAAa,IAAI,UAAU,WAAW,GAAG;AACrL;AACA,8GAA8G,YAAY,GAAG,YAAY,GAAG,YAAY,IAAI,UAAU,WAAW,GAAG;;AAEpL;AACA,wCAAwC,gCAAgC,E;;;;;;;;;;;;ACvGxE,gEAAa;;AAEb;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,kBAAkB;AAC/B;AACA,aAAa,kBAAkB;AAC/B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;;;;;;;;;;;;;AClQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnmBA;AACA;AACA;;;;;;;;;;;;ACFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,QAAQ;AACR,gBAAgB;AAChB,MAAM,eAAe;AACrB,0CAA0C,cAAc;AACxD,MAAM;AACN;AACA;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrBA;AACA;AACA,mBAAmB,mBAAO,CAAC,sBAAQ;AACnC,sBAAsB,mBAAO,CAAC,+EAAe;AAC7C,kBAAkB,mBAAO,CAAC,+EAAe;AACzC,uBAAuB,mBAAO,CAAC,6EAAc;AAC7C,yBAAyB,mBAAO,CAAC,iGAAwB;AACzD,4BAA4B,mBAAO,CAAC,uGAA2B;AAC/D,mBAAmB,mBAAO,CAAC,mFAAiB;;AAE5C;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;ACnUA,gBAAgB,mBAAO,CAAC,2EAAa;;AAErC;AACA;AACA,qDAAqD;AACrD,gDAAgD;AAChD,uBAAuB;AACvB;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxBA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;AClBA,gBAAgB,mBAAO,CAAC,wEAAmB;AAC3C,wBAAwB,mBAAO,CAAC,2FAAqB;AACrD,gBAAgB,mBAAO,CAAC,2EAAa;;AAErC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,2CAA2C;AAC3C,OAAO;;AAEP;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;AClSA,kEAAmB,mBAAO,CAAC,sBAAQ;;AAEnC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA,QAAQ,kCAAkC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;ACnRA;AACA,oBAAoB,mBAAO,CAAC,iEAAO;;AAEnC;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA,IAAIA,QAAQ,GAAGC,mBAAO,CAAC,wCAAD,CAAtB,C,CAGA;;;AAEO,SAASC,WAAT,CAAqBC,aAArB,EAAoCC,cAApC,EAAoDC,KAApD,EAA2DC,IAA3D,EAAiEC,SAAjE,EAA4EC,WAA5E,EAAyFC,WAAzF,EAAsGC,QAAtG,EAAgHC,OAAhH,EAAyH;AAAG;AACjI,MAAIC,cAAc,GAAGL,SAAS,IAAI,MAAb,GAAsBM,YAAY,CAACV,aAAD,EAAgBC,cAAhB,EAAgCM,QAAhC,CAAlC,GAA8EH,SAAnG,CAD8H,CAG9H;;AACAO,eAAa,CAACX,aAAD,EAAgBC,cAAhB,EAAgCQ,cAAhC,EAAgDF,QAAhD,CAAb;AACAK,gBAAc,CAACZ,aAAD,EAAgBC,cAAhB,EAAgCQ,cAAhC,EAAgDF,QAAhD,CAAd,CAL8H,CAO9H;;AACA,MAAIM,KAAK,GAAGC,+DAAc,CAACd,aAAD,EAAgBC,cAAhB,EAAgCC,KAAhC,EAAuCC,IAAvC,EAA6CM,cAA7C,EAA6DJ,WAA7D,EAA0EC,WAA1E,EAAuFC,QAAvF,EAAiGC,OAAjG,CAA1B,CAR8H,CAU9H;;AACA,MAAIO,UAAU,GAAG;AACfC,eAAW,EAAGhB,aADC;AAEfiB,gBAAY,EAAGhB,cAFA;AAGfC,SAAK,EAAGW,KAAK,CAACX,KAHC;AAIfgB,aAAS,EAAGL,KAAK,CAACR,WAJH;AAKfC,eAAW,EAAGA,WALC;AAMfH,QAAI,EAAGU,KAAK,CAACV,IANE;AAOfC,aAAS,EAAEK,cAPI;AAQfU,QAAI,EAAGN,KAAK,CAACM,IAAN,CAAWC,QAAX;AARQ,GAAjB;AAUA,SAAOL,UAAP;AACD;;AAED,SAASL,YAAT,CAAsBV,aAAtB,EAAqCC,cAArC,EAAqDM,QAArD,EAA8D;AAAE;AAC9D;AACA,MAAMS,WAAW,GAAGT,QAAQ,CAACc,cAAT,CAAwBrB,aAAxB,CAApB;AACA,MAAMiB,YAAY,GAAGV,QAAQ,CAACc,cAAT,CAAwBpB,cAAxB,CAArB;AACA,MAAMqB,eAAe,GAAGN,WAAW,CAACO,KAAZ,CAAkBC,CAAlB,GAAoBR,WAAW,CAACO,KAAZ,CAAkBE,KAAlB,GAAwB,CAApE;AACA,MAAMC,eAAe,GAAGV,WAAW,CAACO,KAAZ,CAAkBI,CAAlB,GAAoBX,WAAW,CAACO,KAAZ,CAAkBK,MAAlB,GAAyB,CAArE;AACA,MAAMC,gBAAgB,GAAGZ,YAAY,CAACM,KAAb,CAAmBC,CAAnB,GAAqBP,YAAY,CAACM,KAAb,CAAmBE,KAAnB,GAAyB,CAAvE;AACA,MAAMK,gBAAgB,GAAGb,YAAY,CAACM,KAAb,CAAmBI,CAAnB,GAAqBV,YAAY,CAACM,KAAb,CAAmBK,MAAnB,GAA0B,CAAxE;AAEA,MAAMG,KAAK,GAAGT,eAAe,GAAGO,gBAAhC;AACA,MAAMG,KAAK,GAAGN,eAAe,GAAGI,gBAAhC;AACA,MAAMG,QAAQ,GAAGC,IAAI,CAACC,GAAL,CAASJ,KAAT,CAAjB;AACA,MAAMK,QAAQ,GAAGF,IAAI,CAACC,GAAL,CAASH,KAAT,CAAjB;AACA,MAAI5B,SAAJ;;AAEA,MAAGyB,gBAAgB,GAAGP,eAAtB,EAAsC;AACpC;AACA,QAAGQ,gBAAgB,GAAGJ,eAAtB,EAAsC;AACpC;AACAtB,eAAS,GAAG2B,KAAK,GAAGC,KAAR,GAAgB,MAAhB,GAAyB,OAArC;AACD,KAHD,MAGO;AACL;AACA5B,eAAS,GAAG6B,QAAQ,GAAGG,QAAX,GAAsB,OAAtB,GAAgC,IAA5C;AACD;AACF,GATD,MASO;AACL;AACA,QAAGN,gBAAgB,GAAGJ,eAAtB,EAAsC;AACpC;AACAtB,eAAS,GAAG6B,QAAQ,GAAGG,QAAX,GAAsB,MAAtB,GAA+B,MAA3C;AACD,KAHD,MAGO;AACL;AACAhC,eAAS,GAAG2B,KAAK,GAAGC,KAAR,GAAgB,MAAhB,GAAyB,IAArC;AACD;AACF;;AAED,SAAO5B,SAAP;AACD;;AAED,SAASO,aAAT,CAAuB0B,cAAvB,EAAuCC,aAAvC,EAAsDlC,SAAtD,EAAiEG,QAAjE,EAA0E;AACxE,MAAIgC,YAAY,GAAGhC,QAAQ,CAACc,cAAT,CAAwBgB,cAAxB,CAAnB;AACA,MAAIG,WAAW,GAAGjC,QAAQ,CAACc,cAAT,CAAwBiB,aAAxB,CAAlB;;AAEA,MAAGzC,QAAQ,CAAC4C,aAAT,CAAuB,cAAvB,KAA0C5C,QAAQ,CAAC4C,aAAT,CAAuB,cAAvB,KAA0C,CAAvF,EAAyF;AACvF,QAAIC,cAAc,GAAG7C,QAAQ,CAAC4C,aAAT,CAAuB,cAAvB,CAArB;;AAEA,QAAGrC,SAAS,IAAI,OAAhB,EAAwB;AACtBoC,iBAAW,CAACjB,KAAZ,CAAkBC,CAAlB,GAAsBe,YAAY,CAAChB,KAAb,CAAmBC,CAAnB,GAAuBe,YAAY,CAAChB,KAAb,CAAmBE,KAA1C,GAAkDiB,cAAxE;AACD;;AAED,QAAGtC,SAAS,IAAI,MAAhB,EAAuB;AACrBoC,iBAAW,CAACjB,KAAZ,CAAkBI,CAAlB,GAAsBY,YAAY,CAAChB,KAAb,CAAmBI,CAAnB,GAAuBY,YAAY,CAAChB,KAAb,CAAmBK,MAA1C,GAAmDc,cAAzE;AACD;;AAED,QAAGtC,SAAS,IAAI,MAAhB,EAAuB;AACrBoC,iBAAW,CAACjB,KAAZ,CAAkBC,CAAlB,GAAsBe,YAAY,CAAChB,KAAb,CAAmBC,CAAnB,GAAuBgB,WAAW,CAACjB,KAAZ,CAAkBE,KAAzC,GAAiDiB,cAAvE;AACD;;AAED,QAAGtC,SAAS,IAAI,IAAhB,EAAqB;AACnBoC,iBAAW,CAACjB,KAAZ,CAAkBI,CAAlB,GAAsBY,YAAY,CAAChB,KAAb,CAAmBI,CAAnB,GAAuBa,WAAW,CAACjB,KAAZ,CAAkBK,MAAzC,GAAkDc,cAAxE;AACD;AACF;AACF;;AAED,SAAS9B,cAAT,CAAwByB,cAAxB,EAAwCC,aAAxC,EAAuDlC,SAAvD,EAAkEG,QAAlE,EAA2E;AACzE,MAAIgC,YAAY,GAAGhC,QAAQ,CAACc,cAAT,CAAwBgB,cAAxB,CAAnB;AACA,MAAIG,WAAW,GAAGjC,QAAQ,CAACc,cAAT,CAAwBiB,aAAxB,CAAlB;AACA,MAAIK,UAAJ,EAAgBC,SAAhB,EAA2BC,UAA3B,EAAuCC,SAAvC,EAAkDC,IAAlD;;AAEA,MAAGlD,QAAQ,CAAC4C,aAAT,CAAuB,WAAvB,CAAH,EAAuC;AACrC,QAAG5C,QAAQ,CAAC4C,aAAT,CAAuB,WAAvB,KAAuC,IAA1C,EAA+C;AAC7C;AAEA,UAAGrC,SAAS,IAAI,OAAb,IAAwBA,SAAS,IAAI,MAAxC,EAA+C;AAC7CuC,kBAAU,GAAGJ,YAAY,CAAChB,KAAb,CAAmBI,CAAnB,GAAuBY,YAAY,CAAChB,KAAb,CAAmBK,MAAnB,GAA0B,CAA9D;AACAgB,iBAAS,GAAGJ,WAAW,CAACjB,KAAZ,CAAkBI,CAAlB,GAAsBa,WAAW,CAACjB,KAAZ,CAAkBK,MAAlB,GAAyB,CAA3D;AACAmB,YAAI,GAAGJ,UAAU,GAAGC,SAApB;;AACA,YAAGG,IAAI,GAAG,CAAC,CAAR,IAAaA,IAAI,GAAG,CAAvB,EAAyB;AAACP,qBAAW,CAACjB,KAAZ,CAAkBI,CAAlB,GAAsBa,WAAW,CAACjB,KAAZ,CAAkBI,CAAlB,GAAsBoB,IAA5C;AAAkD;AAC7E;;AAED,UAAG3C,SAAS,IAAI,MAAb,IAAuBA,SAAS,IAAI,IAAvC,EAA4C;AAC1CyC,kBAAU,GAAGN,YAAY,CAAChB,KAAb,CAAmBC,CAAnB,GAAuBe,YAAY,CAAChB,KAAb,CAAmBE,KAAnB,GAAyB,CAA7D;AACAqB,iBAAS,GAAGN,WAAW,CAACjB,KAAZ,CAAkBC,CAAlB,GAAsBgB,WAAW,CAACjB,KAAZ,CAAkBE,KAAlB,GAAwB,CAA1D;AACAsB,YAAI,GAAGF,UAAU,GAAGC,SAApB;;AACA,YAAGC,IAAI,GAAG,CAAC,CAAR,IAAaA,IAAI,GAAG,CAAvB,EAAyB;AAACP,qBAAW,CAACjB,KAAZ,CAAkBC,CAAlB,GAAsBgB,WAAW,CAACjB,KAAZ,CAAkBC,CAAlB,GAAsBuB,IAA5C;AAAkD;AAC7E;AACF;AACF;AACF,C;;;;;;;;;;;;ACvHD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;AACA,IAAIlD,QAAQ,GAAGC,mBAAO,CAAC,wCAAD,CAAtB;;AACA,IAAIkD,EAAE,GAAGlD,mBAAO,CAAC,4BAAD,CAAhB,C,CAEA;AACA;AACA;AAGA;;;AAEO,SAASgB,cAAT,CAAwBd,aAAxB,EAAuCC,cAAvC,EAAuDC,KAAvD,EAA8DC,IAA9D,EAAoEM,cAApE,EAAoFJ,WAApF,EAAiGC,WAAjG,EAA8GC,QAA9G,EAAwHC,OAAxH,EAAgI;AAAE;AACvI;AACA,MAAIyC,kBAAkB,GAAGzC,OAAO,CAAC0C,WAAR,GAAsBC,eAAtB,MAA2C3C,OAAO,CAAC0C,WAAR,EAApE;AACA,MAAIlC,WAAW,GAAGT,QAAQ,CAACc,cAAT,CAAwBrB,aAAxB,CAAlB;AACA,MAAIiB,YAAY,GAAGV,QAAQ,CAACc,cAAT,CAAwBpB,cAAxB,CAAnB;AACA,MAAImD,aAAa,GAAGC,gBAAgB,CAACrC,WAAD,EAAcC,YAAd,EAA4BR,cAA5B,EAA4CwC,kBAA5C,CAApC;AACA,MAAIlC,UAAU,GAAG;AACfI,QAAI,EAAE,EADS;AAEfd,eAAW,EAAE,EAFE;AAGfF,QAAI,EAAE,EAHS;AAIfD,SAAK,EAAE,EAJQ,CAOjB;;AAPiB,GAAjB;AAQAa,YAAU,CAACZ,IAAX,GAAkBA,IAAI,IAAI,IAAR,GAAeN,QAAQ,CAAC4C,aAAT,CAAuB,WAAvB,CAAf,GAAqDtC,IAAvE;;AACA,MAAGY,UAAU,CAACZ,IAAX,IAAmB,QAAnB,IAA+BY,UAAU,CAACZ,IAAX,IAAmB,IAArD,EAA0D;AAAEY,cAAU,CAACI,IAAX,GAAkBmC,cAAc,CAACF,aAAa,CAACG,cAAf,EAA+BH,aAAa,CAACI,cAA7C,EAA6DJ,aAAa,CAACK,UAA3E,EAAuFL,aAAa,CAACM,UAArG,EAAiHN,aAAa,CAACO,eAA/H,EAAgJP,aAAa,CAACQ,eAA9J,EAA+KnD,cAA/K,CAAhC;AAAgO;;AAC5R,MAAGM,UAAU,CAACZ,IAAX,IAAmB,UAAtB,EAAiC;AAAEY,cAAU,CAACI,IAAX,GAAkB0C,gBAAgB,CAACT,aAAa,CAACG,cAAf,EAA+BH,aAAa,CAACI,cAA7C,EAA6DJ,aAAa,CAACO,eAA3E,EAA4FP,aAAa,CAACQ,eAA1G,EAA2HnD,cAA3H,CAAlC;AAA8K;;AACjN,MAAGM,UAAU,CAACZ,IAAX,IAAmB,QAAtB,EAA+B;AAAEY,cAAU,CAACI,IAAX,GAAkB2C,cAAc,CAACV,aAAa,CAACG,cAAf,EAA+BH,aAAa,CAACI,cAA7C,EAA6DJ,aAAa,CAACO,eAA3E,EAA4FP,aAAa,CAACQ,eAA1G,EAA2HnD,cAA3H,CAAhC;AAA4K,GAjBxE,CAoBrI;;;AACA,MAAGH,WAAW,IAAI,IAAlB,EAAuB;AACrB,QAAGC,QAAQ,CAACc,cAAT,CAAwBhB,WAAxB,CAAH,EAAwC;AACtCU,gBAAU,CAACV,WAAX,GAAyB0D,gFAAe,CAAC1D,WAAD,EAAc+C,aAAa,CAACK,UAA5B,EAAwCL,aAAa,CAACM,UAAtD,EAAkEnD,QAAlE,EAA4EC,OAA5E,CAAxC;AACD,KAFD,MAEO;AACLO,gBAAU,CAACV,WAAX,GAAyB2D,6EAAY,CAAC,MAAD,EAASZ,aAAa,CAACK,UAAvB,EAAmCL,aAAa,CAACM,UAAjD,EAA6DnD,QAA7D,EAAuEC,OAAvE,CAArC;AACD;AACF,GAND,MAMO;AACLO,cAAU,CAACV,WAAX,GAAyB,IAAzB;AACD,GA7BoI,CA+BrI;;;AACAU,YAAU,CAACb,KAAX,GAAmB+D,uEAAS,CAAClD,UAAU,CAACI,IAAZ,EAAkBjB,KAAlB,EAAyBM,OAAzB,CAA5B,CAhCqI,CAkCrI;;AACA0D,+EAAgB,CAACnD,UAAU,CAACI,IAAZ,EAAkB8B,kBAAlB,CAAhB;AAEA,SAAOlC,UAAP;AACD,C,CAED;;AAEA,SAASsC,gBAAT,CAA0BrC,WAA1B,EAAuCC,YAAvC,EAAqDb,SAArD,EAAgE6C,kBAAhE,EAAmF;AAAE;AAEjF,MAAIkB,iBAAiB,GAAGnD,WAAW,CAACO,KAAZ,CAAkB6C,WAAlB,CAA8B;AAACC,QAAI,EAAErD,WAAW,CAACsD,MAAnB;AAA2BC,MAAE,EAAEtB;AAA/B,GAA9B,CAAxB;AACA,MAAIuB,kBAAkB,GAAGvD,YAAY,CAACM,KAAb,CAAmB6C,WAAnB,CAA+B;AAACC,QAAI,EAAEpD,YAAY,CAACqD,MAApB;AAA4BC,MAAE,EAAEtB;AAAhC,GAA/B,CAAzB;AACA,MAAIwB,YAAY,GAAGC,0EAAa,CAAC,QAAD,EAAWzB,kBAAX,CAAhC;AACA,MAAIlB,KAAJ,EAAWC,KAAX;;AAEA,MAAGyC,YAAH,EAAgB;AACd1C,SAAK,GAAG0C,YAAY,CAAClD,KAAb,GAAqBC,CAArB,EAAR;AACAQ,SAAK,GAAGyC,YAAY,CAAClD,KAAb,GAAqBI,CAArB,EAAR;AACD,GAHD,MAGO;AACLI,SAAK,GAAG,CAAR;AACAC,SAAK,GAAG,CAAR;AACD;;AAED,MAAIoB,aAAa,GAAG;AAClBG,kBAAc,EAAE,IADE;AAElBC,kBAAc,EAAE,IAFE;AAGlBG,mBAAe,EAAE,IAHC;AAIlBC,mBAAe,EAAE,IAJC;AAKlBH,cAAU,EAAE,IALM;AAMlBC,cAAU,EAAE,IANM,CASpB;;AAToB,GAApB;;AAUA,MAAGtD,SAAS,IAAI,IAAhB,EAAqB;AACnB;AACAgD,iBAAa,CAACG,cAAd,GAA+BY,iBAAiB,CAAC3C,CAAlB,GAAoB2C,iBAAiB,CAAC1C,KAAlB,GAAwB,CAA5C,GAA8CM,KAA7E;AACAqB,iBAAa,CAACI,cAAd,GAA+BW,iBAAiB,CAACxC,CAAlB,GAAoBK,KAAnD,CAHmB,CAKnB;;AACAoB,iBAAa,CAACO,eAAd,GAAgCa,kBAAkB,CAAChD,CAAnB,GAAqBgD,kBAAkB,CAAC/C,KAAnB,GAAyB,CAA9C,GAAgDM,KAAhF;AACAqB,iBAAa,CAACQ,eAAd,GAAgCY,kBAAkB,CAAC7C,CAAnB,GAAqB6C,kBAAkB,CAAC5C,MAAxC,GAA+CI,KAA/E,CAPmB,CASnB;;AACAoB,iBAAa,CAACK,UAAd,GAA2B,CAACL,aAAa,CAACG,cAAd,GAA+BH,aAAa,CAACO,eAA9C,IAA+D,CAA1F;AACAP,iBAAa,CAACM,UAAd,GAA2B,CAACN,aAAa,CAACI,cAAd,GAA+BJ,aAAa,CAACQ,eAA9C,IAA+D,CAA1F;AACD;;AAED,MAAGxD,SAAS,IAAI,OAAhB,EAAwB;AACtB;AACAgD,iBAAa,CAACG,cAAd,GAA+BY,iBAAiB,CAAC3C,CAAlB,GAAoB2C,iBAAiB,CAAC1C,KAAtC,GAA4CM,KAA3E;AACAqB,iBAAa,CAACI,cAAd,GAA+BW,iBAAiB,CAACxC,CAAlB,GAAoBwC,iBAAiB,CAACvC,MAAlB,GAAyB,CAA7C,GAA+CI,KAA9E,CAHsB,CAKtB;;AACAoB,iBAAa,CAACO,eAAd,GAAgCa,kBAAkB,CAAChD,CAAnB,GAAqBO,KAArD;AACAqB,iBAAa,CAACQ,eAAd,GAAgCY,kBAAkB,CAAC7C,CAAnB,GAAqB6C,kBAAkB,CAAC5C,MAAnB,GAA0B,CAA/C,GAAiDI,KAAjF,CAPsB,CAStB;;AACAoB,iBAAa,CAACK,UAAd,GAA2B,CAACL,aAAa,CAACG,cAAd,GAA+BH,aAAa,CAACO,eAA9C,IAA+D,CAA1F;AACAP,iBAAa,CAACM,UAAd,GAA2B,CAACN,aAAa,CAACI,cAAd,GAA+BJ,aAAa,CAACQ,eAA9C,IAA+D,CAA1F;AACD;;AAED,MAAGxD,SAAS,IAAI,MAAhB,EAAuB;AACrB;AACAgD,iBAAa,CAACG,cAAd,GAA+BiB,kBAAkB,CAAChD,CAAnB,GAAqBgD,kBAAkB,CAAC/C,KAAnB,GAAyB,CAA9C,GAAgDM,KAA/E;AACAqB,iBAAa,CAACI,cAAd,GAA+BgB,kBAAkB,CAAC7C,CAAnB,GAAqB6C,kBAAkB,CAAC5C,MAAxC,GAA+CI,KAA9E,CAHqB,CAKrB;;AACAoB,iBAAa,CAACO,eAAd,GAAgCQ,iBAAiB,CAAC3C,CAAlB,GAAoB2C,iBAAiB,CAAC1C,KAAlB,GAAwB,CAA5C,GAA8CM,KAA9E;AACAqB,iBAAa,CAACQ,eAAd,GAAgCO,iBAAiB,CAACxC,CAAlB,GAAoBK,KAApD,CAPqB,CASrB;;AACAoB,iBAAa,CAACK,UAAd,GAA2B,CAACL,aAAa,CAACG,cAAd,GAA+BH,aAAa,CAACO,eAA9C,IAA+D,CAA1F;AACAP,iBAAa,CAACM,UAAd,GAA2B,CAACN,aAAa,CAACI,cAAd,GAA+BJ,aAAa,CAACQ,eAA9C,IAA+D,CAA1F;AACD;;AAED,MAAGxD,SAAS,IAAI,MAAhB,EAAuB;AACrB;AACAgD,iBAAa,CAACG,cAAd,GAA+BY,iBAAiB,CAAC3C,CAAlB,GAAoBO,KAAnD;AACAqB,iBAAa,CAACI,cAAd,GAA+BW,iBAAiB,CAACxC,CAAlB,GAAoBwC,iBAAiB,CAACvC,MAAlB,GAAyB,CAA7C,GAA+CI,KAA9E,CAHqB,CAKrB;;AACAoB,iBAAa,CAACO,eAAd,GAAgCa,kBAAkB,CAAChD,CAAnB,GAAqBgD,kBAAkB,CAAC/C,KAAxC,GAA8CM,KAA9E;AACAqB,iBAAa,CAACQ,eAAd,GAAgCY,kBAAkB,CAAC7C,CAAnB,GAAqB6C,kBAAkB,CAAC5C,MAAnB,GAA0B,CAA/C,GAAiDI,KAAjF,CAPqB,CASrB;;AACAoB,iBAAa,CAACK,UAAd,GAA2B,CAACL,aAAa,CAACG,cAAd,GAA+BH,aAAa,CAACO,eAA9C,IAA+D,CAA1F;AACAP,iBAAa,CAACM,UAAd,GAA2B,CAACN,aAAa,CAACI,cAAd,GAA+BJ,aAAa,CAACQ,eAA9C,IAA+D,CAA1F;AACD;;AAED,SAAOR,aAAP;AACH,C,CAED;;;AAEA,SAASE,cAAT,CAAwBC,cAAxB,EAAwCC,cAAxC,EAAwDC,UAAxD,EAAoEC,UAApE,EAAgFC,eAAhF,EAAiGC,eAAjG,EAAkHxD,SAAlH,EAA4H;AAAE;AAC1H,MAAIuE,IAAI,GAAGC,YAAY,CAACC,UAAb,EAAX;;AAEA,MAAGzE,SAAS,IAAI,IAAhB,EAAqB;AACnB;AACAuE,QAAI,CAACG,WAAL,CAAiBC,WAAW,CAACxB,cAAD,EAAiBC,cAAjB,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACxB,cAAD,EAAiBG,UAAjB,CAA5B;AACAiB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAkBD,UAAlB,CAA5B;AACAiB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAkBC,eAAlB,CAA5B;AACD;;AAED,MAAGxD,SAAS,IAAI,OAAhB,EAAwB;AACtB;AACAuE,QAAI,CAACG,WAAL,CAAiBC,WAAW,CAACxB,cAAD,EAAiBC,cAAjB,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACtB,UAAD,EAAaD,cAAb,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACtB,UAAD,EAAaG,eAAb,CAA5B;AACAe,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAkBC,eAAlB,CAA5B;AACD;;AAED,MAAGxD,SAAS,IAAI,MAAhB,EAAuB;AACrB;AACAuE,QAAI,CAACG,WAAL,CAAiBC,WAAW,CAACxB,cAAD,EAAiBC,cAAjB,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACxB,cAAD,EAAiBG,UAAjB,CAA5B;AACAiB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAkBD,UAAlB,CAA5B;AACAiB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAkBC,eAAlB,CAA5B;AACD;;AAED,MAAGxD,SAAS,IAAI,MAAhB,EAAuB;AACrB;AACAuE,QAAI,CAACG,WAAL,CAAiBC,WAAW,CAACxB,cAAD,EAAiBC,cAAjB,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACtB,UAAD,EAAaD,cAAb,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACtB,UAAD,EAAaG,eAAb,CAA5B;AACAe,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAkBC,eAAlB,CAA5B;AACD;;AAED,MAAIzC,IAAI,GAAG8D,YAAY,CAACC,aAAb,CAA2BC,MAAM,CAACC,kBAAP,CAA0BT,IAA1B,CAA3B,CAAX;AACA,MAAIU,MAAM,GAAGlE,IAAI,CAACmE,MAAL,GAActE,WAAd,GAA4BqE,MAA5B,EAAb;AACAA,QAAM,CAAC,CAAD,CAAN,CAAUE,YAAV,GAAyB,EAAzB;AACAF,QAAM,CAAC,CAAD,CAAN,CAAUE,YAAV,GAAyB,EAAzB;AACApE,MAAI,CAACqE,OAAL,CAAa,cAAb,EAvCwH,CAwCxH;;AAEA,SAAOrE,IAAP;AACH;;AAED,SAAS0C,gBAAT,CAA0BN,cAA1B,EAA0CC,cAA1C,EAA0DG,eAA1D,EAA2EC,eAA3E,EAA4FxD,SAA5F,EAAsG;AAAE;AACpG,MAAIuE,IAAI,GAAGC,YAAY,CAACC,UAAb,EAAX;;AAEA,MAAGzE,SAAS,IAAI,IAAhB,EAAqB;AACnBuE,QAAI,CAACG,WAAL,CAAiBC,WAAW,CAACxB,cAAD,EAAgBC,cAAhB,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAiBC,eAAjB,CAA5B;AACD;;AAED,MAAGxD,SAAS,IAAI,OAAhB,EAAwB;AACtBuE,QAAI,CAACG,WAAL,CAAiBC,WAAW,CAACxB,cAAD,EAAgBC,cAAhB,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAiBC,eAAjB,CAA5B;AACD;;AAED,MAAGxD,SAAS,IAAI,MAAhB,EAAuB;AACrBuE,QAAI,CAACG,WAAL,CAAiBC,WAAW,CAACxB,cAAD,EAAgBC,cAAhB,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAiBC,eAAjB,CAA5B;AACD;;AAED,MAAGxD,SAAS,IAAI,MAAhB,EAAuB;AACrBuE,QAAI,CAACG,WAAL,CAAiBC,WAAW,CAACxB,cAAD,EAAgBC,cAAhB,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAiBC,eAAjB,CAA5B;AACD;;AAED,MAAIzC,IAAI,GAAG8D,YAAY,CAACC,aAAb,CAA2BC,MAAM,CAACC,kBAAP,CAA0BT,IAA1B,CAA3B,CAAX;AACAxD,MAAI,CAACqE,OAAL,CAAa,gBAAb;AAEA,SAAOrE,IAAP;AACH;;AAED,SAAS2C,cAAT,CAAwBP,cAAxB,EAAwCC,cAAxC,EAAwDG,eAAxD,EAAyEC,eAAzE,EAA0FxD,SAA1F,EAAoG;AAAE;AAClG,MAAIuE,IAAI,GAAGC,YAAY,CAACC,UAAb,EAAX;AACA,MAAI1D,IAAJ;;AAEA,MAAGf,SAAS,IAAI,IAAhB,EAAqB;AACnB;AACAuE,QAAI,CAACG,WAAL,CAAiBC,WAAW,CAACxB,cAAD,EAAgBC,cAAhB,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAiBC,eAAjB,CAA5B,EAHmB,CAKnB;;AACAzC,QAAI,GAAG8D,YAAY,CAACC,aAAb,CAA2BC,MAAM,CAACC,kBAAP,CAA0BT,IAA1B,CAA3B,CAAP;AACA,QAAIU,MAAM,GAAGlE,IAAI,CAACmE,MAAL,GAActE,WAAd,GAA4BqE,MAA5B,EAAb;AAEAA,UAAM,CAAC,CAAD,CAAN,CAAUI,SAAV,GAAsB,CAAtB;AACAJ,UAAM,CAAC,CAAD,CAAN,CAAUI,SAAV,GAAsB,CAAtB;AACAJ,UAAM,CAAC,CAAD,CAAN,CAAUK,YAAV,GAAyB,IAAzB;AACAL,UAAM,CAAC,CAAD,CAAN,CAAUM,UAAV,GAAuB,IAAvB;;AAEA,QAAGpC,cAAc,GAACI,eAAlB,EAAkC;AAChC0B,YAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,CAAJ;AAAOG,SAAC,EAAE;AAAV,OAAtB;AACA0D,YAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,CAAC,GAAL;AAAUG,SAAC,EAAE;AAAb,OAApB;AAEA0D,YAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,CAAJ;AAAOG,SAAC,EAAE;AAAV,OAAtB;AACA0D,YAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,CAAJ;AAAOG,SAAC,EAAE;AAAV,OAApB;AACD,KAND,MAMO;AACL0D,YAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,CAAJ;AAAOG,SAAC,EAAE;AAAV,OAAtB;AACA0D,YAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,CAAC,GAAL;AAAUG,SAAC,EAAC;AAAZ,OAApB;AAEA0D,YAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,CAAJ;AAAOG,SAAC,EAAE;AAAV,OAAtB;AACA0D,YAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,CAAJ;AAAOG,SAAC,EAAE;AAAV,OAApB;AACD;AACF;;AAED,MAAGvB,SAAS,IAAI,OAAhB,EAAwB;AACtB;AACAuE,QAAI,CAACG,WAAL,CAAiBC,WAAW,CAACxB,cAAD,EAAgBC,cAAhB,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAiBC,eAAjB,CAA5B,EAHsB,CAKtB;;AACAzC,QAAI,GAAG8D,YAAY,CAACC,aAAb,CAA2BC,MAAM,CAACC,kBAAP,CAA0BT,IAA1B,CAA3B,CAAP;;AACA,QAAIU,OAAM,GAAGlE,IAAI,CAACmE,MAAL,GAActE,WAAd,GAA4BqE,MAA5B,EAAb;;AAEAA,WAAM,CAAC,CAAD,CAAN,CAAUI,SAAV,GAAsB,CAAtB;AACAJ,WAAM,CAAC,CAAD,CAAN,CAAUI,SAAV,GAAsB,CAAtB;AACAJ,WAAM,CAAC,CAAD,CAAN,CAAUK,YAAV,GAAyB,IAAzB;AACAL,WAAM,CAAC,CAAD,CAAN,CAAUM,UAAV,GAAuB,IAAvB;;AAEA,QAAGnC,cAAc,GAACI,eAAlB,EAAkC;AAChCyB,aAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,GAAJ;AAASG,SAAC,EAAE;AAAZ,OAAtB;AACA0D,aAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,CAAC,GAAL;AAASG,SAAC,EAAC;AAAX,OAApB;AAEA0D,aAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,CAAJ;AAAMG,SAAC,EAAE;AAAT,OAAtB;AACA0D,aAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,GAAJ;AAAQG,SAAC,EAAE;AAAX,OAApB;AACD,KAND,MAMO;AACL0D,aAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,GAAJ;AAASG,SAAC,EAAE;AAAZ,OAAtB;AACA0D,aAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,CAAC,GAAL;AAASG,SAAC,EAAC;AAAX,OAApB;AAEA0D,aAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,CAAJ;AAAMG,SAAC,EAAE;AAAT,OAAtB;AACA0D,aAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,GAAJ;AAAQG,SAAC,EAAE;AAAX,OAApB;AACD;AACF;;AAED,MAAGvB,SAAS,IAAI,MAAhB,EAAuB;AACrB;AACAuE,QAAI,CAACG,WAAL,CAAiBC,WAAW,CAACxB,cAAD,EAAgBC,cAAhB,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAiBC,eAAjB,CAA5B,EAHqB,CAKrB;;AACAzC,QAAI,GAAG8D,YAAY,CAACC,aAAb,CAA2BC,MAAM,CAACC,kBAAP,CAA0BT,IAA1B,CAA3B,CAAP;;AACA,QAAIU,QAAM,GAAGlE,IAAI,CAACmE,MAAL,GAActE,WAAd,GAA4BqE,MAA5B,EAAb;;AAEAA,YAAM,CAAC,CAAD,CAAN,CAAUI,SAAV,GAAsB,CAAtB;AACAJ,YAAM,CAAC,CAAD,CAAN,CAAUI,SAAV,GAAsB,CAAtB;AACAJ,YAAM,CAAC,CAAD,CAAN,CAAUK,YAAV,GAAyB,IAAzB;AACAL,YAAM,CAAC,CAAD,CAAN,CAAUM,UAAV,GAAuB,IAAvB;;AAEA,QAAGpC,cAAc,GAACI,eAAlB,EAAkC;AAChC0B,cAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,CAAJ;AAAOG,SAAC,EAAE;AAAV,OAAtB;AACA0D,cAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,CAAC,GAAL;AAASG,SAAC,EAAC;AAAX,OAApB;AAEA0D,cAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,CAAJ;AAAMG,SAAC,EAAE;AAAT,OAAtB;AACA0D,cAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,CAAJ;AAAMG,SAAC,EAAE;AAAT,OAApB;AACD,KAND,MAMO;AACL0D,cAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,CAAJ;AAAOG,SAAC,EAAE;AAAV,OAAtB;AACA0D,cAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,CAAC,GAAL;AAASG,SAAC,EAAC;AAAX,OAApB;AAEA0D,cAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,CAAJ;AAAMG,SAAC,EAAE;AAAT,OAAtB;AACA0D,cAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,CAAJ;AAAMG,SAAC,EAAE;AAAT,OAApB;AACD;AACF;;AAED,MAAGvB,SAAS,IAAI,MAAhB,EAAuB;AACrB;AACAuE,QAAI,CAACG,WAAL,CAAiBC,WAAW,CAACxB,cAAD,EAAgBC,cAAhB,CAA5B;AACAmB,QAAI,CAACK,WAAL,CAAiBD,WAAW,CAACpB,eAAD,EAAiBC,eAAjB,CAA5B,EAHqB,CAKrB;;AACAzC,QAAI,GAAG8D,YAAY,CAACC,aAAb,CAA2BC,MAAM,CAACC,kBAAP,CAA0BT,IAA1B,CAA3B,CAAP;;AACA,QAAIU,QAAM,GAAGlE,IAAI,CAACmE,MAAL,GAActE,WAAd,GAA4BqE,MAA5B,EAAb;;AAEAA,YAAM,CAAC,CAAD,CAAN,CAAUI,SAAV,GAAsB,CAAtB;AACAJ,YAAM,CAAC,CAAD,CAAN,CAAUI,SAAV,GAAsB,CAAtB;AACAJ,YAAM,CAAC,CAAD,CAAN,CAAUK,YAAV,GAAyB,IAAzB;AACAL,YAAM,CAAC,CAAD,CAAN,CAAUM,UAAV,GAAuB,IAAvB;;AAEA,QAAGnC,cAAc,GAACI,eAAlB,EAAkC;AAChCyB,cAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,GAAJ;AAASG,SAAC,EAAE;AAAZ,OAAtB;AACA0D,cAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,CAAC,GAAL;AAASG,SAAC,EAAC;AAAX,OAApB;AAEA0D,cAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,CAAJ;AAAMG,SAAC,EAAE;AAAT,OAAtB;AACA0D,cAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,GAAJ;AAAQG,SAAC,EAAE;AAAX,OAApB;AACD,KAND,MAMO;AACL0D,cAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,GAAJ;AAASG,SAAC,EAAE;AAAZ,OAAtB;AACA0D,cAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,CAAC,GAAL;AAASG,SAAC,EAAC;AAAX,OAApB;AAEA0D,cAAM,CAAC,CAAD,CAAN,CAAUO,SAAV,GAAsB;AAACpE,SAAC,EAAE,CAAJ;AAAMG,SAAC,EAAE;AAAT,OAAtB;AACA0D,cAAM,CAAC,CAAD,CAAN,CAAUQ,OAAV,GAAoB;AAACrE,SAAC,EAAE,GAAJ;AAAQG,SAAC,EAAE;AAAX,OAApB;AACD;AACF,GAtH+F,CAwHhG;;;AACAR,MAAI,CAACqE,OAAL,CAAa,cAAb;AAEA,SAAOrE,IAAP;AACH,C;;;;;;;;;;;;ACpVD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AACA,IAAItB,QAAQ,GAAGC,mBAAO,CAAC,wCAAD,CAAtB;;AACA,IAAIkD,EAAE,GAAGlD,mBAAO,CAAC,4BAAD,CAAhB,C,CAEA;AACA;;;AAEO,SAASkE,YAAT,CAAsB8B,OAAtB,EAA+BtE,CAA/B,EAAkCG,CAAlC,EAAqCpB,QAArC,EAA+CC,OAA/C,EAAwD;AAC7D,MAAIuF,SAAS,GAAGC,6CAAM,CAACC,YAAP,EAAhB;AACA,MAAIC,aAAJ,EAAmBC,gBAAnB,EAAqCC,MAArC;AACA,MAAInD,kBAAkB,GAAGzC,OAAO,CAAC0C,WAAR,GAAsBC,eAAtB,MAA2C3C,OAAO,CAAC0C,WAAR,EAApE;;AAEA,OAAK,IAAImD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,SAAS,CAACO,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACzCF,oBAAgB,GAAGJ,SAAS,CAACM,CAAD,CAAT,CAAaE,wCAAb,CACjBhG,QADiB,CAAnB;;AAGA,SAAK,IAAIiG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,gBAAgB,CAACG,MAArC,EAA6CE,CAAC,EAA9C,EAAkD;AAChD,UAAIL,gBAAgB,CAACK,CAAD,CAAhB,CAAoBC,IAApB,CAAyBC,QAAzB,CAAkCZ,OAAlC,CAAJ,EAAgD;AAC9CI,qBAAa,GAAGC,gBAAgB,CAACK,CAAD,CAAhC;AACD;AACF;AACF;;AAED,MAAIN,aAAa,IAAI,IAArB,EAA2B;AACzBE,UAAM,GAAG,IAAT;AACApD,MAAE,CAAC2D,KAAH,CACE,+BADF,EAEE,kWAFF;AAID,GAND,MAMO;AACL,QAAIC,YAAY,GAAGV,aAAa,CAACW,MAAd,EAAnB;AACAT,UAAM,GAAGQ,YAAY,CAACE,iBAAb,EAAT;AACAV,UAAM,GAAGW,sEAAmB,CAACX,MAAD,EAAS5E,CAAT,EAAYG,CAAZ,EAAesB,kBAAf,CAA5B;AACD;;AACD,SAAOmD,MAAP;AACD;AAEM,SAASrC,eAAT,CAAyB1D,WAAzB,EAAsCmB,CAAtC,EAAyCG,CAAzC,EAA4CpB,QAA5C,EAAsDC,OAAtD,EAA+D;AACpE,MAAIyC,kBAAkB,GAAGzC,OAAO,CAAC0C,WAAR,GAAsBC,eAAtB,MAA2C3C,OAAO,CAAC0C,WAAR,EAApE;AACA,MAAIhC,SAAS,GAAGX,QAAQ,CAACc,cAAT,CAAwBhB,WAAxB,CAAhB;AACA,MAAI2G,QAAQ,GAAGtC,gEAAa,CAAC,YAAD,EAAezB,kBAAf,CAA5B;AACA,MAAIgE,OAAO,GAAGvC,gEAAa,CAAC,QAAD,EAAWzB,kBAAX,CAA3B;AACA,MAAIiE,QAAQ,GAAGD,OAAO,IAAI,IAAX,GAAkBA,OAAO,CAAC1F,KAAR,GAAgBC,CAAhB,EAAlB,GAAwC,CAAvD;AACA,MAAI2F,QAAQ,GAAGF,OAAO,IAAI,IAAX,GAAkBA,OAAO,CAAC1F,KAAR,GAAgBI,CAAhB,EAAlB,GAAwC,CAAvD;;AAEA,MAAIqF,QAAJ,EAAc;AACZ9F,aAAS,CAACK,KAAV,CAAgBC,CAAhB,GACEA,CAAC,GAAGN,SAAS,CAACK,KAAV,CAAgBE,KAAhB,GAAwB,CAA5B,IAAiCuF,QAAQ,CAACzF,KAAT,GAAiBC,CAAjB,KAAuB0F,QAAxD,CADF;AAEAhG,aAAS,CAACK,KAAV,CAAgBI,CAAhB,GACEA,CAAC,GAAGT,SAAS,CAACK,KAAV,CAAgBK,MAAhB,GAAyB,CAA7B,IAAkCoF,QAAQ,CAACzF,KAAT,GAAiBI,CAAjB,KAAuBwF,QAAzD,CADF;AAEAH,YAAQ,CAACI,sBAAT,CAAgC,CAAhC;AACD,GAND,MAMO;AACLlG,aAAS,CAACK,KAAV,CAAgBC,CAAhB,GAAoBA,CAAC,GAAGN,SAAS,CAACK,KAAV,CAAgBE,KAAhB,GAAwB,CAAhD;AACAP,aAAS,CAACK,KAAV,CAAgBI,CAAhB,GAAoBA,CAAC,GAAGT,SAAS,CAACK,KAAV,CAAgBK,MAAhB,GAAyB,CAAjD;AACD;;AACD,SAAOV,SAAS,CAACmG,EAAjB;AACD;AAEM,SAASC,eAAT,CAAyBjH,WAAzB,EAAsCE,QAAtC,EAAgD;AACnD,MAAIgH,eAAe,GAAGhH,QAAQ,CAACc,cAAT,CAAwBhB,WAAxB,CAAtB;AACA,MAAImH,aAAJ;;AACA,MAAGD,eAAH,EAAmB;AACjBC,iBAAa,GAAGD,eAAe,CAACjD,MAAhC;AACAiD,mBAAe,CAACE,MAAhB;;AACA,QAAGD,aAAa,CAAClC,MAAd,CAAqBgB,MAArB,IAA+B,CAAlC,EAAoC;AAClCkB,mBAAa,CAACC,MAAd;AACD;AACF;AACF,C;;;;;;;;;;;;ACrEH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA,IAAI5H,QAAQ,GAAGC,mBAAO,CAAC,wCAAD,CAAtB;;AACA,IAAIkD,EAAE,GAAGlD,mBAAO,CAAC,4BAAD,CAAhB,C,CAEA;AACA;AACA;;;AAGO,SAAS4E,aAAT,CAAuBgD,SAAvB,EAAkCzE,kBAAlC,EAAsD;AAAE;AAC3D,MAAIwB,YAAY,GAAG,IAAnB,CADyD,CAGzD;;AACA,OAAI,IAAI+B,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGvD,kBAAkB,CAACqC,MAAnB,GAA4BqC,KAA5B,EAAnB,EAAwDnB,CAAC,EAAzD,EAA4D;AAC1D,QAAGvD,kBAAkB,CAACqC,MAAnB,GAA4BkB,CAA5B,EAA+BC,IAA/B,MAAyCiB,SAA5C,EAAuD;AACrDjD,kBAAY,GAAGxB,kBAAkB,CAACqC,MAAnB,GAA4BkB,CAA5B,CAAf;AACD;AACF;;AAED,SAAO/B,YAAP;AACH;AAEM,SAASP,gBAAT,CAA0B/C,IAA1B,EAAgC8B,kBAAhC,EAAmD;AACtD,MAAIwB,YAAY,GAAGC,aAAa,CAAC,QAAD,EAAWzB,kBAAX,CAAhC;;AACA,MAAGwB,YAAH,EAAgB;AACdA,gBAAY,CAACmD,SAAb,CAAuB,CAACzG,IAAD,CAAvB;AACAsD,gBAAY,CAAC2C,sBAAb,CAAoC,CAApC;AACD,GAHD,MAGO;AACL,QAAIS,KAAK,GAAG/H,mBAAO,CAAC,8BAAD,CAAP,CAAsB+H,KAAlC;;AACA,QAAIC,KAAK,GAAG,IAAID,KAAJ,CAAU;AACpBvD,YAAM,EAAErB,kBADY;AAEpBwD,UAAI,EAAE,QAFc;AAGpBsB,YAAM,EAAE,IAHY;AAIpBzC,YAAM,EAAE,CAACnE,IAAD;AAJY,KAAV,CAAZ;AAMA2G,SAAK,CAACE,UAAN;AACAF,SAAK,CAACG,WAAN;AACD;AACJ;AAEM,SAASlB,mBAAT,CAA6B7F,SAA7B,EAAwCM,CAAxC,EAA2CG,CAA3C,EAA8CsB,kBAA9C,EAAkE;AACrE,MAAI+D,QAAQ,GAAGtC,aAAa,CAAC,YAAD,EAAezB,kBAAf,CAA5B;AACA,MAAIgE,OAAO,GAAGvC,aAAa,CAAC,QAAD,EAAWzB,kBAAX,CAA3B;AAEA,MAAIiE,QAAQ,GAAGD,OAAO,IAAI,IAAX,GAAkBA,OAAO,CAAC1F,KAAR,GAAgBC,CAAhB,EAAlB,GAAwC,CAAvD;AACA,MAAI2F,QAAQ,GAAGF,OAAO,IAAI,IAAX,GAAkBA,OAAO,CAAC1F,KAAR,GAAgBI,CAAhB,EAAlB,GAAwC,CAAvD;;AAEA,MAAIqF,QAAJ,EAAc;AACZ9F,aAAS,CAACK,KAAV,CAAgBC,CAAhB,GACEA,CAAC,GAAGN,SAAS,CAACK,KAAV,CAAgBE,KAAhB,GAAwB,CAA5B,IAAiCuF,QAAQ,CAACzF,KAAT,GAAiBC,CAAjB,KAAuB0F,QAAxD,CADF;AAEAhG,aAAS,CAACK,KAAV,CAAgBI,CAAhB,GACEA,CAAC,GAAGT,SAAS,CAACK,KAAV,CAAgBK,MAAhB,GAAyB,CAA7B,IAAkCoF,QAAQ,CAACzF,KAAT,GAAiBI,CAAjB,KAAuBwF,QAAzD,CADF;AAEAjG,aAAS,CAACoD,MAAV,GAAmB0C,QAAnB;AACAA,YAAQ,CAACI,sBAAT,CAAgC,CAAhC;AACD,GAPD,MAOO;AACLlG,aAAS,CAACK,KAAV,CAAgBC,CAAhB,GAAoBA,CAAC,GAAGN,SAAS,CAACK,KAAV,CAAgBE,KAAhB,GAAwB,CAA5B,GAAgCyF,QAApD;AACAhG,aAAS,CAACK,KAAV,CAAgBI,CAAhB,GAAoBA,CAAC,GAAGT,SAAS,CAACK,KAAV,CAAgBK,MAAhB,GAAyB,CAA7B,GAAiCuF,QAArD;;AACA,QAAIU,KAAK,GAAG/H,mBAAO,CAAC,8BAAD,CAAP,CAAsB+H,KAAlC;;AACA,QAAIC,KAAK,GAAG,IAAID,KAAJ,CAAU;AACpBvD,YAAM,EAAErB,kBADY;AAEpBwD,UAAI,EAAE,YAFc;AAGpBnB,YAAM,EAAE,CAACpE,SAAD;AAHY,KAAV,CAAZ;AAKA4G,SAAK,CAACE,UAAN;AACAF,SAAK,CAACG,WAAN;AACD;;AACD,SAAO/G,SAAS,CAACmG,EAAjB;AACD,C;;;;;;;;;;;;ACnEH;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,IAAMa,SAAS,GAAG,YAAlB,C,CACA;AACA;;AAEO,SAASjE,SAAT,CAAmB9C,IAAnB,EAAyBjB,KAAzB,EAAgCM,OAAhC,EAAwC;AAAE;AAC7C,MAAI2H,UAAJ;;AAEA,MAAGjI,KAAK,IAAI,IAAZ,EAAiB;AACf;AACA,QAAGkI,cAAc,CAAClI,KAAD,EAAQM,OAAR,CAAd,IAAkC,IAAlC,IAA0CN,KAAK,IAAI,eAAtD,EAAsE;AACpE;AACAiI,gBAAU,GAAGjI,KAAb;AACA,UAAImI,QAAQ,GAAGD,cAAc,CAAClI,KAAD,EAAQM,OAAR,CAA7B;AACAW,UAAI,CAACmH,WAAL,GAAmBD,QAAQ,CAAC,CAAD,CAA3B;AACD,KALD,MAKO;AACL;AACAF,gBAAU,GAAG,eAAb;AACA,UAAII,MAAM,GAAGpH,IAAI,CAACjB,KAAL,GAAasI,kBAAb,CAAgC,CAAhC,CAAb;AACAD,YAAM,CAACE,KAAP,GAAeC,OAAO,CAACC,uBAAR,CAAgC;AAACC,SAAC,EAAE,IAAJ;AAAUvC,SAAC,EAAE,IAAb;AAAmBwC,SAAC,EAAE,IAAtB;AAA4BC,SAAC,EAAE;AAA/B,OAAhC,CAAf;AACAP,YAAM,CAACQ,SAAP,GAAmB,CAAnB;AACA5H,UAAI,CAACjB,KAAL,GAAa8I,aAAb,GAA6B,CAA7B;AACD;AACF,GAfD,MAeO;AACL;AACA,QAAGC,OAAO,CAACC,OAAR,CAAgBC,uCAAhB,CAAwD,YAAxD,EAAsE3I,OAAtE,EAA+E0H,SAA/E,KAA6F,IAA7F,IAAqGe,OAAO,CAACC,OAAR,CAAgBC,uCAAhB,CAAwD,YAAxD,EAAsE3I,OAAtE,EAA+E0H,SAA/E,KAA6F,eAArM,EAAqN;AACnN;AACAC,gBAAU,GAAGC,cAAc,CAACa,OAAO,CAACC,OAAR,CAAgBC,uCAAhB,CAAwD,YAAxD,EAAsE3I,OAAtE,EAA+E0H,SAA/E,CAAD,EAA4F1H,OAA5F,CAA3B;AACAW,UAAI,CAACmH,WAAL,GAAmBH,UAAU,CAAC,CAAD,CAA7B;AACAA,gBAAU,GAAGA,UAAU,CAAC,CAAD,CAAV,CAAc1B,IAAd,EAAb;AACD,KALD,MAKO;AACL0B,gBAAU,GAAG,eAAb;;AACA,UAAII,OAAM,GAAGpH,IAAI,CAACjB,KAAL,GAAasI,kBAAb,CAAgC,CAAhC,CAAb;;AACAD,aAAM,CAACE,KAAP,GAAeC,OAAO,CAACC,uBAAR,CAAgC;AAACC,SAAC,EAAE,IAAJ;AAAUvC,SAAC,EAAE,IAAb;AAAmBwC,SAAC,EAAE,IAAtB;AAA4BC,SAAC,EAAE;AAA/B,OAAhC,CAAf;AACAP,aAAM,CAACQ,SAAP,GAAmB,CAAnB;AACA5H,UAAI,CAACjB,KAAL,GAAa8I,aAAb,GAA6B,CAA7B;AACD;AACF;;AAED,SAAOb,UAAP;AACH;AAEM,SAASC,cAAT,CAAwB3B,IAAxB,EAA8BjG,OAA9B,EAAuC;AAAE;AAC5C,MAAI4I,SAAS,GAAG5I,OAAO,CAAC6I,cAAR,EAAhB;AACA,MAAIvD,OAAO,GAAG,QAAd;AACA,MAAIwD,MAAM,GAAG,EAAb;;AAEA,OAAI,IAAI9C,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG4C,SAAS,CAACzB,KAAV,EAAnB,EAAsCnB,CAAC,EAAvC,EAA0C;AACxC,QAAGC,IAAI,IAAI,IAAX,EAAiB;AACf,UAAG2C,SAAS,CAAC5C,CAAD,CAAT,CAAaC,IAAb,GAAoBC,QAApB,CAA6BZ,OAA7B,CAAH,EAAyC;AAACwD,cAAM,CAACC,IAAP,CAAYH,SAAS,CAAC5C,CAAD,CAArB;AAA2B;AACtE,KAFD,MAEO;AACL,UAAG4C,SAAS,CAAC5C,CAAD,CAAT,CAAaC,IAAb,MAAuBA,IAA1B,EAA+B;AAAC6C,cAAM,CAACC,IAAP,CAAYH,SAAS,CAAC5C,CAAD,CAArB;AAA2B;AAC5D;AACF;;AACC,SAAO8C,MAAP;AACL,C;;;;;;;;;;;ACvDDE,MAAM,CAACC,OAAP,CAAeC,UAAf,GAA4B,sBAA5B,C,CAGA;;AACAF,MAAM,CAACC,OAAP,CAAeE,UAAf,GAA4B;AACxBC,QAAM,EAAE,SADgB;AAExBC,QAAM,EAAE,SAFgB;AAGxBC,UAAQ,EAAE;AAHc,CAA5B,C,CAKA;;AACAN,MAAM,CAACC,OAAP,CAAeM,aAAf,GAA+B,EAA/B,C,CAEA;;AACAP,MAAM,CAACC,OAAP,CAAeO,YAAf,GAA8B,QAA9B;AACAR,MAAM,CAACC,OAAP,CAAeQ,cAAf,GAAgC,UAAhC,C,CAGA;;AACAT,MAAM,CAACC,OAAP,CAAeS,OAAf,GAAyB,KAAzB;AACAV,MAAM,CAACC,OAAP,CAAeU,QAAf,GAA0B,MAA1B;AACAX,MAAM,CAACC,OAAP,CAAeW,WAAf,GAA6B,SAA7B;AACAZ,MAAM,CAACC,OAAP,CAAeY,QAAf,GAA0B,MAA1B,C,CAEA;;AACAb,MAAM,CAACC,OAAP,CAAea,SAAf,GAA2B,CACvB,CADuB,EACrB,CADqB,EACnB,CADmB,EACjB,CADiB,EACf,CADe,EACb,CADa,EACX,CADW,EACT,CADS,EACP,CADO,EACL,EADK,EACF,EADE,EACC,EADD,EACI,EADJ,EACO,EADP,EACU,EADV,EACa,EADb,EACgB,EADhB,EACmB,EADnB,EACsB,EADtB,EACyB,EADzB,EAC4B,EAD5B,EAC+B,EAD/B,EACkC,EADlC,EACqC,EADrC,EACwC,EADxC,EAC2C,EAD3C,EAC8C,EAD9C,EACiD,EADjD,EACoD,EADpD,EACuD,EADvD,CAA3B,C,CAIA;;AACAd,MAAM,CAACC,OAAP,CAAec,eAAf,GAAiC,CAC7B,MAD6B,EAE7B,MAF6B,EAG7B,MAH6B,EAI7B,IAJ6B,EAK7B,MAL6B,EAM7B,MAN6B,CAAjC,C;;;;;;;;;;;;AC7BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAM1C,KAAK,GAAG2C,iDAAM,CAAC3C,KAArB;AACA,IAAM4C,QAAQ,GAAGD,iDAAM,CAACC,QAAxB;AACA,IAAMC,SAAS,GAAGF,iDAAM,CAACE,SAAzB;AACA,IAAMC,SAAS,GAAGH,iDAAM,CAACG,SAAzB;AACA,IAAMC,IAAI,GAAGJ,iDAAM,CAACI,IAApB;AACA,IAAMC,QAAQ,GAAGL,iDAAM,CAACK,QAAxB;AACA,IAAMC,IAAI,GAAGN,iDAAM,CAACM,IAApB;AACA,IAAMvK,QAAQ,GAAGkK,QAAQ,CAACM,mBAAT,EAAjB;AAEA,IAAMC,YAAY,GAAGzK,QAAQ,CAACyK,YAA9B;AACA,IAAMC,iBAAiB,GAAGD,YAAY,CAAC1F,MAAvC;AACA,IAAM4F,QAAQ,GAAG3K,QAAQ,CAAC4K,KAA1B;AACA,IAAI3K,OAAO,GAAGyI,OAAO,CAAC1I,QAAR,CAAiB6K,YAAjB,EAAd;AAEA,IAAMC,cAAc,GAAG,gBAAvB;AACA,IAAIC,eAAe,GAAG,EAAtB;AAEA,IAAIC,YAAY,GAAG,EAAnB;AACA,IAAIC,QAAQ,GAAG,EAAf;AACA,IAAIC,UAAU,GAAG,EAAjB;AACA,IAAIC,YAAY,GAAG,EAAnB;AACA,IAAIC,IAAI,GAAG,EAAX;AACA,IAAIC,QAAQ,GAAG,MAAf;AACA,IAAIC,WAAW,GAAG,KAAlB;AAEA,IAAMC,wBAAwB,GAAG,CAAjC;AACA,IAAMC,WAAW,GAAG,GAApB;AACA,IAAMC,WAAW,GAAG,GAApB;AAEA,IAAMC,uBAAuB,GAAG,GAAhC;AACA,IAAMC,6BAA6B,GAAG,EAAtC;AACA,IAAIC,aAAa,GAAG,EAApB;AACA,IAAIC,gBAAgB,GAAG,EAAvB;AACA,IAAIC,YAAY,GAAG,EAAnB;AACA,IAAIC,aAAa,GAAG,MAApB;AACA,IAAIC,SAAS,GAAG,GAAhB;AACA,IAAIC,UAAU,GAAG,MAAjB;;AAGA,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAK;AAAC;AAChCjB,UAAQ,GAAGkB,MAAM,EAAjB;AACA,MAAIC,iBAAiB,GAAGC,oBAAoB,EAA5C;AACA,MAAIC,gBAAgB,GAAGC,kBAAkB,CAACtB,QAAD,CAAzC;AACA,MAAIuB,SAAS,GAAG;AACZvL,KAAC,EAACqL,gBADU;AAEZlL,KAAC,EAAC,CAFU;AAGZF,SAAK,EAACkL,iBAAiB,CAAClL,KAAlB,GAAwBqK,wBAAxB,GAAiDC,WAAW,GAAC,CAHvD;AAIZnK,UAAM,EAAE+K,iBAAiB,CAAC/K,MAAlB,GAAyBqK,uBAAzB,GAAiDC,6BAA6B,GAAC;AAJ3E,GAAhB;AAOAX,cAAY,GAAG,IAAIV,QAAJ,CAAa;AACxBpE,QAAI,EAAEmF,QADkB;AAExBtH,UAAM,EAACkH,QAFiB;AAGxBjK,SAAK,EAACwL;AAHkB,GAAb,CAAf;AAMAC,6BAA2B,GAjBI,CAmB/B;;AACAC,4BAA0B,GApBK,CAsB/B;;AACAC,mBAAiB;AAEjBC,cAAY;AACf,CA1BD;;AA4BA,IAAMH,2BAA2B,GAAG,SAA9BA,2BAA8B,GAAK;AAAC;AACtCzM,UAAQ,CAACyK,YAAT,GAAwBQ,QAAxB;;AACA,OAAI,IAAIhF,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACgF,QAAQ,CAAClG,MAAT,CAAgBgB,MAA9B,EAAqCE,CAAC,EAAtC,EAAyC;AACrCgF,YAAQ,CAAClG,MAAT,CAAgBkB,CAAhB,EAAmB4G,QAAnB,GAA8B,KAA9B;AACH;;AAAA;AACD7B,cAAY,CAAC6B,QAAb,GAAwB,IAAxB;AACH,CAND;;AAQA,IAAMN,kBAAkB,GAAG,SAArBA,kBAAqB,CAACtB,QAAD,EAAa;AAAC;AACrC,MAAI6B,WAAW,GAAG,CAAlB;AACA,MAAIC,gBAAgB,GAAG,CAAvB;AACA,MAAIC,cAAc,GAAG/B,QAAQ,CAAClG,MAA9B;;AACA,MAAGiI,cAAc,CAACjH,MAAf,GAAsB,CAAzB,EAA2B;AACvB+G,eAAW,GAAGE,cAAc,CAAC,CAAD,CAAd,CAAkBhM,KAAlB,CAAwBC,CAAtC;AACA8L,oBAAgB,GAAGC,cAAc,CAAC,CAAD,CAAd,CAAkBhM,KAAlB,CAAwBC,CAAxB,GAA4B+L,cAAc,CAAC,CAAD,CAAd,CAAkBhM,KAAlB,CAAwBE,KAApD,GAA4D,GAA/E;;AACA,SAAI,IAAI+E,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC+G,cAAc,CAACjH,MAA7B,EAAoCE,CAAC,EAArC,EAAwC;AACpC,UAAG+G,cAAc,CAAC/G,CAAD,CAAd,CAAkBjF,KAAlB,CAAwBC,CAAxB,GAA4B6L,WAA/B,EAA2C;AACvCA,mBAAW,GAAGE,cAAc,CAAC/G,CAAD,CAAd,CAAkBjF,KAAlB,CAAwBC,CAAtC;AACA8L,wBAAgB,GAAGC,cAAc,CAAC/G,CAAD,CAAd,CAAkBjF,KAAlB,CAAwBC,CAAxB,GAA4B+L,cAAc,CAAC/G,CAAD,CAAd,CAAkBjF,KAAlB,CAAwBE,KAApD,GAA4D,GAA/E;AACH;AACJ;;AAAA;AACJ;;AAED,SAAO6L,gBAAP;AACH,CAhBD;;AAkBA,IAAMZ,MAAM,GAAG,SAATA,MAAS,GAAK;AAAC;AACjB,MAAIc,YAAY,GAAG,EAAnB;;AACA,OAAI,IAAIhH,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0E,QAAQ,CAAC5E,MAAvB,EAA8BE,CAAC,EAA/B,EAAkC;AAC9B,QAAG0E,QAAQ,CAAC1E,CAAD,CAAR,CAAYC,IAAZ,KAAqB,MAAxB,EAA+B;AAC3B+G,kBAAY,GAAGtC,QAAQ,CAAC1E,CAAD,CAAvB;AACAqF,iBAAW,GAAG,IAAd;AACA;AACH;AACJ;;AAAA;;AAED,MAAG,CAAC2B,YAAJ,EAAiB;AACbA,gBAAY,GAAG,IAAI1C,IAAJ,CAAS;AACpBrE,UAAI,EAAE,MADc;AAEpBnC,YAAM,EAAE/D;AAFY,KAAT,CAAf;AAIH;;AAED,SAAOiN,YAAP;AACH,CAlBD;;AAoBA,IAAMP,0BAA0B,GAAG,SAA7BA,0BAA6B,GAAK;AAAC;AACrC;AACA,MAAIQ,UAAU,GAAG,IAAI5F,KAAJ,CAAU;AACvBpB,QAAI,EAAE,OADiB;AAEvBnC,UAAM,EAACiH;AAFgB,GAAV,CAAjB,CAFoC,CAOpC;AACA;;AACA,MAAMmC,WAAW,GAAG,IAAI/C,SAAJ,CAAc;AAC9BlE,QAAI,EAAE,OADwB;AAE9BlF,SAAK,EAAC;AACFC,OAAC,EAAC,CADA;AAEFG,OAAC,EAAC,CAFA;AAGFF,WAAK,EAAC8J,YAAY,CAAChK,KAAb,CAAmBE,KAHvB;AAIFG,YAAM,EAAEqK;AAJN,KAFwB;AAQ9B0B,aAAS,EAAEhD,SAAS,CAACiD,SAAV,CAAoBlD,SARD;AAS9BpG,UAAM,EAACmJ,UATuB;AAU9BvN,SAAK,EAAC;AACF2N,WAAK,EAAC,CAAC;AAACpF,aAAK,EAAC;AAAP,OAAD;AADJ;AAVwB,GAAd,CAApB,CAToC,CAwBpC;;AACA,MAAMqF,SAAS,GAAG,IAAIlD,IAAJ,CAAS;AACvBmD,QAAI,EAAEnC,QADiB;AAEvBrK,SAAK,EAAE;AACHC,OAAC,EAACuK,WADC;AAEHpK,OAAC,EAAC,EAFC;AAGHF,WAAK,EAAC,GAHH;AAIHG,YAAM,EAACuK;AAJJ,KAFgB;AAQvB7H,UAAM,EAAEmJ,UARe;AASvBhH,QAAI,EAAE;AATiB,GAAT,CAAlB;AAYAqH,WAAS,CAAC5N,KAAV,CAAgB8N,QAAhB,GAA2B7B,aAA3B;AACA2B,WAAS,CAAC5N,KAAV,CAAgB+N,UAAhB,GAA6B1B,SAA7B;AACAuB,WAAS,CAAC5N,KAAV,CAAgBgO,SAAhB,GAA4B1B,UAA5B;AACH,CAxCD;;AA0CA,IAAMI,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACuB,IAAD,EAAS;AAAC;AACnC,MAAIC,IAAI,GAAG,CAAX;AACA,MAAIC,SAAS,GAAG,CAAhB;AACA,MAAIC,UAAU,GAAG,CAAjB;AACA,MAAIC,WAAW,GAAG,CAAlB;AACA,MAAIC,eAAe,GAAG,CAAtB;AACA,MAAIC,gBAAgB,GAAG,CAAvB;AACA,MAAI9B,iBAAiB,GAAI,EAAzB;;AACA,OAAI,IAAInG,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACiF,UAAU,CAACnF,MAAzB,EAAgCE,CAAC,EAAjC,EAAoC;AAChC,QAAIkI,aAAa,GAAGC,gBAAgB,CAAClD,UAAU,CAACjF,CAAD,CAAV,CAAcoI,IAAd,CAAmB,CAAnB,EAAsBC,IAAvB,CAApC;AACAL,mBAAe,IAAIE,aAAa,CAACnN,KAAd,CAAoBE,KAAvC;;AAEA,QAAGgK,UAAU,CAACjF,CAAD,CAAV,CAAcF,MAAd,GAAqB8H,IAAxB,EAA6B;AACzBA,UAAI,GAAG3C,UAAU,CAACjF,CAAD,CAAV,CAAcF,MAArB;AACA+H,eAAS,GAAG7H,CAAZ;AACH;AACJ;;AAAA;AAED8H,YAAU,GAAGE,eAAe,GAAG,CAAC/C,UAAU,CAACnF,MAAX,GAAkB,CAAnB,IAAsBqF,IAAI,CAACmD,IAA1D;AAEA,MAAIC,QAAQ,GAAGtD,UAAU,CAAC4C,SAAD,CAAV,CAAsBO,IAArC;;AACA,OAAI,IAAII,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACD,QAAQ,CAACzI,MAAvB,EAA8B0I,CAAC,EAA/B,EAAkC;AAC9B,QAAIN,aAAa,GAAGC,gBAAgB,CAACI,QAAQ,CAACC,CAAD,CAAR,CAAYH,IAAb,CAApC;AACAJ,oBAAgB,IAAIC,aAAa,CAACnN,KAAd,CAAoBK,MAAxC;AACH;;AAAA;AAED2M,aAAW,GAAGE,gBAAgB,GAAG,CAACM,QAAQ,CAACzI,MAAT,GAAgB,CAAjB,IAAoBqF,IAAI,CAACsD,MAA1D;AAEAtC,mBAAiB,GAAG;AAAClL,SAAK,EAAC6M,UAAP;AAAmB1M,UAAM,EAAC2M;AAA1B,GAApB;AAEA,SAAO5B,iBAAP;AACH,CA/BD;;AAiCA,IAAMO,iBAAiB,GAAG,SAApBA,iBAAoB,GAAK;AAAC;AAC5B,MAAI2B,IAAI,GAAG,EAAX;AACA,MAAIxH,EAAE,GAAG,EAAT;AACA,MAAI6H,YAAY,GAAG,EAAnB;;AACA,OAAI,IAAI1I,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACiF,UAAU,CAACnF,MAAzB,EAAgCE,CAAC,EAAjC,EAAoC;AAChC,QAAGiF,UAAU,CAACjF,CAAD,CAAV,CAAcoI,IAAd,CAAmBtI,MAAnB,GAA2B,CAA9B,EAAgC;AAC5B,UAAI6I,KAAK,GAAG1D,UAAU,CAACjF,CAAD,CAAV,CAAcoI,IAA1B;;AACA,WAAI,IAAII,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACG,KAAK,CAAC7I,MAApB,EAA2B0I,CAAC,EAA5B,EAA+B;AAC3BH,YAAI,GAAGM,KAAK,CAACH,CAAD,CAAL,CAASH,IAAhB;AACAxH,UAAE,GAAG8H,KAAK,CAACH,CAAD,CAAL,CAAS3H,EAAd;AACA6H,oBAAY,GAAG;AACX1N,WAAC,EAACgF,CADS;AAEX7E,WAAC,EAACqN;AAFS,SAAf;AAKAI,kBAAU,CAAC/H,EAAD,EAAIwH,IAAJ,EAASK,YAAT,EAAsBC,KAAK,CAACH,CAAD,CAAL,CAASK,QAA/B,CAAV;AACH;;AAAA;AACJ;AACJ;;AAAA;AACJ,CAnBD;;AAqBA,IAAMD,UAAU,GAAG,SAAbA,UAAa,CAAC/H,EAAD,EAAIwH,IAAJ,EAASS,OAAT,EAAiBD,QAAjB,EAA6B;AAAC;AAC7C,MAAIlM,eAAe,GAAGwL,gBAAgB,CAACE,IAAD,CAAtC,CAD4C,CAG5C;;AACA,MAAMU,SAAS,GAAG,IAAI1H,KAAJ,CAAU;AACxBpB,QAAI,EAAEtD,eAAe,CAACsD,IADE;AAExBlF,SAAK,EAAEiO,uBAAuB,CAACF,OAAD,EAASnM,eAAT;AAFN,GAAV,CAAlB;;AAKA,MAAG,CAACkM,QAAJ,EAAa;AACT;AACA,QAAII,SAAS,GAAGtM,eAAe,CAACuM,SAAhB,EAAhB;AACA,QAAIC,cAAc,GAAG;AACjBnO,OAAC,EAAC,CADe;AAEjBG,OAAC,EAAC,CAFe;AAGjBF,WAAK,EAACgO,SAAS,CAAClO,KAAV,CAAgBE,KAHL;AAIjBG,YAAM,EAAC6N,SAAS,CAAClO,KAAV,CAAgBK;AAJN,KAArB;AAMA6N,aAAS,CAAClO,KAAV,GAAkBoO,cAAlB;AACAF,aAAS,CAACnL,MAAV,GAAmBiL,SAAnB,CAVS,CAYT;;AACA,QAAIK,QAAQ,GAAG;AACXC,aAAO,EAAEN,SAAS,CAAClI,EADR;AAEXwH,UAAI,EAAEA,IAFK;AAGXxH,QAAE,EAAEA;AAHO,KAAf;AAMAqE,gBAAY,CAACnC,IAAb,CAAkBqG,QAAlB,EAnBS,CAqBT;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;;AACA,QAAIE,WAAW,GAAG,IAAIpF,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB+E,SAAS,CAAClO,KAAV,CAAgBE,KAApC,EAA2CgO,SAAS,CAAClO,KAAV,CAAgBK,MAA3D,CAAlB;AAEA,QAAMmO,MAAM,GAAG,IAAIpF,SAAJ,CAAc;AACzBlE,UAAI,EAAE,QADmB;AAEzBlF,WAAK,EAACuO,WAFmB;AAGzBnC,eAAS,EAAEhD,SAAS,CAACiD,SAAV,CAAoBlD,SAHN;AAIzBpG,YAAM,EAACiL,SAJkB;AAKzBrP,WAAK,EAAC;AACF8P,eAAO,EAAC,CAAC;AAACvH,eAAK,EAAC;AAAP,SAAD;AADN;AALmB,KAAd,CAAf,CAjCS,CA2CT;;AACA,QAAMwH,YAAY,GAAG,IAAIrF,IAAJ,CAAS;AAC1BmD,UAAI,EAAE0B,SAAS,CAAChJ,IADU;AAE1BlF,WAAK,EAAE;AACHC,SAAC,EAACsO,WAAW,CAACtO,CADX;AAEHG,SAAC,EAACmO,WAAW,CAACnO,CAAZ,GAAcyK,gBAAd,GAA+BC,YAF9B;AAGH5K,aAAK,EAAC,EAHH;AAIHG,cAAM,EAACwK;AAJJ,OAFmB;AAQ1B9H,YAAM,EAAEiL,SARkB;AAS1B9I,UAAI,EAAEgJ,SAAS,CAAChJ;AATU,KAAT,CAArB;AAWAwJ,gBAAY,CAAC/P,KAAb,CAAmB8N,QAAnB,GAA8B5B,gBAA9B;AACA6D,gBAAY,CAAC/P,KAAb,CAAmBgQ,UAAnB,GAAgC9D,gBAAhC;AACA6D,gBAAY,CAAC/P,KAAb,CAAmBgO,SAAnB,GAA+B5B,aAA/B,CAzDS,CA2DT;;AACAiD,aAAS,CAACjL,MAAV,GAAmBiH,YAAnB;AACH;AAEJ,CAxED;;AA0EA,IAAMoD,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACE,IAAD,EAAS;AAAC;AAC/B,OAAI,IAAIrI,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACyE,iBAAiB,CAAC3E,MAAhC,EAAuCE,CAAC,EAAxC,EAA2C;AACvC,QAAGyE,iBAAiB,CAACzE,CAAD,CAAjB,CAAqBa,EAArB,KAA4BwH,IAA/B,EAAoC;AAChC,aAAO5D,iBAAiB,CAACzE,CAAD,CAAxB;AACH;AACJ;;AAAA;AACJ,CAND;;AAQA,IAAM2J,YAAY,GAAG,SAAfA,YAAe,CAACC,QAAD,EAAa;AAAC;AAC/B,MAAGA,QAAQ,CAACC,QAAT,CAAkB/J,MAAlB,GAA0B,CAA1B,IAA+B8J,QAAQ,CAACE,UAA3C,EAAsD;AAClD,QAAItQ,aAAa,GAAGoQ,QAAQ,CAACE,UAAT,CAAoBT,OAAxC;;AAEA,SAAI,IAAIrJ,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG4J,QAAQ,CAACC,QAAT,CAAkB/J,MAArC,EAA6CE,CAAC,EAA9C,EAAkD;AAChD,UAAG4J,QAAQ,CAACC,QAAT,CAAkB7J,CAAlB,EAAqBqJ,OAArB,IAAgC7P,aAAnC,EAAiD;AAC/C,YAAIC,cAAc,GAAGsQ,MAAM,CAACH,QAAQ,CAACC,QAAT,CAAkB7J,CAAlB,EAAqBqJ,OAAtB,CAA3B;AAEA,YAAI9O,UAAU,GAAGhB,uEAAW,CAACC,aAAD,EAAgBC,cAAhB,EAAgC,IAAhC,EAAsC,IAAtC,EAA4C,OAA5C,EAAqD,IAArD,EAA2D,KAA3D,EAAkEM,QAAlE,EAA4EC,OAA5E,CAA5B;AACD;AACF;AACF,GAVH,MAUS;AACL;AACAwF,iDAAM,CAAChD,EAAP,CAAUwN,OAAV,CAAkB,kEAAlB;AACD;;AAEDjF,cAAY,CAAC6B,QAAb,GAAwB,KAAxB;AACL,CAjBD;;AAmBA,IAAMD,YAAY,GAAG,SAAfA,YAAe,GAAK;AAAC;AACvB,MAAIkD,QAAQ,GAAG,EAAf;;AAEA,OAAI,IAAI7J,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACiF,UAAU,CAACnF,MAAzB,EAAgCE,CAAC,EAAjC,EAAoC;AAChC,QAAGA,CAAC,GAAEiF,UAAU,CAACnF,MAAX,GAAkB,CAAxB,EAA2B;AACvB,UAAImK,YAAY,GAAGC,UAAU,CAAClK,CAAD,EAAG,CAAH,EAAKiF,UAAU,CAACjF,CAAD,CAAV,CAAcoI,IAAd,CAAmBtI,MAAxB,CAA7B;;AACA,WAAI,IAAI0I,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACyB,YAAY,CAACnK,MAA3B,EAAkC0I,CAAC,EAAnC,EAAsC;AAClC,YAAIsB,UAAU,GAAGG,YAAY,CAACzB,CAAD,CAA7B;;AACA,YAAGA,CAAC,KAAMyB,YAAY,CAACnK,MAAb,GAAoB,CAA9B,EAAiC;AAC7B+J,kBAAQ,GAAGK,UAAU,CAAClK,CAAC,GAAC,CAAH,EAAKiK,YAAY,CAACzB,CAAD,CAAZ,CAAgB2B,KAArB,EAA2BlF,UAAU,CAACjF,CAAC,GAAC,CAAH,CAAV,CAAgBoI,IAAhB,CAAqBtI,MAAhD,CAArB;AACH,SAFD,MAEK;AACD+J,kBAAQ,GAAGK,UAAU,CAAClK,CAAC,GAAC,CAAH,EAAKiK,YAAY,CAACzB,CAAD,CAAZ,CAAgB2B,KAArB,EAA2BF,YAAY,CAACzB,CAAC,GAAC,CAAH,CAAZ,CAAkB2B,KAA7C,CAArB;AACH;;AAED,YAAIP,QAAQ,GAAG;AACXE,oBAAU,EAACA,UADA;AAEXD,kBAAQ,EAACA;AAFE,SAAf;AAKAO,eAAO,CAACC,GAAR,CAAY,kBAAkBT,QAAQ,CAACE,UAAT,CAAoBT,OAAlD;;AACA,aAAI,IAAIiB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACV,QAAQ,CAACC,QAAT,CAAkB/J,MAAhC,EAAuCwK,CAAC,EAAxC,EAA2C;AACvCF,iBAAO,CAACC,GAAR,CAAY,cAAYC,CAAZ,GAAc,IAAd,GAAmBV,QAAQ,CAACC,QAAT,CAAkBS,CAAlB,EAAqBjB,OAApD;AACH;;AAEDM,oBAAY,CAACC,QAAD,CAAZ;AACH;AACJ;AACJ;AACJ,CA5BD;;AA8BA,IAAMM,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAOI,UAAP,EAAkBC,QAAlB,EAA8B;AAAC;AAC9C,MAAIC,QAAQ,GAAG,EAAf;;AAEA,OAAI,IAAIzK,CAAC,GAACuK,UAAV,EAAqBvK,CAAC,GAACwK,QAAvB,EAAgCxK,CAAC,EAAjC,EAAoC;AAChC,QAAG,CAACiF,UAAU,CAACkF,KAAD,CAAV,CAAkB/B,IAAlB,CAAuBpI,CAAvB,EAA0B6I,QAA9B,EAAuC;AACnC,UAAI6B,IAAI,GAAG;AACPP,aAAK,EAACnK,CADC;AAEPqJ,eAAO,EAACsB,eAAe,CAAC1F,UAAU,CAACkF,KAAD,CAAV,CAAkB/B,IAAlB,CAAuBpI,CAAvB,EAA0Ba,EAA3B;AAFhB,OAAX;AAIA4J,cAAQ,CAAC1H,IAAT,CAAc2H,IAAd;AACH;AACJ;;AAED,SAAOD,QAAP;AACH,CAdD;;AAgBA,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAAC9J,EAAD,EAAO;AAAC;AAC5B,OAAI,IAAIb,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACkF,YAAY,CAACpF,MAA3B,EAAkCE,CAAC,EAAnC,EAAsC;AAClC,QAAGkF,YAAY,CAAClF,CAAD,CAAZ,CAAgBa,EAAhB,KAAuBA,EAA1B,EAA6B;AACzB,aAAOqE,YAAY,CAAClF,CAAD,CAAZ,CAAgBqJ,OAAvB;AACH;AACJ;;AAAA;AACJ,CAND;;AAQA,IAAML,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACF,OAAD,EAASnM,eAAT,EAA4B;AAAC;AACzD,MAAI5B,KAAK,GAAG;AACRC,KAAC,EAACuK,WADM;AAERpK,KAAC,EAACqK,WAFM;AAGRvK,SAAK,EAAC0B,eAAe,CAAC5B,KAAhB,CAAsBE,KAHpB;AAIRG,UAAM,EAACuB,eAAe,CAAC5B,KAAhB,CAAsBK;AAJrB,GAAZ;AAMAL,OAAK,CAACC,CAAN,GAAU4P,wBAAwB,CAAC9B,OAAD,EAASnM,eAAT,CAAxB,GAAkD4I,WAA5D;AACAxK,OAAK,CAACI,CAAN,GAAU0P,wBAAwB,CAAC/B,OAAD,EAASnM,eAAT,CAAxB,GAAkD8I,uBAAlD,GAA0EC,6BAApF;AAEA,SAAO3K,KAAP;AACH,CAXD;;AAaA,IAAM6P,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAC9B,OAAD,EAAY;AAAC;AAC1C,MAAIgC,YAAY,GAAG,CAAnB;AACA,MAAIC,QAAQ,GAAG,CAAf;AACA,MAAIC,KAAK,GAAG,CAAZ;;AACA,OAAI,IAAIhL,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC8I,OAAO,CAAC9N,CAAtB,EAAwBgF,CAAC,EAAzB,EAA4B;AACxB,QAAIiL,cAAc,GAAGhG,UAAU,CAACjF,CAAD,CAAV,CAAcoI,IAAd,CAAmB,CAAnB,EAAsBC,IAA3C;AACA,QAAI6C,YAAY,GAAG/C,gBAAgB,CAAC8C,cAAD,CAAnC;AACAH,gBAAY,IAAII,YAAY,CAACnQ,KAAb,CAAmBE,KAAnC,CAHwB,CAGgB;AAC3C;;AAAA;AACD8P,UAAQ,GAAG5F,IAAI,CAACmD,IAAL,GAAUQ,OAAO,CAAC9N,CAA7B;AAEAgQ,OAAK,GAAGF,YAAY,GAAGC,QAAvB;AAEA,SAAOC,KAAP;AACH,CAdD;;AAgBA,IAAMH,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAC/B,OAAD,EAAY;AAAC;AAC1C,MAAIgC,YAAY,GAAG,CAAnB;AACA,MAAIK,UAAU,GAAG,CAAjB;AACA,MAAIC,KAAK,GAAG,CAAZ;AACA,MAAIC,QAAQ,GAAGvC,OAAO,CAAC9N,CAAvB;AACA,MAAIsQ,QAAQ,GAAGxC,OAAO,CAAC3N,CAAvB;AACA,MAAIoQ,MAAM,GAAGtG,UAAU,CAACoG,QAAD,CAAvB;AACA,MAAIG,UAAU,GAAGD,MAAM,CAACnD,IAAxB;AAEA,MAAIiD,QAAQ,GAAGvC,OAAO,CAAC9N,CAAvB;AACA,MAAIsQ,QAAQ,GAAGxC,OAAO,CAAC3N,CAAvB;;AACA,OAAI,IAAI6E,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACsL,QAAd,EAAuBtL,CAAC,EAAxB,EAA2B;AACvB,QAAIuL,MAAM,GAAGtG,UAAU,CAACoG,QAAD,CAAvB;AACA,QAAIG,UAAU,GAAGD,MAAM,CAACnD,IAAxB;AACA,QAAI6C,cAAc,GAAGO,UAAU,CAACxL,CAAD,CAAV,CAAcqI,IAAnC;AACA,QAAI6C,YAAY,GAAG/C,gBAAgB,CAAC8C,cAAD,CAAnC;AACAH,gBAAY,IAAII,YAAY,CAACnQ,KAAb,CAAmBK,MAAnC;AACH;;AAAA;AAED+P,YAAU,GAAGhG,IAAI,CAACsD,MAAL,GAAYK,OAAO,CAAC3N,CAAjC;AAEAiQ,OAAK,GAAGN,YAAY,GAAGK,UAAvB;AAEA,SAAOC,KAAP;AACH,CAxBD;;AA0Be,SAASK,KAAT,CAAehJ,OAAf,EAAwB;AACnC,MAAG+B,YAAY,IAAIC,iBAAiB,CAAC3E,MAAlB,GAAyB,CAA5C,EAA8C;AAAC;AAC3C4L,cAAU;AACb,GAFD,MAEK;AAAC;AACFlM,iDAAM,CAAChD,EAAP,CAAUwN,OAAV,CAAkB,wBAAlB;AACH;AACJ;;AAED,SAAS0B,UAAT,GAAsB;AAAC;AACnB,MAAMC,eAAe,GAAGC,gFAAU,CAAC1I,sDAAD,CAAlC;;AACA,MAAIyI,eAAJ,EAAqB;AACjB,QAAIA,eAAe,CAACE,SAAhB,EAAJ,EAAiC;AAC7B;AACAF,qBAAe,CAACG,KAAhB;AACH;AACJ;;AAED,MAAIC,GAAG,GAAG,IAAIC,6DAAJ,CAAkB;AACxB9I,cAAU,EAAVA,sDADwB;AAExBjI,SAAK,EAAE,IAFiB;AAGxBG,UAAM,EAAE,GAHgB;AAIxB6Q,SAAK,EAAC,mBAJkB;AAKxBC,aAAS,EAAC,IALc;AAMxBC,eAAW,EAAC,IANY;AAOxBC,eAAW,EAAC,IAPY;AAQxBC,YAAQ,EAAC,IARe;AASxBC,eAAW,EAAE;AATW,GAAlB,CAAV;AAWAP,KAAG,CAACQ,EAAJ,CAAO,QAAP,EAAiB,YAAM;AACnBR,OAAG,GAAG,IAAN;AACH,GAFD;AAIA,MAAMS,KAAK,sDAA+C9Q,IAAI,CAAC+Q,MAAL,EAA/C,CAAX;AACAV,KAAG,CAACW,OAAJ,CAAYF,KAAZ,EAzBkB,CA2BlB;;AAEA,MAAMG,QAAQ,GAAG,SAAXA,QAAW,GAAK;AAClBZ,OAAG,CAACa,OAAJ;AACAb,OAAG,CAACD,KAAJ;AACH,GAHD;;AAKA,MAAIe,QAAQ,GAAGd,GAAG,CAACe,WAAnB,CAlCkB,CAoClB;;AACAD,UAAQ,CAACN,EAAT,CAAY,aAAZ,EAA2B,UAAS5E,IAAT,EAAe;AACtCyC,WAAO,CAACC,GAAR,CAAY,sBAAoB1C,IAAhC;;AACA,QAAGA,IAAI,CAAChO,IAAL,KAAc,gBAAjB,EAAkC;AAC9BmL,qBAAe,GAAG6C,IAAI,CAAC7C,eAAL,IAAwB,EAA1C;AACAzL,4DAAQ,CAAC0T,wBAAT,CAAkChT,QAAlC,EAA4C8K,cAA5C,EAA4DC,eAA5D;AACH,KAHD,MAGM,IAAG6C,IAAI,CAAChO,IAAL,KAAc,QAAjB,EAA0B;AAC5BwL,UAAI,GAAGwC,IAAI,CAACxC,IAAZ;AACAA,UAAI,CAACsD,MAAL,GAActD,IAAI,CAACmD,IAAnB;AACArD,gBAAU,GAAG0C,IAAI,CAACqF,KAAlB;AACA5H,cAAQ,GAAGuC,IAAI,CAACvC,QAAL,IAAiB,MAA5B;AACAa,2BAAqB;AACrBzG,mDAAM,CAAChD,EAAP,CAAUwN,OAAV,CAAkB,4BAAlB;AAEAlF,qBAAe,GAAG6C,IAAI,CAAC7C,eAAL,IAAwB,EAA1C;;AAEA,UAAG,CAAC,CAAC6C,IAAI,CAACsF,SAAV,EAAoB;AAChB,YAAIC,mBAAmB,GAAG;AACtBrM,YAAE,EAAE,SAAU,IAAIsM,IAAJ,EAAD,CAAaC,OAAb,EADS;AAEtBnN,cAAI,EAACmF,QAFiB;AAGtB4H,eAAK,EAACrF,IAAI,CAACqF;AAHW,SAA1B;AAMAlI,uBAAe,CAACuI,OAAhB,CAAwBH,mBAAxB;AACA7T,8DAAQ,CAAC0T,wBAAT,CAAkChT,QAAlC,EAA4C8K,cAA5C,EAA4DC,eAA5D;AACH,OAnB2B,CAoB5B;;;AACA6H,cAAQ;AACX;AACJ,GA5BD;AA8BAE,UAAQ,CAACN,EAAT,CAAY,QAAZ,EAAsB,UAASe,CAAT,EAAY;AAC9BX,YAAQ;AACX,GAFD,EAnEkB,CAuElB;;AACAY,sBAAoB,CAACV,QAAD,CAApB;AACH,C,CAGD;;;AACA,IAAMU,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACV,QAAD,EAAc;AACvC,MAAIW,QAAQ,GAAGC,cAAc,CAAChJ,iBAAD,CAA7B;AACAK,iBAAe,GAAGzL,sDAAQ,CAACqU,qBAAT,CAA+B3T,QAA/B,EAAyC8K,cAAzC,KAA4D,EAA9E;AACA,MAAI8I,OAAO,GAAG,EAAd;AACAA,SAAO,CAAC5K,IAAR,CAAayK,QAAb;AACAG,SAAO,CAAC5K,IAAR,CAAa+B,eAAb;AAEA,MAAI8I,qBAAqB,GAAGC,IAAI,CAACC,SAAL,CAAeH,OAAf,CAA5B;AAEAd,UAAQ,CACHkB,iBADL,iDACgEH,qBADhE,QAEKI,IAFL,CAEU,UAAAC,GAAG,EAAI;AACT;AACA7D,WAAO,CAACC,GAAR,CAAY,2CAAZ;AACH,GALL;AAMH,CAfD,C,CAiBA;;;AACA,IAAMoD,cAAc,GAAG,SAAjBA,cAAiB,CAAChJ,iBAAD,EAAuB;AAC1C,MAAIyJ,aAAa,GAAG,EAApB;;AACA,OAAI,IAAIlO,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACyE,iBAAiB,CAAC3E,MAAhC,EAAuCE,CAAC,EAAxC,EAA2C;AACvCkO,iBAAa,CAACnL,IAAd,CAAmB;AACflC,QAAE,EAAE4D,iBAAiB,CAACzE,CAAD,CAAjB,CAAqBa,EADV;AAEfwH,UAAI,EAAE5D,iBAAiB,CAACzE,CAAD,CAAjB,CAAqBa,EAFZ;AAGfsN,aAAO,EAAE1J,iBAAiB,CAACzE,CAAD,CAAjB,CAAqBC,IAHf;AAIf4I,cAAQ,EAAEpE,iBAAiB,CAACzE,CAAD,CAAjB,CAAqB6I,QAArB,IAAiC;AAJ5B,KAAnB;AAMH;;AAAA;AAED,SAAOqF,aAAP;AACH,CAZD,C;;;;;;;;;;;AClhBA,mC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,sC","file":"makeInteractLogic.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/makeInteractLogic.js\");\n","/* globals coscript, sketch */\nvar timeout = require('./timeout')\n\nfunction setImmediate(func, param1, param2, param3, param4, param5, param6, param7, param8, param9, param10) {\n  return timeout.setTimeout(func, 0, param1, param2, param3, param4, param5, param6, param7, param8, param9, param10)\n}\n\nfunction clearImmediate(id) {\n  return timeout.clearTimeout(id)\n}\n\nmodule.exports = {\n  setImmediate: setImmediate,\n  clearImmediate: clearImmediate\n}\n","module.exports = function () {\n  return typeof coscript !== 'undefined' && coscript.createFiber\n}\n","/* globals coscript, sketch */\nvar fiberAvailable = require('./test-if-fiber')\n\nvar setTimeout\nvar clearTimeout\n\nvar fibers = []\n\nif (fiberAvailable()) {\n  var fibers = []\n\n  setTimeout = function (func, delay, param1, param2, param3, param4, param5, param6, param7, param8, param9, param10) {\n    // fibers takes care of keeping coscript around\n    var id = fibers.length\n    fibers.push(coscript.scheduleWithInterval_jsFunction(\n      (delay || 0) / 1000,\n      function () {\n        func(param1, param2, param3, param4, param5, param6, param7, param8, param9, param10)\n      }\n    ))\n    return id\n  }\n\n  clearTimeout = function (id) {\n    var timeout = fibers[id]\n    if (timeout) {\n      timeout.cancel() // fibers takes care of keeping coscript around\n      fibers[id] = undefined // garbage collect the fiber\n    }\n  }\n} else {\n  setTimeout = function (func, delay, param1, param2, param3, param4, param5, param6, param7, param8, param9, param10) {\n    coscript.shouldKeepAround = true\n    var id = fibers.length\n    fibers.push(true)\n    coscript.scheduleWithInterval_jsFunction(\n      (delay || 0) / 1000,\n      function () {\n        if (fibers[id]) { // if not cleared\n          func(param1, param2, param3, param4, param5, param6, param7, param8, param9, param10)\n        }\n        clearTimeout(id)\n        if (fibers.every(function (_id) { return !_id })) { // if everything is cleared\n          coscript.shouldKeepAround = false\n        }\n      }\n    )\n    return id\n  }\n\n  clearTimeout = function (id) {\n    fibers[id] = false\n  }\n}\n\nmodule.exports = {\n  setTimeout: setTimeout,\n  clearTimeout: clearTimeout\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SuperCall = undefined;\nexports.default = ObjCClass;\n\nvar _runtime = require(\"./runtime.js\");\n\nexports.SuperCall = _runtime.SuperCall;\n\n// super when returnType is id and args are void\n// id objc_msgSendSuper(struct objc_super *super, SEL op, void)\n\nconst SuperInit = (0, _runtime.SuperCall)(NSStringFromSelector(\"init\"), [], { type: \"@\" });\n\n// Returns a real ObjC class. No need to use new.\nfunction ObjCClass(defn) {\n  const superclass = defn.superclass || NSObject;\n  const className = (defn.className || defn.classname || \"ObjCClass\") + NSUUID.UUID().UUIDString();\n  const reserved = new Set(['className', 'classname', 'superclass']);\n  var cls = MOClassDescription.allocateDescriptionForClassWithName_superclass_(className, superclass);\n  // Add each handler to the class description\n  const ivars = [];\n  for (var key in defn) {\n    const v = defn[key];\n    if (typeof v == 'function' && key !== 'init') {\n      var selector = NSSelectorFromString(key);\n      cls.addInstanceMethodWithSelector_function_(selector, v);\n    } else if (!reserved.has(key)) {\n      ivars.push(key);\n      cls.addInstanceVariableWithName_typeEncoding(key, \"@\");\n    }\n  }\n\n  cls.addInstanceMethodWithSelector_function_(NSSelectorFromString('init'), function () {\n    const self = SuperInit.call(this);\n    ivars.map(name => {\n      Object.defineProperty(self, name, {\n        get() {\n          return getIvar(self, name);\n        },\n        set(v) {\n          (0, _runtime.object_setInstanceVariable)(self, name, v);\n        }\n      });\n      self[name] = defn[name];\n    });\n    // If there is a passsed-in init funciton, call it now.\n    if (typeof defn.init == 'function') defn.init.call(this);\n    return self;\n  });\n\n  return cls.registerClass();\n};\n\nfunction getIvar(obj, name) {\n  const retPtr = MOPointer.new();\n  (0, _runtime.object_getInstanceVariable)(obj, name, retPtr);\n  return retPtr.value().retain().autorelease();\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SuperCall = SuperCall;\nexports.CFunc = CFunc;\nconst objc_super_typeEncoding = '{objc_super=\"receiver\"@\"super_class\"#}';\n\n// You can store this to call your function. this must be bound to the current instance.\nfunction SuperCall(selector, argTypes, returnType) {\n  const func = CFunc(\"objc_msgSendSuper\", [{ type: '^' + objc_super_typeEncoding }, { type: \":\" }, ...argTypes], returnType);\n  return function (...args) {\n    const struct = make_objc_super(this, this.superclass());\n    const structPtr = MOPointer.alloc().initWithValue_(struct);\n    return func(structPtr, selector, ...args);\n  };\n}\n\n// Recursively create a MOStruct\nfunction makeStruct(def) {\n  if (typeof def !== 'object' || Object.keys(def).length == 0) {\n    return def;\n  }\n  const name = Object.keys(def)[0];\n  const values = def[name];\n\n  const structure = MOStruct.structureWithName_memberNames_runtime(name, Object.keys(values), Mocha.sharedRuntime());\n\n  Object.keys(values).map(member => {\n    structure[member] = makeStruct(values[member]);\n  });\n\n  return structure;\n}\n\nfunction make_objc_super(self, cls) {\n  return makeStruct({\n    objc_super: {\n      receiver: self,\n      super_class: cls\n    }\n  });\n}\n\n// Due to particularities of the JS bridge, we can't call into MOBridgeSupport objects directly\n// But, we can ask key value coding to do the dirty work for us ;)\nfunction setKeys(o, d) {\n  const funcDict = NSMutableDictionary.dictionary();\n  funcDict.o = o;\n  Object.keys(d).map(k => funcDict.setValue_forKeyPath(d[k], \"o.\" + k));\n}\n\n// Use any C function, not just ones with BridgeSupport\nfunction CFunc(name, args, retVal) {\n  function makeArgument(a) {\n    if (!a) return null;\n    const arg = MOBridgeSupportArgument.alloc().init();\n    setKeys(arg, {\n      type64: a.type\n    });\n    return arg;\n  }\n  const func = MOBridgeSupportFunction.alloc().init();\n  setKeys(func, {\n    name: name,\n    arguments: args.map(makeArgument),\n    returnValue: makeArgument(retVal)\n  });\n  return func;\n}\n\n/*\n@encode(char*) = \"*\"\n@encode(id) = \"@\"\n@encode(Class) = \"#\"\n@encode(void*) = \"^v\"\n@encode(CGRect) = \"{CGRect={CGPoint=dd}{CGSize=dd}}\"\n@encode(SEL) = \":\"\n*/\n\nfunction addStructToBridgeSupport(key, structDef) {\n  // OK, so this is probably the nastiest hack in this file.\n  // We go modify MOBridgeSupportController behind its back and use kvc to add our own definition\n  // There isn't another API for this though. So the only other way would be to make a real bridgesupport file.\n  const symbols = MOBridgeSupportController.sharedController().valueForKey('symbols');\n  if (!symbols) throw Error(\"Something has changed within bridge support so we can't add our definitions\");\n  // If someone already added this definition, don't re-register it.\n  if (symbols[key] !== null) return;\n  const def = MOBridgeSupportStruct.alloc().init();\n  setKeys(def, {\n    name: key,\n    type: structDef.type\n  });\n  symbols[key] = def;\n};\n\n// This assumes the ivar is an object type. Return value is pretty useless.\nconst object_getInstanceVariable = exports.object_getInstanceVariable = CFunc(\"object_getInstanceVariable\", [{ type: \"@\" }, { type: '*' }, { type: \"^@\" }], { type: \"^{objc_ivar=}\" });\n// Again, ivar is of object type\nconst object_setInstanceVariable = exports.object_setInstanceVariable = CFunc(\"object_setInstanceVariable\", [{ type: \"@\" }, { type: '*' }, { type: \"@\" }], { type: \"^{objc_ivar=}\" });\n\n// We need Mocha to understand what an objc_super is so we can use it as a function argument\naddStructToBridgeSupport('objc_super', { type: objc_super_typeEncoding });","'use strict';\n\n/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = finallyConstructor;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nmodule.exports = Promise;\n","var COLOR_CLASSES = [\n  'NSColor',\n  'NSCachedWhiteColor',\n  'NSColorSpaceColor',\n  'NSDynamicSystemColor',\n  'NSCachedColorSpaceColor',\n]\nfunction parseHexColor(color) {\n  // Check the string for incorrect formatting.\n  if (!color || color[0] !== '#') {\n    if (\n      color &&\n      color.class &&\n      COLOR_CLASSES.indexOf(String(color.class())) !== -1\n    ) {\n      return color\n    }\n    throw new Error(\n      'Incorrect color formating. It should be an hex color: #RRGGBBAA'\n    )\n  }\n\n  // append FF if alpha channel is not specified.\n  var source = color.substr(1)\n  if (source.length === 3) {\n    source += 'F'\n  } else if (source.length === 6) {\n    source += 'FF'\n  }\n  // Convert the string from #FFF format to #FFFFFF format.\n  var hex\n  if (source.length === 4) {\n    for (var i = 0; i < 4; i += 1) {\n      hex += source[i]\n      hex += source[i]\n    }\n  } else if (source.length === 8) {\n    hex = source\n  } else {\n    return NSColor.whiteColor()\n  }\n\n  var r = parseInt(hex.slice(0, 2), 16)\n  var g = parseInt(hex.slice(2, 4), 16)\n  var b = parseInt(hex.slice(4, 6), 16)\n  var a = parseInt(hex.slice(6, 8), 16)\n\n  return NSColor.colorWithSRGBRed_green_blue_alpha(r, g, b, a)\n}\n\nmodule.exports = function(browserWindow, panel, webview) {\n  // keep reference to the subviews\n  browserWindow._panel = panel\n  browserWindow._webview = webview\n  browserWindow._destroyed = false\n\n  browserWindow.destroy = function() {\n    return panel.close()\n  }\n\n  browserWindow.close = function() {\n    if (panel.delegate().utils.parentWindow) {\n      var shouldClose = true\n      browserWindow.emit('close', {\n        get defaultPrevented() {\n          return !shouldClose\n        },\n        preventDefault: function() {\n          shouldClose = false\n        },\n      })\n      if (shouldClose) {\n        panel.delegate().utils.parentWindow.endSheet(panel)\n      }\n      return\n    }\n\n    if (!browserWindow.isClosable()) {\n      return\n    }\n\n    panel.performClose(null)\n  }\n\n  function focus(focused) {\n    if (browserWindow.isVisible()) {\n      return\n    }\n    if (focused) {\n      NSApplication.sharedApplication().activateIgnoringOtherApps(true)\n      panel.makeKeyAndOrderFront(null)\n    } else {\n      panel.orderBack(null)\n    }\n  }\n\n  browserWindow.focus = focus.bind(this, true)\n  browserWindow.blur = focus.bind(this, false)\n\n  browserWindow.isFocused = function() {\n    return panel.isKeyWindow()\n  }\n\n  browserWindow.isDestroyed = function() {\n    return browserWindow._destroyed\n  }\n\n  browserWindow.show = function() {\n    // This method is supposed to put focus on window, however if the app does not\n    // have focus then \"makeKeyAndOrderFront\" will only show the window.\n    NSApp.activateIgnoringOtherApps(true)\n\n    if (panel.delegate().utils.parentWindow) {\n      return panel.delegate().utils.parentWindow.beginSheet_completionHandler(\n        panel,\n        __mocha__.createBlock_function('v16@?0q8', function() {\n          browserWindow.emit('closed')\n        })\n      )\n    }\n\n    return panel.makeKeyAndOrderFront(null)\n  }\n\n  browserWindow.showInactive = function() {\n    return panel.orderFrontRegardless()\n  }\n\n  browserWindow.hide = function() {\n    return panel.orderOut(null)\n  }\n\n  browserWindow.isVisible = function() {\n    return panel.isVisible()\n  }\n\n  browserWindow.isModal = function() {\n    return false\n  }\n\n  browserWindow.maximize = function() {\n    if (!browserWindow.isMaximized()) {\n      panel.zoom(null)\n    }\n  }\n  browserWindow.unmaximize = function() {\n    if (browserWindow.isMaximized()) {\n      panel.zoom(null)\n    }\n  }\n\n  browserWindow.isMaximized = function() {\n    if ((panel.styleMask() & NSResizableWindowMask) !== 0) {\n      return panel.isZoomed()\n    }\n    var rectScreen = NSScreen.mainScreen().visibleFrame()\n    var rectWindow = panel.frame()\n    return (\n      rectScreen.origin.x == rectWindow.origin.x &&\n      rectScreen.origin.y == rectWindow.origin.y &&\n      rectScreen.size.width == rectWindow.size.width &&\n      rectScreen.size.height == rectWindow.size.height\n    )\n  }\n\n  browserWindow.minimize = function() {\n    return panel.miniaturize(null)\n  }\n\n  browserWindow.restore = function() {\n    return panel.deminiaturize(null)\n  }\n\n  browserWindow.isMinimized = function() {\n    return panel.isMiniaturized()\n  }\n\n  browserWindow.setFullScreen = function(fullscreen) {\n    if (fullscreen !== browserWindow.isFullscreen()) {\n      panel.toggleFullScreen(null)\n    }\n  }\n\n  browserWindow.isFullscreen = function() {\n    return panel.styleMask() & NSFullScreenWindowMask\n  }\n\n  browserWindow.setAspectRatio = function(aspectRatio /* , extraSize */) {\n    // Reset the behaviour to default if aspect_ratio is set to 0 or less.\n    if (aspectRatio > 0.0) {\n      panel.setAspectRatio(NSMakeSize(aspectRatio, 1.0))\n    } else {\n      panel.setResizeIncrements(NSMakeSize(1.0, 1.0))\n    }\n  }\n\n  browserWindow.setBounds = function(bounds, animate) {\n    // Do nothing if in fullscreen mode.\n    if (browserWindow.isFullscreen()) {\n      return\n    }\n\n    // TODO: Check size constraints since setFrame does not check it.\n    var size = bounds.size\n    // size.SetToMax(GetMinimumSize());\n    // gfx::Size max_size = GetMaximumSize();\n    // if (!max_size.IsEmpty())\n    //   size.SetToMin(max_size);\n\n    var cocoaBounds = NSMakeRect(bounds.origin.x, 0, size.width, size.height)\n    // Flip coordinates based on the primary screen.\n    var screen = NSScreen.screens().firstObject()\n    cocoaBounds.origin.y =\n      NSHeight(screen.frame()) - size.height - bounds.origin.y\n\n    panel.setFrame_display_animate(cocoaBounds, true, animate)\n  }\n\n  browserWindow.getBounds = function() {\n    return panel.frame()\n  }\n\n  browserWindow.setContentBounds = function(/* bounds, animate */) {\n    // TODO:\n  }\n\n  browserWindow.getContentBounds = function() {\n    // TODO:\n  }\n\n  browserWindow.setSize = function(width, height, animate) {\n    var bounds = browserWindow.getBounds()\n    bounds.size.height = height\n    bounds.size.width = width\n\n    // TODO: handle resizing around center\n\n    return browserWindow.setBounds(bounds, animate)\n  }\n\n  browserWindow.getSize = function() {\n    var bounds = browserWindow.getBounds()\n    return [bounds.size.width, bounds.size.height]\n  }\n\n  browserWindow.setContentSize = function(width, height, animate) {\n    var bounds = browserWindow.getContentBounds()\n    bounds.size.height = height\n    bounds.size.width = width\n\n    // TODO: handle resizing around center\n\n    return browserWindow.setContentBounds(bounds, animate)\n  }\n\n  browserWindow.getContentSize = function() {\n    var bounds = browserWindow.getContentBounds()\n    return [bounds.size.width, bounds.size.height]\n  }\n\n  browserWindow.setMinimumSize = function(width, height) {\n    const minSize = { width: width, height: height }\n    panel.setContentMinSize(minSize)\n  }\n\n  browserWindow.getMinimumSize = function() {\n    const size = panel.contentMinSize()\n    return [size.width, size.height]\n  }\n\n  browserWindow.setMaximumSize = function(width, height) {\n    const minSize = { width: width, height: height }\n    panel.setContentMaxSize(minSize)\n  }\n\n  browserWindow.getMaximumSize = function() {\n    const size = panel.contentMaxSize()\n    return [size.width, size.height]\n  }\n\n  browserWindow.setResizable = function(resizable) {\n    return browserWindow._setStyleMask(resizable, NSResizableWindowMask)\n  }\n\n  browserWindow.isResizable = function() {\n    return panel.styleMask() & NSResizableWindowMask\n  }\n\n  browserWindow.setMovable = function(movable) {\n    return panel.setMovable(movable)\n  }\n  browserWindow.isMovable = function() {\n    return panel.isMovable()\n  }\n\n  browserWindow.setMinimizable = function(minimizable) {\n    return browserWindow._setStyleMask(minimizable, NSMiniaturizableWindowMask)\n  }\n\n  browserWindow.isMinimizable = function() {\n    return panel.styleMask() & NSMiniaturizableWindowMask\n  }\n\n  browserWindow.setMaximizable = function(maximizable) {\n    if (panel.standardWindowButton(NSWindowZoomButton)) {\n      panel.standardWindowButton(NSWindowZoomButton).setEnabled(maximizable)\n    }\n  }\n\n  browserWindow.isMaximizable = function() {\n    return (\n      panel.standardWindowButton(NSWindowZoomButton) &&\n      panel.standardWindowButton(NSWindowZoomButton).isEnabled()\n    )\n  }\n\n  browserWindow.setFullScreenable = function(fullscreenable) {\n    browserWindow._setCollectionBehavior(\n      fullscreenable,\n      NSWindowCollectionBehaviorFullScreenPrimary\n    )\n    // On EL Capitan this flag is required to hide fullscreen button.\n    browserWindow._setCollectionBehavior(\n      !fullscreenable,\n      NSWindowCollectionBehaviorFullScreenAuxiliary\n    )\n  }\n\n  browserWindow.isFullScreenable = function() {\n    var collectionBehavior = panel.collectionBehavior()\n    return collectionBehavior & NSWindowCollectionBehaviorFullScreenPrimary\n  }\n\n  browserWindow.setClosable = function(closable) {\n    browserWindow._setStyleMask(closable, NSClosableWindowMask)\n  }\n\n  browserWindow.isClosable = function() {\n    return panel.styleMask() & NSClosableWindowMask\n  }\n\n  browserWindow.setAlwaysOnTop = function(top, level, relativeLevel) {\n    var windowLevel = NSNormalWindowLevel\n    var maxWindowLevel = CGWindowLevelForKey(kCGMaximumWindowLevelKey)\n    var minWindowLevel = CGWindowLevelForKey(kCGMinimumWindowLevelKey)\n\n    if (top) {\n      if (level === 'normal') {\n        windowLevel = NSNormalWindowLevel\n      } else if (level === 'torn-off-menu') {\n        windowLevel = NSTornOffMenuWindowLevel\n      } else if (level === 'modal-panel') {\n        windowLevel = NSModalPanelWindowLevel\n      } else if (level === 'main-menu') {\n        windowLevel = NSMainMenuWindowLevel\n      } else if (level === 'status') {\n        windowLevel = NSStatusWindowLevel\n      } else if (level === 'pop-up-menu') {\n        windowLevel = NSPopUpMenuWindowLevel\n      } else if (level === 'screen-saver') {\n        windowLevel = NSScreenSaverWindowLevel\n      } else if (level === 'dock') {\n        // Deprecated by macOS, but kept for backwards compatibility\n        windowLevel = NSDockWindowLevel\n      } else {\n        windowLevel = NSFloatingWindowLevel\n      }\n    }\n\n    var newLevel = windowLevel + (relativeLevel || 0)\n    if (newLevel >= minWindowLevel && newLevel <= maxWindowLevel) {\n      panel.setLevel(newLevel)\n    } else {\n      throw new Error(\n        'relativeLevel must be between ' +\n          minWindowLevel +\n          ' and ' +\n          maxWindowLevel\n      )\n    }\n  }\n\n  browserWindow.isAlwaysOnTop = function() {\n    return panel.level() !== NSNormalWindowLevel\n  }\n\n  browserWindow.moveTop = function() {\n    return panel.orderFrontRegardless()\n  }\n\n  browserWindow.center = function() {\n    panel.center()\n  }\n\n  browserWindow.setPosition = function(x, y, animate) {\n    var bounds = browserWindow.getBounds()\n    var mainScreenRect = NSScreen.screens()\n      .firstObject()\n      .frame()\n    bounds.origin.x = x\n    bounds.origin.y = Math.round(NSHeight(mainScreenRect) - y)\n\n    return browserWindow.setBounds(bounds, animate)\n  }\n\n  browserWindow.getPosition = function() {\n    var bounds = browserWindow.getBounds()\n    var mainScreenRect = NSScreen.screens()\n      .firstObject()\n      .frame()\n    return [\n      bounds.origin.x,\n      Math.round(NSHeight(mainScreenRect) - bounds.origin.y),\n    ]\n  }\n\n  browserWindow.setTitle = function(title) {\n    panel.setTitle(title)\n  }\n\n  browserWindow.getTitle = function() {\n    return String(panel.title())\n  }\n\n  var attentionRequestId = 0\n  browserWindow.flashFrame = function(flash) {\n    if (flash) {\n      attentionRequestId = NSApp.requestUserAttention(NSInformationalRequest)\n    } else {\n      NSApp.cancelUserAttentionRequest(attentionRequestId)\n      attentionRequestId = 0\n    }\n  }\n\n  browserWindow.getNativeWindowHandle = function() {\n    return panel\n  }\n\n  browserWindow.getNativeWebViewHandle = function() {\n    return webview\n  }\n\n  browserWindow.loadURL = function(url) {\n    // When frameLocation is a file, prefix it with the Sketch Resources path\n    if (/^(?!https?|file).*\\.html?$/.test(url)) {\n      if (typeof __command !== 'undefined' && __command.pluginBundle()) {\n        url =\n          'file://' +\n          __command\n            .pluginBundle()\n            .urlForResourceNamed(url)\n            .path()\n      }\n    }\n\n    if (/^file:\\/\\/.*\\.html?$/.test(url)) {\n      webview.loadFileURL_allowingReadAccessToURL(\n        NSURL.fileURLWithPath(url),\n        NSURL.fileURLWithPath('file:///')\n      )\n      return\n    }\n\n    const properURL = NSURL.URLWithString(url)\n    const urlRequest = NSURLRequest.requestWithURL(properURL)\n\n    webview.loadRequest(urlRequest)\n  }\n\n  browserWindow.reload = function() {\n    webview.reload()\n  }\n\n  browserWindow.setHasShadow = function(hasShadow) {\n    return panel.setHasShadow(hasShadow)\n  }\n\n  browserWindow.hasShadow = function() {\n    return panel.hasShadow()\n  }\n\n  browserWindow.setOpacity = function(opacity) {\n    return panel.setAlphaValue(opacity)\n  }\n\n  browserWindow.getOpacity = function() {\n    return panel.alphaValue()\n  }\n\n  browserWindow.setVisibleOnAllWorkspaces = function(visible) {\n    return browserWindow._setCollectionBehavior(\n      visible,\n      NSWindowCollectionBehaviorCanJoinAllSpaces\n    )\n  }\n\n  browserWindow.isVisibleOnAllWorkspaces = function() {\n    var collectionBehavior = panel.collectionBehavior()\n    return collectionBehavior & NSWindowCollectionBehaviorCanJoinAllSpaces\n  }\n\n  browserWindow.setIgnoreMouseEvents = function(ignore) {\n    return panel.setIgnoresMouseEvents(ignore)\n  }\n\n  browserWindow.setContentProtection = function(enable) {\n    panel.setSharingType(enable ? NSWindowSharingNone : NSWindowSharingReadOnly)\n  }\n\n  browserWindow.setAutoHideCursor = function(autoHide) {\n    panel.setDisableAutoHideCursor(autoHide)\n  }\n\n  browserWindow.setVibrancy = function(type) {\n    var effectView = browserWindow._vibrantView\n\n    if (!type) {\n      if (effectView == null) {\n        return\n      }\n\n      effectView.removeFromSuperview()\n      panel.setVibrantView(null)\n      return\n    }\n\n    if (effectView == null) {\n      var contentView = panel.contentView()\n      effectView = NSVisualEffectView.alloc().initWithFrame(\n        contentView.bounds()\n      )\n      browserWindow._vibrantView = effectView\n\n      effectView.setAutoresizingMask(NSViewWidthSizable | NSViewHeightSizable)\n      effectView.setBlendingMode(NSVisualEffectBlendingModeBehindWindow)\n      effectView.setState(NSVisualEffectStateActive)\n      effectView.setFrame(contentView.bounds())\n      contentView.addSubview_positioned_relativeTo(\n        effectView,\n        NSWindowBelow,\n        null\n      )\n    }\n\n    var vibrancyType = NSVisualEffectMaterialLight\n\n    if (type === 'appearance-based') {\n      vibrancyType = NSVisualEffectMaterialAppearanceBased\n    } else if (type === 'light') {\n      vibrancyType = NSVisualEffectMaterialLight\n    } else if (type === 'dark') {\n      vibrancyType = NSVisualEffectMaterialDark\n    } else if (type === 'titlebar') {\n      vibrancyType = NSVisualEffectMaterialTitlebar\n    } else if (type === 'selection') {\n      vibrancyType = NSVisualEffectMaterialSelection\n    } else if (type === 'menu') {\n      vibrancyType = NSVisualEffectMaterialMenu\n    } else if (type === 'popover') {\n      vibrancyType = NSVisualEffectMaterialPopover\n    } else if (type === 'sidebar') {\n      vibrancyType = NSVisualEffectMaterialSidebar\n    } else if (type === 'medium-light') {\n      vibrancyType = NSVisualEffectMaterialMediumLight\n    } else if (type === 'ultra-dark') {\n      vibrancyType = NSVisualEffectMaterialUltraDark\n    }\n\n    effectView.setMaterial(vibrancyType)\n  }\n\n  browserWindow._setBackgroundColor = function(colorName) {\n    var color = parseHexColor(colorName)\n    webview.isOpaque = false\n    webview.setBackgroundColor(NSColor.clearColor())\n    panel.backgroundColor = color\n  }\n\n  browserWindow._invalidate = function() {\n    panel.flushWindow()\n    panel.contentView().setNeedsDisplay(true)\n  }\n\n  browserWindow._setStyleMask = function(on, flag) {\n    var wasMaximizable = browserWindow.isMaximizable()\n    if (on) {\n      panel.setStyleMask(panel.styleMask() | flag)\n    } else {\n      panel.setStyleMask(panel.styleMask() & ~flag)\n    }\n    // Change style mask will make the zoom button revert to default, probably\n    // a bug of Cocoa or macOS.\n    browserWindow.setMaximizable(wasMaximizable)\n  }\n\n  browserWindow._setCollectionBehavior = function(on, flag) {\n    var wasMaximizable = browserWindow.isMaximizable()\n    if (on) {\n      panel.setCollectionBehavior(panel.collectionBehavior() | flag)\n    } else {\n      panel.setCollectionBehavior(panel.collectionBehavior() & ~flag)\n    }\n    // Change collectionBehavior will make the zoom button revert to default,\n    // probably a bug of Cocoa or macOS.\n    browserWindow.setMaximizable(wasMaximizable)\n  }\n\n  browserWindow._showWindowButton = function(button) {\n    var view = panel.standardWindowButton(button)\n    view.superview().addSubview_positioned_relative(view, NSWindowAbove, null)\n  }\n}\n","module.exports = {\n  JS_BRIDGE: '__skpm_sketchBridge',\n}\n","var tagsToFocus =\n  '[\"text\", \"textarea\", \"date\", \"datetime-local\", \"email\", \"number\", \"month\", \"password\", \"search\", \"tel\", \"time\", \"url\", \"week\" ]'\n\nmodule.exports = function(webView, event) {\n  var point = webView.convertPoint_fromView(event.locationInWindow(), null)\n  var x = point.x\n  var y = webView.frame().size.height - point.y // the coord start from the bottom instead of the top\n  return (\n    'var el = document.elementFromPoint(' + // get the DOM element that match the event\n    x +\n    ', ' +\n    y +\n    '); ' +\n    'if (el && ' + // some tags need to be focused instead of clicked\n    tagsToFocus +\n    '.indexOf(el.type) >= 0 && ' +\n    'el.focus' +\n    ') {' +\n    'el.focus();' + // so focus them\n    '} else if (el) {' +\n    'el.dispatchEvent(new Event(\"click\", {bubbles: true}))' + // click the others\n    '}'\n  )\n}\n","function addEdgeConstraint(edge, subview, view, constant) {\n  view.addConstraint(\n    NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(\n      subview,\n      edge,\n      NSLayoutRelationEqual,\n      view,\n      edge,\n      1,\n      constant\n    )\n  )\n}\nmodule.exports = function fitSubviewToView(subview, view, constants) {\n  constants = constants || []\n  subview.setTranslatesAutoresizingMaskIntoConstraints(false)\n\n  addEdgeConstraint(NSLayoutAttributeLeft, subview, view, constants[0] || 0)\n  addEdgeConstraint(NSLayoutAttributeTop, subview, view, constants[1] || 0)\n  addEdgeConstraint(NSLayoutAttributeRight, subview, view, constants[2] || 0)\n  addEdgeConstraint(NSLayoutAttributeBottom, subview, view, constants[3] || 0)\n}\n","/* let's try to match the API from Electron's Browser window\n(https://github.com/electron/electron/blob/master/docs/api/browser-window.md) */\nvar EventEmitter = require('events')\nvar buildBrowserAPI = require('./browser-api')\nvar buildWebAPI = require('./webview-api')\nvar fitSubviewToView = require('./fitSubview')\nvar dispatchFirstClick = require('./dispatch-first-click')\nvar injectClientMessaging = require('./inject-client-messaging')\nvar setDelegates = require('./set-delegates')\n\nfunction BrowserWindow(options) {\n  options = options || {}\n\n  var identifier = options.identifier || NSUUID.UUID().UUIDString()\n  var threadDictionary = NSThread.mainThread().threadDictionary()\n\n  var existingBrowserWindow = BrowserWindow.fromId(identifier)\n\n  // if we already have a window opened, reuse it\n  if (existingBrowserWindow) {\n    return existingBrowserWindow\n  }\n\n  var browserWindow = new EventEmitter()\n  browserWindow.id = identifier\n\n  if (options.modal && !options.parent) {\n    throw new Error('A modal needs to have a parent.')\n  }\n\n  // Long-running script\n  var fiber = coscript.createFiber()\n\n  // Window size\n  var width = options.width || 800\n  var height = options.height || 600\n  var mainScreenRect = NSScreen.screens()\n    .firstObject()\n    .frame()\n  var cocoaBounds = NSMakeRect(\n    typeof options.x !== 'undefined'\n      ? options.x\n      : Math.round((NSWidth(mainScreenRect) - width) / 2),\n    typeof options.y !== 'undefined'\n      ? options.y\n      : Math.round((NSHeight(mainScreenRect) - height) / 2),\n    width,\n    height\n  )\n\n  if (options.titleBarStyle && options.titleBarStyle !== 'default') {\n    options.frame = false\n  }\n\n  var useStandardWindow = options.windowType !== 'textured'\n  var styleMask = NSTitledWindowMask\n\n  // this is commented out because the toolbar doesn't appear otherwise :thinking-face:\n  // if (!useStandardWindow || options.frame === false) {\n  //   styleMask = NSFullSizeContentViewWindowMask\n  // }\n  if (options.minimizable !== false) {\n    styleMask |= NSMiniaturizableWindowMask\n  }\n  if (options.closable !== false) {\n    styleMask |= NSClosableWindowMask\n  }\n  if (options.resizable !== false) {\n    styleMask |= NSResizableWindowMask\n  }\n  if (!useStandardWindow || options.transparent || options.frame === false) {\n    styleMask |= NSTexturedBackgroundWindowMask\n  }\n\n  var panel = NSPanel.alloc().initWithContentRect_styleMask_backing_defer(\n    cocoaBounds,\n    styleMask,\n    NSBackingStoreBuffered,\n    true\n  )\n\n  var wkwebviewConfig = WKWebViewConfiguration.alloc().init()\n  var webView = WKWebView.alloc().initWithFrame_configuration(\n    CGRectMake(0, 0, options.width || 800, options.height || 600),\n    wkwebviewConfig\n  )\n  injectClientMessaging(webView)\n  webView.setAutoresizingMask(NSViewWidthSizable | NSViewHeightSizable)\n\n  buildBrowserAPI(browserWindow, panel, webView)\n  buildWebAPI(browserWindow, panel, webView)\n  setDelegates(browserWindow, panel, webView, options)\n\n  if (options.windowType === 'desktop') {\n    panel.setLevel(kCGDesktopWindowLevel - 1)\n    // panel.setCanBecomeKeyWindow(false)\n    panel.setCollectionBehavior(\n      NSWindowCollectionBehaviorCanJoinAllSpaces |\n        NSWindowCollectionBehaviorStationary |\n        NSWindowCollectionBehaviorIgnoresCycle\n    )\n  }\n\n  if (\n    typeof options.minWidth !== 'undefined' ||\n    typeof options.minHeight !== 'undefined'\n  ) {\n    browserWindow.setMinimumSize(options.minWidth || 0, options.minHeight || 0)\n  }\n\n  if (\n    typeof options.maxWidth !== 'undefined' ||\n    typeof options.maxHeight !== 'undefined'\n  ) {\n    browserWindow.setMaximumSize(\n      options.maxWidth || 10000,\n      options.maxHeight || 10000\n    )\n  }\n\n  // if (options.focusable === false) {\n  //   panel.setCanBecomeKeyWindow(false)\n  // }\n\n  if (options.transparent || options.frame === false) {\n    panel.titlebarAppearsTransparent = true\n    panel.titleVisibility = NSWindowTitleHidden\n    panel.setOpaque(0)\n    panel.isMovableByWindowBackground = true\n    var toolbar2 = NSToolbar.alloc().initWithIdentifier(\n      'titlebarStylingToolbar'\n    )\n    toolbar2.setShowsBaselineSeparator(false)\n    panel.setToolbar(toolbar2)\n  }\n\n  if (options.titleBarStyle === 'hiddenInset') {\n    var toolbar = NSToolbar.alloc().initWithIdentifier('titlebarStylingToolbar')\n    toolbar.setShowsBaselineSeparator(false)\n    panel.setToolbar(toolbar)\n  }\n\n  if (options.frame === false || !options.useContentSize) {\n    browserWindow.setSize(width, height)\n  }\n\n  if (options.center) {\n    browserWindow.center()\n  }\n\n  if (options.alwaysOnTop) {\n    browserWindow.setAlwaysOnTop(true)\n  }\n\n  if (options.fullscreen) {\n    browserWindow.setFullScreen(true)\n  }\n  browserWindow.setFullScreenable(!!options.fullscreenable)\n\n  const title =\n    options.title ||\n    (typeof __command !== 'undefined' && __command.pluginBundle()\n      ? __command.pluginBundle().name()\n      : undefined)\n  if (title) {\n    browserWindow.setTitle(title)\n  }\n\n  var backgroundColor = options.backgroundColor\n  if (options.transparent) {\n    backgroundColor = NSColor.clearColor()\n  }\n  if (!backgroundColor && options.frame === false && options.vibrancy) {\n    backgroundColor = NSColor.clearColor()\n  }\n\n  browserWindow._setBackgroundColor(\n    backgroundColor || NSColor.windowBackgroundColor()\n  )\n\n  if (options.hasShadow === false) {\n    browserWindow.setHasShadow(false)\n  }\n\n  if (typeof options.opacity !== 'undefined') {\n    browserWindow.setOpacity(options.opacity)\n  }\n\n  options.webPreferences = options.webPreferences || {}\n\n  webView\n    .configuration()\n    .preferences()\n    .setValue_forKey(\n      options.webPreferences.devTools !== false,\n      'developerExtrasEnabled'\n    )\n  webView\n    .configuration()\n    .preferences()\n    .setValue_forKey(\n      options.webPreferences.devTools !== false,\n      'javaScriptEnabled'\n    )\n  webView\n    .configuration()\n    .preferences()\n    .setValue_forKey(!!options.webPreferences.plugins, 'plugInsEnabled')\n  webView\n    .configuration()\n    .preferences()\n    .setValue_forKey(\n      options.webPreferences.minimumFontSize || 0,\n      'minimumFontSize'\n    )\n\n  if (options.webPreferences.zoomFactor) {\n    webView.setMagnification(options.webPreferences.zoomFactor)\n  }\n\n  var contentView = panel.contentView()\n\n  if (options.frame !== false) {\n    webView.setFrame(contentView.bounds())\n    contentView.addSubview(webView)\n  } else {\n    // In OSX 10.10, adding subviews to the root view for the NSView hierarchy\n    // produces warnings. To eliminate the warnings, we resize the contentView\n    // to fill the window, and add subviews to that.\n    // http://crbug.com/380412\n    contentView.setAutoresizingMask(NSViewWidthSizable | NSViewHeightSizable)\n    fitSubviewToView(contentView, contentView.superview())\n\n    webView.setFrame(contentView.bounds())\n    contentView.addSubview(webView)\n\n    // The fullscreen button should always be hidden for frameless window.\n    if (panel.standardWindowButton(NSWindowFullScreenButton)) {\n      panel.standardWindowButton(NSWindowFullScreenButton).setHidden(true)\n    }\n\n    if (!options.titleBarStyle || options.titleBarStyle === 'default') {\n      // Hide the window buttons.\n      panel.standardWindowButton(NSWindowZoomButton).setHidden(true)\n      panel.standardWindowButton(NSWindowMiniaturizeButton).setHidden(true)\n      panel.standardWindowButton(NSWindowCloseButton).setHidden(true)\n\n      // Some third-party macOS utilities check the zoom button's enabled state to\n      // determine whether to show custom UI on hover, so we disable it here to\n      // prevent them from doing so in a frameless app window.\n      panel.standardWindowButton(NSWindowZoomButton).setEnabled(false)\n    }\n  }\n\n  if (options.vibrancy) {\n    browserWindow.setVibrancy(options.vibrancy)\n  }\n\n  // Set maximizable state last to ensure zoom button does not get reset\n  // by calls to other APIs.\n  browserWindow.setMaximizable(options.maximizable !== false)\n\n  if (options.acceptsFirstMouse) {\n    browserWindow.on('focus', function(event) {\n      if (event.type() === NSEventTypeLeftMouseDown) {\n        browserWindow.webContents\n          .executeJavaScript(dispatchFirstClick(webView, event))\n          .catch(() => {})\n      }\n    })\n  }\n\n  if (options.show !== false) {\n    browserWindow.show()\n  }\n\n  browserWindow.on('closed', function() {\n    browserWindow._destroyed = true\n    threadDictionary.removeObjectForKey(identifier)\n    fiber.cleanup()\n  })\n\n  threadDictionary[identifier] = panel\n\n  fiber.onCleanup(function() {\n    if (!browserWindow._destroyed) {\n      browserWindow.destroy()\n    }\n  })\n\n  return browserWindow\n}\n\nBrowserWindow.fromId = function(identifier) {\n  var threadDictionary = NSThread.mainThread().threadDictionary()\n\n  if (threadDictionary[identifier]) {\n    return BrowserWindow.fromPanel(threadDictionary[identifier], identifier)\n  }\n\n  return undefined\n}\n\nBrowserWindow.fromPanel = function(panel, identifier) {\n  var browserWindow = new EventEmitter()\n  browserWindow.id = identifier\n\n  if (!panel || !panel.contentView) {\n    throw new Error('needs to pass an NSPanel')\n  }\n\n  var webView = panel.contentView().subviews()[0]\n\n  if (!webView) {\n    throw new Error('The NSPanel needs to have a webview')\n  }\n\n  buildBrowserAPI(browserWindow, panel, webView)\n  buildWebAPI(browserWindow, panel, webView)\n\n  return browserWindow\n}\n\nmodule.exports = BrowserWindow\n","var CONSTANTS = require('./constants')\n\nmodule.exports = function(webView) {\n  var source =\n    'window.originalPostMessage = window.postMessage;' +\n    'window.postMessage = function(actionName) {' +\n    'if (!actionName) {' +\n    \"throw new Error('missing action name')\" +\n    '}' +\n    'window.webkit.messageHandlers.' +\n    CONSTANTS.JS_BRIDGE +\n    '.postMessage(' +\n    'JSON.stringify([].slice.call(arguments))' +\n    ');' +\n    '}'\n  var script = WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(\n    source,\n    0,\n    true\n  )\n  webView\n    .configuration()\n    .userContentController()\n    .addUserScript(script)\n}\n","module.exports = function(webArguments) {\n  var args = null\n  try {\n    args = JSON.parse(webArguments[0])\n  } catch (e) {\n    // malformed arguments\n  }\n\n  if (\n    !args ||\n    !args.constructor ||\n    args.constructor !== Array ||\n    args.length == 0\n  ) {\n    return null\n  }\n\n  return args\n}\n","var ObjCClass = require('cocoascript-class').default\nvar parseWebArguments = require('./parseWebArguments')\nvar CONSTANTS = require('./constants')\n\n// We create one ObjC class for ourselves here\nvar WindowDelegateClass\nvar NavigationDelegateClass\nvar WebScriptHandlerClass\n\n// TODO: events\n// - 'page-favicon-updated'\n// - 'new-window'\n// - 'did-navigate-in-page'\n// - 'will-prevent-unload'\n// - 'crashed'\n// - 'unresponsive'\n// - 'responsive'\n// - 'destroyed'\n// - 'before-input-event'\n// - 'certificate-error'\n// - 'found-in-page'\n// - 'media-started-playing'\n// - 'media-paused'\n// - 'did-change-theme-color'\n// - 'update-target-url'\n// - 'cursor-changed'\n// - 'context-menu'\n// - 'select-bluetooth-device'\n// - 'paint'\n// - 'console-message'\n\nmodule.exports = function(browserWindow, panel, webview, options) {\n  if (!WindowDelegateClass) {\n    WindowDelegateClass = ObjCClass({\n      classname: 'WindowDelegateClass',\n      utils: null,\n      panel: null,\n\n      'windowDidResize:': function() {\n        this.utils.emit('resize')\n      },\n\n      'windowDidMiniaturize:': function() {\n        this.utils.emit('minimize')\n      },\n\n      'windowDidDeminiaturize:': function() {\n        this.utils.emit('restore')\n      },\n\n      'windowDidEnterFullScreen:': function() {\n        this.utils.emit('enter-full-screen')\n      },\n\n      'windowDidExitFullScreen:': function() {\n        this.utils.emit('leave-full-screen')\n      },\n\n      'windowDidMove:': function() {\n        this.utils.emit('move')\n        this.utils.emit('moved')\n      },\n\n      'windowShouldClose:': function() {\n        var shouldClose = true\n        this.utils.emit('close', {\n          get defaultPrevented() {\n            return !shouldClose\n          },\n          preventDefault: function() {\n            shouldClose = false\n          },\n        })\n        return shouldClose\n      },\n\n      'windowWillClose:': function() {\n        this.utils.emit('closed')\n      },\n\n      'windowDidBecomeKey:': function() {\n        this.utils.emit('focus', this.panel.currentEvent())\n      },\n\n      'windowDidResignKey:': function() {\n        this.utils.emit('blur')\n      },\n    })\n  }\n\n  if (!NavigationDelegateClass) {\n    NavigationDelegateClass = ObjCClass({\n      classname: 'NavigationDelegateClass',\n      state: NSMutableDictionary.dictionaryWithDictionary({\n        wasReady: 0,\n      }),\n      utils: null,\n\n      // // Called when the web view begins to receive web content.\n      'webView:didCommitNavigation:': function(webView) {\n        this.utils.emit('will-navigate', {}, String(String(webView.URL())))\n      },\n\n      // // Called when web content begins to load in a web view.\n      'webView:didStartProvisionalNavigation:': function() {\n        this.utils.emit('did-start-navigation')\n        this.utils.emit('did-start-loading')\n      },\n\n      // Called when a web view receives a server redirect.\n      'webView:didReceiveServerRedirectForProvisionalNavigation:': function() {\n        this.utils.emit('did-get-redirect-request')\n      },\n\n      // // Called when the web view needs to respond to an authentication challenge.\n      // 'webView:didReceiveAuthenticationChallenge:completionHandler:': function(\n      //   webView,\n      //   challenge,\n      //   completionHandler\n      // ) {\n      //   function callback(username, password) {\n      //     completionHandler(\n      //       0,\n      //       NSURLCredential.credentialWithUser_password_persistence(\n      //         username,\n      //         password,\n      //         1\n      //       )\n      //     )\n      //   }\n      //   var protectionSpace = challenge.protectionSpace()\n      //   this.utils.emit(\n      //     'login',\n      //     {},\n      //     {\n      //       method: String(protectionSpace.authenticationMethod()),\n      //       url: 'not implemented', // TODO:\n      //       referrer: 'not implemented', // TODO:\n      //     },\n      //     {\n      //       isProxy: !!protectionSpace.isProxy(),\n      //       scheme: String(protectionSpace.protocol()),\n      //       host: String(protectionSpace.host()),\n      //       port: Number(protectionSpace.port()),\n      //       realm: String(protectionSpace.realm()),\n      //     },\n      //     callback\n      //   )\n      // },\n\n      // Called when an error occurs during navigation.\n      // 'webView:didFailNavigation:withError:': function(\n      //   webView,\n      //   navigation,\n      //   error\n      // ) {},\n\n      // Called when an error occurs while the web view is loading content.\n      'webView:didFailProvisionalNavigation:withError:': function(\n        webView,\n        navigation,\n        error\n      ) {\n        this.utils.emit('did-fail-load', error)\n      },\n\n      // Called when the navigation is complete.\n      'webView:didFinishNavigation:': function() {\n        if (this.state.wasReady == 0) {\n          this.utils.emitBrowserEvent('ready-to-show')\n          this.state.setObject_forKey(1, 'wasReady')\n        }\n        this.utils.emit('did-navigate')\n        this.utils.emit('did-frame-navigate')\n        this.utils.emit('did-stop-loading')\n        this.utils.emit('did-finish-load')\n        this.utils.emit('did-frame-finish-load')\n      },\n\n      // Called when the web view’s web content process is terminated.\n      'webViewWebContentProcessDidTerminate:': function() {\n        this.utils.emit('dom-ready')\n      },\n\n      // Decides whether to allow or cancel a navigation.\n      // webView:decidePolicyForNavigationAction:decisionHandler:\n\n      // Decides whether to allow or cancel a navigation after its response is known.\n      // webView:decidePolicyForNavigationResponse:decisionHandler:\n    })\n  }\n\n  if (!WebScriptHandlerClass) {\n    WebScriptHandlerClass = ObjCClass({\n      classname: 'WebScriptHandlerClass',\n      utils: null,\n      'userContentController:didReceiveScriptMessage:': function(_, message) {\n        var webArguments = JSON.parse(String(message.body()))\n        var args = this.utils.parseWebArguments([JSON.stringify(webArguments)])\n        if (!args) {\n          return\n        }\n\n        this.utils.emit.apply(this, args)\n      },\n    })\n  }\n\n  var navigationDelegate = NavigationDelegateClass.new()\n  navigationDelegate.utils = NSDictionary.dictionaryWithDictionary({\n    setTitle: browserWindow.setTitle.bind(browserWindow),\n    emitBrowserEvent() {\n      try {\n        browserWindow.emit.apply(browserWindow, arguments)\n      } catch (err) {\n        console.error(err)\n        throw err\n      }\n    },\n    emit() {\n      try {\n        browserWindow.webContents.emit.apply(\n          browserWindow.webContents,\n          arguments\n        )\n      } catch (err) {\n        console.error(err)\n        throw err\n      }\n    },\n  })\n  // reset state as well\n  navigationDelegate.state = NSMutableDictionary.dictionaryWithDictionary({\n    wasReady: 0,\n  })\n\n  webview.setNavigationDelegate(navigationDelegate)\n\n  var webScriptHandler = WebScriptHandlerClass.new()\n  webScriptHandler.utils = NSDictionary.dictionaryWithDictionary({\n    emit() {\n      try {\n        browserWindow.webContents.emit.apply(\n          browserWindow.webContents,\n          arguments\n        )\n      } catch (err) {\n        console.error(err)\n        throw err\n      }\n    },\n    parseWebArguments: parseWebArguments,\n  })\n\n  webview\n    .configuration()\n    .userContentController()\n    .addScriptMessageHandler_name(webScriptHandler, CONSTANTS.JS_BRIDGE)\n\n  var windowDelegate = WindowDelegateClass.new()\n  var utils = {\n    emit() {\n      try {\n        browserWindow.emit.apply(browserWindow, arguments)\n      } catch (err) {\n        console.error(err)\n        throw err\n      }\n    },\n  }\n  if (options.modal) {\n    // find the window of the document\n    var msdocument\n    if (options.parent.type === 'Document') {\n      msdocument = options.parent.sketchObject\n    } else {\n      msdocument = options.parent\n    }\n    if (msdocument && String(msdocument.class()) === 'MSDocumentData') {\n      // we only have an MSDocumentData instead of a MSDocument\n      // let's try to get back to the MSDocument\n      msdocument = msdocument.delegate()\n    }\n    utils.parentWindow = msdocument.windowForSheet()\n  }\n\n  windowDelegate.utils = NSDictionary.dictionaryWithDictionary(utils)\n  windowDelegate.panel = panel\n\n  panel.setDelegate(windowDelegate)\n}\n","var EventEmitter = require('events')\n\n// let's try to match https://github.com/electron/electron/blob/master/docs/api/web-contents.md\nmodule.exports = function buildAPI(browserWindow, panel, webview) {\n  var webContents = new EventEmitter()\n\n  webContents.loadURL = browserWindow.loadURL\n\n  webContents.loadFile = function(/* filePath */) {\n    // TODO:\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n\n  webContents.downloadURL = function(/* filePath */) {\n    // TODO:\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n\n  webContents.getURL = function() {\n    return String(webview.url())\n  }\n\n  webContents.getTitle = function() {\n    return String(webview.title())\n  }\n\n  webContents.isDestroyed = function() {\n    // TODO:\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n\n  webContents.focus = browserWindow.focus\n  webContents.isFocused = browserWindow.isFocused\n\n  webContents.isLoading = function() {\n    return !!webview.loading()\n  }\n\n  webContents.isLoadingMainFrame = function() {\n    // TODO:\n    return !!webview.loading()\n  }\n\n  webContents.isWaitingForResponse = function() {\n    return !webview.loading()\n  }\n\n  webContents.stop = function() {\n    webview.stopLoading()\n  }\n  webContents.reload = function() {\n    webview.reload()\n  }\n  webContents.reloadIgnoringCache = function() {\n    webview.reloadFromOrigin()\n  }\n  webContents.canGoBack = function() {\n    return !!webview.canGoBack()\n  }\n  webContents.canGoForward = function() {\n    return !!webview.canGoForward()\n  }\n  webContents.canGoToOffset = function(offset) {\n    return !!webview.backForwardList().itemAtIndex(offset)\n  }\n  webContents.clearHistory = function() {\n    // TODO:\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.goBack = function() {\n    webview.goBack()\n  }\n  webContents.goForward = function() {\n    webview.goForward()\n  }\n  webContents.goToIndex = function(index) {\n    var backForwardList = webview.backForwardList()\n    var backList = backForwardList.backList()\n    var backListLength = backList.count()\n    if (backListLength > index) {\n      webview.loadRequest(NSURLRequest.requestWithURL(backList[index]))\n      return\n    }\n    var forwardList = backForwardList.forwardList()\n    if (forwardList.count() > index - backListLength) {\n      webview.loadRequest(\n        NSURLRequest.requestWithURL(forwardList[index - backListLength])\n      )\n      return\n    }\n    throw new Error('Cannot go to index ' + index)\n  }\n  webContents.goToOffset = function(offset) {\n    if (!webContents.canGoToOffset(offset)) {\n      throw new Error('Cannot go to offset ' + offset)\n    }\n    webview.loadRequest(\n      NSURLRequest.requestWithURL(webview.backForwardList().itemAtIndex(offset))\n    )\n  }\n  webContents.isCrashed = function() {\n    // TODO:\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.setUserAgent = function(/* userAgent */) {\n    // TODO:\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.getUserAgent = function() {\n    const userAgent = webview.customUserAgent()\n    return userAgent ? String(userAgent) : undefined\n  }\n  webContents.insertCSS = function(css) {\n    var source =\n      \"var style = document.createElement('style'); style.innerHTML = \" +\n      css.replace(/\"/, '\\\\\"') +\n      '; document.head.appendChild(style);'\n    var script = WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(\n      source,\n      0,\n      true\n    )\n    webview\n      .configuration()\n      .userContentController()\n      .addUserScript(script)\n  }\n  webContents.insertJS = function(source) {\n    var script = WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(\n      source,\n      0,\n      true\n    )\n    webview\n      .configuration()\n      .userContentController()\n      .addUserScript(script)\n  }\n  webContents.executeJavaScript = function(script, userGesture, callback) {\n    if (typeof userGesture === 'function') {\n      callback = userGesture\n      userGesture = false\n    }\n    var fiber = coscript.createFiber()\n\n    // if the webview is not ready yet, defer the execution until it is\n    if (webview.navigationDelegate().valueForKey('state').wasReady == 0) {\n      return new Promise(function(resolve) {\n        browserWindow.on('ready-to-show', function() {\n          fiber.cleanup()\n          resolve()\n        })\n      }).then(function() {\n        return webContents.executeJavaScript(script, userGesture, callback)\n      })\n    }\n\n    return new Promise(function(resolve, reject) {\n      webview.evaluateJavaScript_completionHandler(\n        script,\n        __mocha__.createBlock_function('v28@?0@8c16@\"NSError\"20', function(\n          result,\n          err\n        ) {\n          var isError =\n            err &&\n            err.class &&\n            (String(err.class()) === 'NSException' ||\n              String(err.class()) === 'NSError')\n          if (callback) {\n            try {\n              callback(isError ? err : null, result)\n            } catch (error) {\n              // /shrug\n            }\n            resolve()\n          } else if (isError) {\n            reject(err)\n          } else {\n            resolve(result)\n          }\n          fiber.cleanup()\n        })\n      )\n    })\n  }\n  webContents.setIgnoreMenuShortcuts = function() {\n    // TODO:??\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.setAudioMuted = function(/* muted */) {\n    // TODO:??\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.isAudioMuted = function() {\n    // TODO:??\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.setZoomFactor = function(factor) {\n    webview.setMagnification_centeredAtPoint(factor, CGPointMake(0, 0))\n  }\n  webContents.getZoomFactor = function(callback) {\n    callback(Number(webview.magnification()))\n  }\n  webContents.setZoomLevel = function(level) {\n    // eslint-disable-next-line no-restricted-properties\n    webContents.setZoomFactor(Math.pow(1.2, level))\n  }\n  webContents.getZoomLevel = function(callback) {\n    // eslint-disable-next-line no-restricted-properties\n    callback(Math.log(Number(webview.magnification())) / Math.log(1.2))\n  }\n  webContents.setVisualZoomLevelLimits = function(/* minimumLevel, maximumLevel */) {\n    // TODO:??\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.setLayoutZoomLevelLimits = function(/* minimumLevel, maximumLevel */) {\n    // TODO:??\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n\n  // TODO:\n  // webContents.undo = function() {\n  //   webview.undoManager().undo()\n  // }\n  // webContents.redo = function() {\n  //   webview.undoManager().redo()\n  // }\n  // webContents.cut = webview.cut\n  // webContents.copy = webview.copy\n  // webContents.paste = webview.paste\n  // webContents.pasteAndMatchStyle = webview.pasteAsRichText\n  // webContents.delete = webview.delete\n  // webContents.replace = webview.replaceSelectionWithText\n\n  webContents.send = function() {\n    const script =\n      'window.postMessage({' +\n      'isSketchMessage: true,' +\n      \"origin: '\" +\n      String(__command.identifier()) +\n      \"',\" +\n      'args: ' +\n      JSON.stringify([].slice.call(arguments)) +\n      '}, \"*\")'\n    webview.evaluateJavaScript_completionHandler(script, null)\n  }\n\n  webContents.getNativeWebview = function() {\n    return webview\n  }\n\n  browserWindow.webContents = webContents\n}\n","/* globals NSThread */\nvar BrowserWindow = require('./lib')\n\nvar threadDictionary = NSThread.mainThread().threadDictionary()\n\nmodule.exports.getWebview = BrowserWindow.fromId\n\nmodule.exports.isWebviewPresent = function isWebviewPresent(identifier) {\n  return !!threadDictionary[identifier]\n}\n\nmodule.exports.sendToWebview = function sendToWebview(\n  identifier,\n  evalString,\n  callback\n) {\n  if (!module.exports.isWebviewPresent(identifier)) {\n    return undefined\n  }\n\n  // in case there is no callback, lightweight path\n  if (!callback) {\n    var panel = threadDictionary[identifier]\n    var webview = panel.contentView().subviews()[0]\n    if (!webview || !webview.evaluateJavaScript_completionHandler) {\n      throw new Error('Webview ' + identifier + ' not found')\n    }\n\n    webview.evaluateJavaScript_completionHandler(evalString, null)\n    return undefined\n  }\n\n  var browserView = module.exports.getWebview(identifier)\n\n  if (!browserView) {\n    throw new Error('Webview ' + identifier + ' not found')\n  }\n\n  return browserView.webContents.executeJavaScript(evalString, callback)\n}\n","import sketch from 'sketch';\nimport { drawConnection } from \"./draw.js\";\n\nvar Settings = require('sketch/settings');\n\n\n// Main Function\n\nexport function createArrow(firstObjectID, secondObjectID, style, type, direction, conditionID, isCondition, document, docData) {  // Refactored\n  let localDirection = direction == \"Auto\" ? getDirection(firstObjectID, secondObjectID, document) : direction;\n\n  // Main Operations based on the settings\n  updateSpacing(firstObjectID, secondObjectID, localDirection, document);\n  autoAlignLayer(firstObjectID, secondObjectID, localDirection, document);\n\n  // Making an Arrow \n  let arrow = drawConnection(firstObjectID, secondObjectID, style, type, localDirection, conditionID, isCondition, document, docData);\n  \n  // Storage for current connection\n  let connection = {\n    firstObject : firstObjectID,\n    secondObject : secondObjectID,\n    style : arrow.style,\n    condition : arrow.conditionID,\n    isCondition : isCondition,\n    type : arrow.type,\n    direction: localDirection,\n    line : arrow.line.objectID()\n  }\n  return connection;\n}\n\nfunction getDirection(firstObjectID, secondObjectID, document){ // Refactored\n  // Get direction from the source object\n  const firstObject = document.getLayerWithID(firstObjectID);\n  const secondObject = document.getLayerWithID(secondObjectID);\n  const firstObjectMidX = firstObject.frame.x+firstObject.frame.width/2;\n  const firstObjectMidY = firstObject.frame.y+firstObject.frame.height/2;\n  const secondObjectMidX = secondObject.frame.x+secondObject.frame.width/2;\n  const secondObjectMidY = secondObject.frame.y+secondObject.frame.height/2;\n\n  const diffX = firstObjectMidX - secondObjectMidX;\n  const diffY = firstObjectMidY - secondObjectMidY;\n  const absDiffX = Math.abs(diffX);\n  const absDiffY = Math.abs(diffY);\n  let direction;\n\n  if(secondObjectMidX > firstObjectMidX){\n    // Right Half\n    if(secondObjectMidY > firstObjectMidY){\n      // Bottom quarter\n      direction = diffX > diffY ? \"Down\" : \"Right\";\n    } else {\n      // Top quarter\n      direction = absDiffX > absDiffY ? \"Right\" : \"Up\";\n    }\n  } else {\n    // Left Half\n    if(secondObjectMidY > firstObjectMidY){\n      // Bottom quarter\n      direction = absDiffX > absDiffY ? \"Left\" : \"Down\";\n    } else {\n      // Top quarter\n      direction = diffX > diffY ? \"Left\" : \"Up\";\n    }\n  }\n\n  return direction;\n}\n\nfunction updateSpacing(sourceObjectID, childObjectID, direction, document){\n  let sourceObject = document.getLayerWithID(sourceObjectID);\n  let childObject = document.getLayerWithID(childObjectID);\n\n  if(Settings.settingForKey(\"arrowSpacing\") && Settings.settingForKey(\"arrowSpacing\") != 0){\n    let currentSpacing = Settings.settingForKey(\"arrowSpacing\");\n    \n    if(direction == \"Right\"){\n      childObject.frame.x = sourceObject.frame.x + sourceObject.frame.width + currentSpacing;\n    }\n  \n    if(direction == \"Down\"){\n      childObject.frame.y = sourceObject.frame.y + sourceObject.frame.height + currentSpacing;\n    }\n  \n    if(direction == \"Left\"){\n      childObject.frame.x = sourceObject.frame.x - childObject.frame.width - currentSpacing;\n    }\n  \n    if(direction == \"Up\"){\n      childObject.frame.y = sourceObject.frame.y - childObject.frame.height - currentSpacing;\n    }\n  }\n}\n\nfunction autoAlignLayer(sourceObjectID, childObjectID, direction, document){\n  let sourceObject = document.getLayerWithID(sourceObjectID);\n  let childObject = document.getLayerWithID(childObjectID);\n  let sourceMidY, childMidY, sourceMidX, childMidX, diff;\n\n  if(Settings.settingForKey(\"autoAlign\")){\n    if(Settings.settingForKey(\"autoAlign\") == true){\n      // If user turned on Auto-Align settings\n      \n      if(direction == \"Right\" || direction == \"Left\"){\n        sourceMidY = sourceObject.frame.y + sourceObject.frame.height/2;\n        childMidY = childObject.frame.y + childObject.frame.height/2;\n        diff = sourceMidY - childMidY;\n        if(diff > -6 && diff < 6){childObject.frame.y = childObject.frame.y + diff;}\n      }\n    \n      if(direction == \"Down\" || direction == \"Up\"){\n        sourceMidX = sourceObject.frame.x + sourceObject.frame.width/2;\n        childMidX = childObject.frame.x + childObject.frame.width/2;\n        diff = sourceMidX - childMidX;\n        if(diff > -6 && diff < 6){childObject.frame.x = childObject.frame.x + diff;}\n      }\n    }\n  }\n}","import sketch from 'sketch';\nimport { styleLine } from \"./utilities/styling.js\";\nimport { addCondition, updateCondition } from \"./utilities/conditions.js\";\nimport { checkForGroup, addToArrowsGroup } from \"./utilities/groups.js\";\nlet Settings = require('sketch/settings');\nlet UI = require('sketch/ui') ;\n\n// let document = sketch.fromNative(context.document);\n// let docData = context.document.documentData();\n// let currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage();\n\n\n// Main Function\n\nexport function drawConnection(firstObjectID, secondObjectID, style, type, localDirection, conditionID, isCondition, document, docData){ // Refactored\n  // Process of creating new connection  \n  let currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage();\n  let firstObject = document.getLayerWithID(firstObjectID);\n  let secondObject = document.getLayerWithID(secondObjectID);\n  let connectionPos = getConnectionPos(firstObject, secondObject, localDirection, currentParentGroup);\n  let connection = {\n    line: [], \n    conditionID: [],\n    type: [],\n    style: []\n  }\n\n  // Type  \n  connection.type = type == null ? Settings.settingForKey(\"arrowType\") : type;\n  if(connection.type == \"Angled\" || connection.type == null){ connection.line = drawAngledLine(connectionPos.firstLayerPosX, connectionPos.firstLayerPosY, connectionPos.middlePosX, connectionPos.middlePosY, connectionPos.secondLayerPosX, connectionPos.secondLayerPosY, localDirection);}\n  if(connection.type == \"Straight\"){ connection.line = drawStraightLine(connectionPos.firstLayerPosX, connectionPos.firstLayerPosY, connectionPos.secondLayerPosX, connectionPos.secondLayerPosY, localDirection);}\n  if(connection.type == \"Curved\"){ connection.line = drawCurvedLine(connectionPos.firstLayerPosX, connectionPos.firstLayerPosY, connectionPos.secondLayerPosX, connectionPos.secondLayerPosY, localDirection);}\n\n\n  // Condition\n  if(isCondition == true){\n    if(document.getLayerWithID(conditionID)){\n      connection.conditionID = updateCondition(conditionID, connectionPos.middlePosX, connectionPos.middlePosY, document, docData);\n    } else {\n      connection.conditionID = addCondition(\"#con\", connectionPos.middlePosX, connectionPos.middlePosY, document, docData);\n    }\n  } else {\n    connection.conditionID = null;\n  }\n \n  // Style\n  connection.style = styleLine(connection.line, style, docData);\n\n  // Add to group\n  addToArrowsGroup(connection.line, currentParentGroup);\n  \n  return connection\n}\n\n// Positions\n\nfunction getConnectionPos(firstObject, secondObject, direction, currentParentGroup){ // Refactored\n\n    let firstObjectAbsPos = firstObject.frame.changeBasis({from: firstObject.parent, to: currentParentGroup});\n    let secondObjectAbsPos = secondObject.frame.changeBasis({from: secondObject.parent, to: currentParentGroup});\n    let currentGroup = checkForGroup(\"Arrows\", currentParentGroup);\n    let diffX, diffY;\n  \n    if(currentGroup){\n      diffX = currentGroup.frame().x();\n      diffY = currentGroup.frame().y();\n    } else {\n      diffX = 0;\n      diffY = 0;\n    }\n  \n    let connectionPos = {\n      firstLayerPosX: null,\n      firstLayerPosY: null, \n      secondLayerPosX: null, \n      secondLayerPosY: null, \n      middlePosX: null, \n      middlePosY: null\n    }\n  \n    // Getting all the positions\n    if(direction == \"Up\"){\n      // First Layer Position Start Point Position\n      connectionPos.firstLayerPosX = firstObjectAbsPos.x+firstObjectAbsPos.width/2-diffX;\n      connectionPos.firstLayerPosY = firstObjectAbsPos.y-diffY;\n  \n      // Second Layer Position End Point Position\n      connectionPos.secondLayerPosX = secondObjectAbsPos.x+secondObjectAbsPos.width/2-diffX;\n      connectionPos.secondLayerPosY = secondObjectAbsPos.y+secondObjectAbsPos.height-diffY;\n  \n      // Middle Points\n      connectionPos.middlePosX = (connectionPos.firstLayerPosX + connectionPos.secondLayerPosX)/2;\n      connectionPos.middlePosY = (connectionPos.firstLayerPosY + connectionPos.secondLayerPosY)/2;\n    }\n  \n    if(direction == \"Right\"){\n      // First Layer Position Start Point Position\n      connectionPos.firstLayerPosX = firstObjectAbsPos.x+firstObjectAbsPos.width-diffX;\n      connectionPos.firstLayerPosY = firstObjectAbsPos.y+firstObjectAbsPos.height/2-diffY;\n  \n      // Second Layer Position End Point Position\n      connectionPos.secondLayerPosX = secondObjectAbsPos.x-diffX;\n      connectionPos.secondLayerPosY = secondObjectAbsPos.y+secondObjectAbsPos.height/2-diffY;\n      \n      // Middle Points\n      connectionPos.middlePosX = (connectionPos.firstLayerPosX + connectionPos.secondLayerPosX)/2;\n      connectionPos.middlePosY = (connectionPos.firstLayerPosY + connectionPos.secondLayerPosY)/2;\n    }\n  \n    if(direction == \"Down\"){\n      // First Layer Position Start Point Position\n      connectionPos.firstLayerPosX = secondObjectAbsPos.x+secondObjectAbsPos.width/2-diffX;\n      connectionPos.firstLayerPosY = secondObjectAbsPos.y+secondObjectAbsPos.height-diffY;\n  \n      // Second Layer Position End Point Position\n      connectionPos.secondLayerPosX = firstObjectAbsPos.x+firstObjectAbsPos.width/2-diffX;\n      connectionPos.secondLayerPosY = firstObjectAbsPos.y-diffY;\n  \n      // Middle Points\n      connectionPos.middlePosX = (connectionPos.firstLayerPosX + connectionPos.secondLayerPosX)/2;\n      connectionPos.middlePosY = (connectionPos.firstLayerPosY + connectionPos.secondLayerPosY)/2;\n    }\n  \n    if(direction == \"Left\"){\n      // First Layer Position Start Point Position\n      connectionPos.firstLayerPosX = firstObjectAbsPos.x-diffX;\n      connectionPos.firstLayerPosY = firstObjectAbsPos.y+firstObjectAbsPos.height/2-diffY;\n  \n      // Second Layer Position End Point Position\n      connectionPos.secondLayerPosX = secondObjectAbsPos.x+secondObjectAbsPos.width-diffX;\n      connectionPos.secondLayerPosY = secondObjectAbsPos.y+secondObjectAbsPos.height/2-diffY;\n  \n      // Middle Points\n      connectionPos.middlePosX = (connectionPos.firstLayerPosX + connectionPos.secondLayerPosX)/2;\n      connectionPos.middlePosY = (connectionPos.firstLayerPosY + connectionPos.secondLayerPosY)/2;\n    }\n\n    return connectionPos\n}\n\n// Drawing Types\n\nfunction drawAngledLine(firstLayerPosX, firstLayerPosY, middlePosX, middlePosY, secondLayerPosX, secondLayerPosY, direction){ // Refactored\n    let path = NSBezierPath.bezierPath();\n  \n    if(direction == \"Up\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX, firstLayerPosY));\n      path.lineToPoint(NSMakePoint(firstLayerPosX, middlePosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX, middlePosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX, secondLayerPosY));\n    }\n  \n    if(direction == \"Right\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX, firstLayerPosY));\n      path.lineToPoint(NSMakePoint(middlePosX, firstLayerPosY));\n      path.lineToPoint(NSMakePoint(middlePosX, secondLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX, secondLayerPosY));\n    }\n  \n    if(direction == \"Down\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX, firstLayerPosY));\n      path.lineToPoint(NSMakePoint(firstLayerPosX, middlePosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX, middlePosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX, secondLayerPosY));\n    }\n  \n    if(direction == \"Left\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX, firstLayerPosY));\n      path.lineToPoint(NSMakePoint(middlePosX, firstLayerPosY));\n      path.lineToPoint(NSMakePoint(middlePosX, secondLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX, secondLayerPosY));\n    }\n  \n    let line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path));\n    let points = line.layers().firstObject().points();\n    points[1].cornerRadius = 20;\n    points[2].cornerRadius = 20;\n    line.setName(\"Angled Arrow\");\n    // line.layers[0].style.borders[0].color = \"#52C41A\";\n  \n    return line;\n}\n\nfunction drawStraightLine(firstLayerPosX, firstLayerPosY, secondLayerPosX, secondLayerPosY, direction){ // Refactored\n    let path = NSBezierPath.bezierPath();\n    \n    if(direction == \"Up\"){\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n    }\n  \n    if(direction == \"Right\"){\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n    }\n  \n    if(direction == \"Down\"){\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n    }\n  \n    if(direction == \"Left\"){\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n    }\n  \n    let line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path));\n    line.setName(\"Straight Arrow\");\n  \n    return line;\n}\n\nfunction drawCurvedLine(firstLayerPosX, firstLayerPosY, secondLayerPosX, secondLayerPosY, direction){ // Refactored\n    let path = NSBezierPath.bezierPath();\n    let line;\n  \n    if(direction == \"Up\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n  \n      // Painting the line\n      line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path));\n      let points = line.layers().firstObject().points();\n  \n      points[0].curveMode = 4;\n      points[1].curveMode = 4;\n      points[0].hasCurveFrom = true;\n      points[1].hasCurveTo = true;\n  \n      if(firstLayerPosX<secondLayerPosX){\n        points[0].curveFrom = {x: 0, y: 0.5};\n        points[0].curveTo = {x: -0.5, y: 1};\n  \n        points[1].curveFrom = {x: 1, y: 1};\n        points[1].curveTo = {x: 1, y: 0.5};\n      } else {\n        points[0].curveFrom = {x: 1, y: 0.5};\n        points[0].curveTo = {x: -0.5, y:1};\n  \n        points[1].curveFrom = {x: 1, y: 1};\n        points[1].curveTo = {x: 0, y: 0.5};\n      }\n    }\n  \n    if(direction == \"Right\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n  \n      // Painting the line\n      line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path));\n      let points = line.layers().firstObject().points();\n  \n      points[0].curveMode = 4;\n      points[1].curveMode = 4;\n      points[0].hasCurveFrom = true;\n      points[1].hasCurveTo = true;\n  \n      if(firstLayerPosY<secondLayerPosY){\n        points[0].curveFrom = {x: 0.5, y: 0};\n        points[0].curveTo = {x: -0.5,y:1};\n  \n        points[1].curveFrom = {x: 1,y: 1};\n        points[1].curveTo = {x: 0.5,y: 1};\n      } else {\n        points[0].curveFrom = {x: 0.5, y: 1};\n        points[0].curveTo = {x: -0.5,y:1};\n  \n        points[1].curveFrom = {x: 1,y: 1};\n        points[1].curveTo = {x: 0.5,y: 0};\n      }\n    }\n  \n    if(direction == \"Down\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n  \n      // Painting the line\n      line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path));\n      let points = line.layers().firstObject().points();\n  \n      points[0].curveMode = 4;\n      points[1].curveMode = 4;\n      points[0].hasCurveFrom = true;\n      points[1].hasCurveTo = true;\n  \n      if(firstLayerPosX<secondLayerPosX){\n        points[0].curveFrom = {x: 0, y: 0.5};\n        points[0].curveTo = {x: -0.5,y:1};\n  \n        points[1].curveFrom = {x: 1,y: 1};\n        points[1].curveTo = {x: 1,y: 0.5};\n      } else {\n        points[0].curveFrom = {x: 1, y: 0.5};\n        points[0].curveTo = {x: -0.5,y:1};\n  \n        points[1].curveFrom = {x: 1,y: 1};\n        points[1].curveTo = {x: 0,y: 0.5};\n      }\n    }\n  \n    if(direction == \"Left\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n  \n      // Painting the line\n      line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path));\n      let points = line.layers().firstObject().points();\n  \n      points[0].curveMode = 4;\n      points[1].curveMode = 4;\n      points[0].hasCurveFrom = true;\n      points[1].hasCurveTo = true;\n  \n      if(firstLayerPosY<secondLayerPosY){\n        points[0].curveFrom = {x: 0.5, y: 0};\n        points[0].curveTo = {x: -0.5,y:1};\n  \n        points[1].curveFrom = {x: 1,y: 1};\n        points[1].curveTo = {x: 0.5,y: 1};\n      } else {\n        points[0].curveFrom = {x: 0.5, y: 1};\n        points[0].curveTo = {x: -0.5,y:1};\n  \n        points[1].curveFrom = {x: 1,y: 1};\n        points[1].curveTo = {x: 0.5,y: 0};\n      }\n    }\n  \n    // Providing Settings for the arrow\n    line.setName(\"Curved Arrow\");\n  \n    return line;\n}","import sketch from 'sketch';\nimport { addToConditionGroup, checkForGroup } from \"./groups.js\";\nlet Settings = require('sketch/settings');\nlet UI = require('sketch/ui') ;\n\n// let docData = context.document.documentData();\n// let currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage();\n\nexport function addCondition(keyword, x, y, document, docData) {\n  let libraries = sketch.getLibraries();\n  let libraryObject, symbolReferences, symbol;\n  let currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage();\n\n  for (let g = 0; g < libraries.length; g++) {\n    symbolReferences = libraries[g].getImportableSymbolReferencesForDocument(\n      document\n    );\n    for (let i = 0; i < symbolReferences.length; i++) {\n      if (symbolReferences[i].name.includes(keyword)) {\n        libraryObject = symbolReferences[i];\n      }\n    }\n  }\n\n  if (libraryObject == null) {\n    symbol = null;\n    UI.alert(\n      \"Condition symbol is not found\",\n      'If you would like to add arrows with specific conditions, you need to specify them in your libraries. You can download the library that works well with the plugin by going into Plugins -> Connection Arrows -> Get Free Library. Conditions are taken from the library based on their names. Make sure to name symbol as \"#condition\" so it will be added here'\n    );\n  } else {\n    let symbolMaster = libraryObject.import();\n    symbol = symbolMaster.createNewInstance();\n    symbol = addToConditionGroup(symbol, x, y, currentParentGroup);\n  }\n  return symbol;\n}\n\nexport function updateCondition(conditionID, x, y, document, docData) {\n  let currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage();\n  let condition = document.getLayerWithID(conditionID);\n  let conGroup = checkForGroup(\"Conditions\", currentParentGroup);\n  let arGroup = checkForGroup(\"Arrows\", currentParentGroup);\n  let arGroupX = arGroup != null ? arGroup.frame().x() : 0;\n  let arGroupY = arGroup != null ? arGroup.frame().y() : 0;\n\n  if (conGroup) {\n    condition.frame.x =\n      x - condition.frame.width / 2 - (conGroup.frame().x() - arGroupX);\n    condition.frame.y =\n      y - condition.frame.height / 2 - (conGroup.frame().y() - arGroupY);\n    conGroup.fixGeometryWithOptions(1);\n  } else {\n    condition.frame.x = x - condition.frame.width / 2;\n    condition.frame.y = y - condition.frame.height / 2;\n  }\n  return condition.id;\n}\n\nexport function deleteCondition(conditionID, document) {\n    let conditionObject = document.getLayerWithID(conditionID);\n    let selectedGroup;\n    if(conditionObject){\n      selectedGroup = conditionObject.parent;\n      conditionObject.remove();\n      if(selectedGroup.layers.length == 0){\n        selectedGroup.remove();\n      }\n    }\n  }\n  \n","import sketch from 'sketch';\nlet Settings = require('sketch/settings');\nlet UI = require('sketch/ui') ;\n\n// let document = sketch.fromNative(context.document);\n// let docData = context.document.documentData();\n// let currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage();\n\n\nexport function checkForGroup(groupName, currentParentGroup) { // refactored\n    let currentGroup = null;\n  \n    // Checking all the groups that we have\n    for(let i = 0; i < currentParentGroup.layers().count(); i++){\n      if(currentParentGroup.layers()[i].name() == groupName) {\n        currentGroup = currentParentGroup.layers()[i];\n      } \n    }\n\n    return currentGroup;\n}\n\nexport function addToArrowsGroup(line, currentParentGroup){\n    let currentGroup = checkForGroup(\"Arrows\", currentParentGroup);\n    if(currentGroup){\n      currentGroup.addLayers([line]);\n      currentGroup.fixGeometryWithOptions(1);\n    } else {\n      let Group = require('sketch/dom').Group;\n      let group = new Group({\n        parent: currentParentGroup,\n        name: 'Arrows',\n        locked: true,\n        layers: [line]\n      });\n      group.moveToBack();\n      group.adjustToFit();\n    }\n}\n\nexport function addToConditionGroup(condition, x, y, currentParentGroup) {\n    let conGroup = checkForGroup(\"Conditions\", currentParentGroup);\n    let arGroup = checkForGroup(\"Arrows\", currentParentGroup);\n    \n    let arGroupX = arGroup != null ? arGroup.frame().x() : 0;\n    let arGroupY = arGroup != null ? arGroup.frame().y() : 0;\n\n    if (conGroup) {\n      condition.frame.x =\n        x - condition.frame.width / 2 - (conGroup.frame().x() - arGroupX);\n      condition.frame.y =\n        y - condition.frame.height / 2 - (conGroup.frame().y() - arGroupY);\n      condition.parent = conGroup;\n      conGroup.fixGeometryWithOptions(1);\n    } else {\n      condition.frame.x = x - condition.frame.width / 2 + arGroupX;\n      condition.frame.y = y - condition.frame.height / 2 + arGroupY;\n      let Group = require(\"sketch/dom\").Group;\n      let group = new Group({\n        parent: currentParentGroup,\n        name: \"Conditions\",\n        layers: [condition]\n      });\n      group.moveToBack();\n      group.adjustToFit();\n    }\n    return condition.id;\n  }","import sketch from 'sketch';\nconst pluginKey = \"flowArrows\";\n// let document = sketch.fromNative(context.document);\n// let docData = context.document.documentData();\n\nexport function styleLine(line, style, docData){ // Refactored\n    let localStyle;\n    \n    if(style != null){ \n      // For updates\n      if(getLayerStyles(style, docData) != null && style != \"Default Style\"){\n        // If style is specified\n        localStyle = style;\n        let ownStyle = getLayerStyles(style, docData);\n        line.sharedStyle = ownStyle[0];\n      } else {\n        // if there is no specific style\n        localStyle = \"Default Style\";\n        let border = line.style().addStylePartOfType(1);\n        border.color = MSColor.colorWithRGBADictionary({r: 0.89, g: 0.89, b: 0.89, a: 1});\n        border.thickness = 2;\n        line.style().endMarkerType = 2;\n      }\n    } else {\n      // For creating new\n      if(context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowStyle\", docData, pluginKey) != null && context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowStyle\", docData, pluginKey) != \"Default Style\"){\n        // we have settins almost all the time and it's not default\n        localStyle = getLayerStyles(context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowStyle\", docData, pluginKey), docData);\n        line.sharedStyle = localStyle[0];\n        localStyle = localStyle[0].name();\n      } else {\n        localStyle = \"Default Style\";\n        let border = line.style().addStylePartOfType(1);\n        border.color = MSColor.colorWithRGBADictionary({r: 0.89, g: 0.89, b: 0.89, a: 1});\n        border.thickness = 2;\n        line.style().endMarkerType = 2;\n      } \n    }\n  \n    return localStyle;\n}\n\nexport function getLayerStyles(name, docData) { // Refactored\n    let allStyles = docData.allLayerStyles();\n    let keyword = \"$arrow\";\n    let styles = [];\n  \n    for(let i = 0; i < allStyles.count(); i++){\n      if(name == null) {\n        if(allStyles[i].name().includes(keyword)){styles.push(allStyles[i]);}\n      } else {\n        if(allStyles[i].name() == name){styles.push(allStyles[i]);}\n      }\n    }\n      return styles;\n}","module.exports.identifier = 'identifier_whale_kit';\n\n\n//change color state 颜色组\nmodule.exports.stateColor = {\n    active: \"#767272\",\n    noamal: \"#D8D8D8\",\n    disabled: \"#857D7D\"\n};\n//change color state 颜色组\nmodule.exports.StateColorAmt = 20;\n\n//change color state 常量\nmodule.exports.STATE_ACTIVE = \"active\";\nmodule.exports.STATE_DISABLED = \"disabled\";\n\n\n//convert to grayscaleCommand type 常量\nmodule.exports.AllType = \"all\";\nmodule.exports.PartType = \"part\";\nmodule.exports.SymbolsType = \"symbols\";\nmodule.exports.PageType = \"page\";\n\n//generate tags 常量\nmodule.exports.TAG_INDEX = [\n    1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30\n];\n\n//generate Element 常量\nmodule.exports.ElementNameList = [\n    \"项目描述\",\n    \"交互约定\",\n    \"设计要素\",\n    \"致谢\",\n    \"版本记录\",\n    \"修订记录\"\n];","import sketch from 'sketch';\nimport Sketch from 'sketch/dom';\nimport Settings from 'sketch/settings';\nimport BrowserWindow from \"sketch-module-web-view\";\nimport {identifier} from \"./lib/config\";\nimport {getWebview} from 'sketch-module-web-view/remote';\nimport { createArrow } from \"./arrows/createArrow\";\n\nconst Group = Sketch.Group;\nconst Document = Sketch.Document;\nconst Rectangle = Sketch.Rectangle;\nconst ShapePath = Sketch.ShapePath;\nconst Text = Sketch.Text;\nconst Artboard = Sketch.Artboard;\nconst Page = Sketch.Page;\nconst document = Document.getSelectedDocument();\n\nconst selectedPage = document.selectedPage;\nconst selectedArtBoards = selectedPage.layers;\nconst allPages = document.pages;\nlet docData = context.document.documentData();\n\nconst settingFlowKey = \"settingFlowKey\";\nvar settingFlowData = [];\n\nlet flowArtboard = {};\nvar flowPage = {};\nvar flowBoards = [];\nvar newFlowBlock = [];\nvar dist = {};\nvar flowName = \"交互流程\";\nvar hasFlowPage = false;\n\nconst interactDescriptionWidth = 0;\nconst initPositnX = 100;\nconst initPositnY = 100;\n\nconst flowArtBoardTilteHeight = 140;\nconst flowArtBoardTilteMarginBottom = 80;\nvar titleFontSize = 40;\nvar flowNameFontSize = 16;\nvar flowNameDist = 12;\nvar flowNameColor = \"#333\";\nvar titleBold = 600;\nvar titleColor = \"#fff\";\n\n\nconst createPageAndArtboard = () =>{//创建交互流程页面与Artboard\n    flowPage = doPage();\n    var flowArtboardFrame = getFlowArtboardFrame();\n    var newArtBordFrameX = doNewArtBordFrameX(flowPage);\n    var flowFrame = {\n        x:newArtBordFrameX,\n        y:0,\n        width:flowArtboardFrame.width+interactDescriptionWidth+initPositnX*2,\n        height: flowArtboardFrame.height+flowArtBoardTilteHeight+flowArtBoardTilteMarginBottom*2\n    };\n    \n    flowArtboard = new Artboard({\n        name: flowName,\n        parent:flowPage,\n        frame:flowFrame\n    });\n\n    currentFlowArtboardSelected();\n\n    //建立title\n    createPageAndArtboardTitle();\n\n    //建立交互流程\n    makeInteractLogic();\n\n    doFlowArrows();\n};\n\nconst currentFlowArtboardSelected = () =>{//\n    document.selectedPage = flowPage;\n    for(var i=0;i<flowPage.layers.length;i++){\n        flowPage.layers[i].selected = false;\n    }; \n    flowArtboard.selected = true;\n};\n\nconst doNewArtBordFrameX = (flowPage) =>{//设置flowArtBord的frame.x \n    var artBordMaxX = 0;\n    var artBordMaxXWidth = 0;\n    var flowPageLayers = flowPage.layers;\n    if(flowPageLayers.length>0){\n        artBordMaxX = flowPageLayers[0].frame.x;\n        artBordMaxXWidth = flowPageLayers[0].frame.x + flowPageLayers[0].frame.width + 100;\n        for(var i=0;i<flowPageLayers.length;i++){\n            if(flowPageLayers[i].frame.x > artBordMaxX){\n                artBordMaxX = flowPageLayers[i].frame.x;\n                artBordMaxXWidth = flowPageLayers[i].frame.x + flowPageLayers[i].frame.width + 100;\n            }\n        }; \n    }\n\n    return artBordMaxXWidth;\n};\n\nconst doPage = () =>{//判断是否有“交互流程”的页面\n    var flowPageItem = \"\";\n    for(var i=0;i<allPages.length;i++){\n        if(allPages[i].name === \"交互流程\"){\n            flowPageItem = allPages[i];\n            hasFlowPage = true;\n            break;\n        }\n    };\n\n    if(!flowPageItem){\n        flowPageItem = new Page({\n            name: '交互流程',\n            parent: document\n        });\n    }\n\n    return flowPageItem;\n};\n\nconst createPageAndArtboardTitle = () =>{//创建交互流程artboard的title\n    //Title Group\n    var titleGroup = new Group({\n        name: \"Title\",\n        parent:flowArtboard\n    });\n\n    //Title 背景框bg\n    // var rectTitleFrame = new Rectangle(0, 0, flowArtboard.frame.width, flowArtBoardTilteHeight);\n    const rectTitleBg = new ShapePath({\n        name: \"title\",\n        frame:{\n            x:0,\n            y:0,\n            width:flowArtboard.frame.width,\n            height: flowArtBoardTilteHeight\n        },\n        shapeType: ShapePath.ShapeType.Rectangle,\n        parent:titleGroup,\n        style:{\n            fills:[{color:'#000'}]\n        }\n    })\n\n    //Title text\n    const titleText = new Text({\n        text: flowName,\n        frame: {\n            x:initPositnX,\n            y:42,\n            width:300,\n            height:titleFontSize\n        },\n        parent: titleGroup,\n        name: \"title/name\"\n    });\n\n    titleText.style.fontSize = titleFontSize;\n    titleText.style.fontWeight = titleBold;\n    titleText.style.textColor = titleColor;\n};\n\nconst getFlowArtboardFrame = (data) =>{//计算flowArtboard的frame\n    var maxY = 0;\n    var maxYIndex = 0;\n    var widthFrame = 0;\n    var heightFrame = 0;\n    var widthFrameBoard = 0;\n    var heightFrameBoard = 0;\n    var flowArtboardFrame =  {};\n    for(var i=0;i<flowBoards.length;i++){\n        var flowBoardInst = findArtBoardById(flowBoards[i].list[0].abId);\n        widthFrameBoard += flowBoardInst.frame.width;\n\n        if(flowBoards[i].length>maxY){\n            maxY = flowBoards[i].length;\n            maxYIndex = i;\n        }\n    };\n\n    widthFrame = widthFrameBoard + (flowBoards.length-1)*dist.step\n\n    var maxYList = flowBoards[maxYIndex].list;\n    for(var j=0;j<maxYList.length;j++){\n        var flowBoardInst = findArtBoardById(maxYList[j].abId);\n        heightFrameBoard += flowBoardInst.frame.height;\n    };\n\n    heightFrame = heightFrameBoard + (maxYList.length-1)*dist.branch;\n\n    flowArtboardFrame = {width:widthFrame, height:heightFrame};\n\n    return flowArtboardFrame\n};\n\nconst makeInteractLogic = () =>{//建立交互流程\n    var abId = \"\";\n    var id = \"\"\n    var positonIndex = {};\n    for(var i=0;i<flowBoards.length;i++){\n        if(flowBoards[i].list.length >0){\n            var child = flowBoards[i].list;\n            for(var j=0;j<child.length;j++){\n                abId = child[j].abId;\n                id = child[j].id;\n                positonIndex = {\n                    x:i,\n                    y:j\n                };\n                \n                doPageFlow(id,abId,positonIndex,child[j].fillType);\n            };\n        }\n    };\n};\n\nconst doPageFlow = (id,abId,positon,fillType) =>{//移动页面到flowArtboard\n    var currentArtboard = findArtBoardById(abId);\n\n    //创建移动新组，包含当前Artboard和当前Artboard的框\n    const flowGroup = new Group({\n        name: currentArtboard.name,\n        frame: getCurrentArtboardFrame(positon,currentArtboard)\n    });\n\n    if(!fillType){\n        //拷贝当前Artboard\n        var copyBoard = currentArtboard.duplicate();\n        var copyBoardFrame = {\n            x:0,\n            y:0,\n            width:copyBoard.frame.width,\n            height:copyBoard.frame.height\n        };\n        copyBoard.frame = copyBoardFrame;\n        copyBoard.parent = flowGroup;\n\n        //Arrow 数据组\n        var newBlock = {\n            blockId: flowGroup.id,\n            abId: abId,\n            id: id\n        };\n\n        newFlowBlock.push(newBlock);\n\n        // const artBoardGroup = new Group({\n        //     name: currentArtboard.name,\n        //     frame: copyBoard.frame,\n        //     layers: copyBoard.layers\n        // });\n\n        // artBoardGroup.parent = flowGroup;\n        // copyBoard.delete();\n\n        //创建当前Artboard的框（拷贝图层后，是没有框）\n        var rectBgFrame = new Rectangle(0, 0, copyBoard.frame.width, copyBoard.frame.height);\n\n        const rectBg = new ShapePath({\n            name: \"layput\",\n            frame:rectBgFrame,\n            shapeType: ShapePath.ShapeType.Rectangle,\n            parent:flowGroup,\n            style:{\n                borders:[{color:'#C9C9C9'}]\n            }\n        })\n        \n        //Title text\n        const flowNameText = new Text({\n            text: copyBoard.name,\n            frame: {\n                x:rectBgFrame.x,\n                y:rectBgFrame.y-flowNameFontSize-flowNameDist,\n                width:88,\n                height:flowNameFontSize\n            },\n            parent: flowGroup,\n            name: copyBoard.name\n        });\n        flowNameText.style.fontSize = flowNameFontSize;\n        flowNameText.style.lineHeight = flowNameFontSize;\n        flowNameText.style.textColor = flowNameColor;\n        \n        //将flowGroup移动到flowArtboard中\n        flowGroup.parent = flowArtboard;\n    }\n    \n};\n\nconst findArtBoardById = (abId) =>{//通过abId查找artBoard\n    for(var i=0;i<selectedArtBoards.length;i++){\n        if(selectedArtBoards[i].id === abId){\n            return selectedArtBoards[i];\n        }\n    };\n};\n\nconst createArrows = (arrowIds) =>{//创建arrows\n    if(arrowIds.blockIds.length> 0 && arrowIds.firstBlock){\n        let firstObjectID = arrowIds.firstBlock.blockId;\n\n        for(let i = 0; i < arrowIds.blockIds.length; i++) {\n          if(arrowIds.blockIds[i].blockId != firstObjectID){\n            let secondObjectID = String(arrowIds.blockIds[i].blockId);\n\n            let connection = createArrow(firstObjectID, secondObjectID, null, null, \"Right\", null, false, document, docData);\n          }\n        }\n      } else {\n        // When user didn't select anything\n        sketch.UI.message(\"Please select more than two layers. Artboards are coming soon 🥳\");\n      }\n\n      flowArtboard.selected = false;\n};\n\nconst doFlowArrows = () =>{//创建flow arrows\n    var blockIds = [];\n\n    for(var i=0;i<flowBoards.length;i++){\n        if(i<(flowBoards.length-1)){\n            var firstFlowArr = getFlowArr(i,0,flowBoards[i].list.length);\n            for(var j=0;j<firstFlowArr.length;j++){\n                var firstBlock = firstFlowArr[j];\n                if(j === (firstFlowArr.length-1)){\n                    blockIds = getFlowArr(i+1,firstFlowArr[j].index,flowBoards[i+1].list.length);\n                }else{\n                    blockIds = getFlowArr(i+1,firstFlowArr[j].index,firstFlowArr[j+1].index);\n                }\n\n                var arrowIds = {\n                    firstBlock:firstBlock,\n                    blockIds:blockIds\n                };\n\n                console.log(\"firstBlockId-\" + arrowIds.firstBlock.blockId);\n                for(var k=0;k<arrowIds.blockIds.length;k++){\n                    console.log(\"arrowIds-\"+k+\"--\"+arrowIds.blockIds[k].blockId);\n                }\n                \n                createArrows(arrowIds);\n            }\n        }\n    }\n};\n\nconst getFlowArr = (index,startIndex,endIndex) =>{//创建flow arrows\n    var firstArr = [];\n\n    for(var i=startIndex;i<endIndex;i++){\n        if(!flowBoards[index].list[i].fillType){\n            var item = {\n                index:i,\n                blockId:findFlowBlockId(flowBoards[index].list[i].id)\n            }\n            firstArr.push(item);\n        }\n    }\n\n    return firstArr;\n};\n\nconst findFlowBlockId = (id) =>{//通过abId查找artBoard\n    for(var i=0;i<newFlowBlock.length;i++){\n        if(newFlowBlock[i].id === id){\n            return newFlowBlock[i].blockId;\n        }\n    };\n};\n\nconst getCurrentArtboardFrame = (positon,currentArtboard) =>{//获取当前Artboard在flowArtboard的位置，frame参数\n    var frame = {\n        x:initPositnX,\n        y:initPositnY,\n        width:currentArtboard.frame.width,\n        height:currentArtboard.frame.height\n    }\n    frame.x = getCurrentArtboardFrameX(positon,currentArtboard)+initPositnX;\n    frame.y = getCurrentArtboardFrameY(positon,currentArtboard)+flowArtBoardTilteHeight+flowArtBoardTilteMarginBottom;\n\n    return frame;\n};\n\nconst getCurrentArtboardFrameX = (positon) =>{//获取当前Artboard在flowArtboard的位置，frame x参数\n    var ArtboardDist = 0;\n    var stepDist = 0;\n    var distX = 0;\n    for(var i=0;i<positon.x;i++){\n        var artboardItemId = flowBoards[i].list[0].abId;\n        var artboardItem = findArtBoardById(artboardItemId);\n        ArtboardDist += artboardItem.frame.width//每一列的第一个元素\n    };\n    stepDist = dist.step*positon.x;\n\n    distX = ArtboardDist + stepDist;\n\n    return distX;\n};\n\nconst getCurrentArtboardFrameY = (positon) =>{//获取当前Artboard在flowArtboard的位置，frame y参数\n    var ArtboardDist = 0;\n    var branchDist = 0;\n    var distY = 0;\n    var positonX = positon.x;\n    var positonY = positon.y;\n    var column = flowBoards[positonX];\n    var columnList = column.list;\n\n    var positonX = positon.x;\n    var positonY = positon.y;\n    for(var i=0;i<positonY;i++){\n        var column = flowBoards[positonX];\n        var columnList = column.list;\n        var artboardItemId = columnList[i].abId;\n        var artboardItem = findArtBoardById(artboardItemId);\n        ArtboardDist += artboardItem.frame.height;\n    };\n\n    branchDist = dist.branch*positon.y;\n\n    distY = ArtboardDist + branchDist;\n\n    return distY;\n};\n\nexport default function onRun(context) {\n    if(selectedPage && selectedArtBoards.length>0){//打开Webview\n        openPannel();\n    }else{//选择一个ArtBoard\n        sketch.UI.message(\"Please select an Page!\")\n    }\n}\n\nfunction openPannel() {//打开Webview\n    const existingWebview = getWebview(identifier);\n    if (existingWebview) {\n        if (existingWebview.isVisible()) {\n            // close the devtool if it's open\n            existingWebview.close()\n        }\n    }\n\n    let win = new BrowserWindow({\n        identifier,\n        width: 1350,\n        height: 800,\n        title:\"Interact Logic UI\",\n        resizable:true,\n        minimizable:true,\n        maximizable:true,\n        closable:true,\n        alwaysOnTop: true\n    });\n    win.on('closed', () => {\n        win = null\n    });\n\n    const Panel = `http://localhost:8000/interactLogic.html#${Math.random()}`;\n    win.loadURL(Panel);\n\n    // win.loadURL('http://www.jingwhale.com/whalekit/interactLogic.html?'+Math.random());\n\n    const closeWin = () =>{\n        win.destroy();\n        win.close();\n    };\n\n    var contents = win.webContents;\n\n    //监听webview的事件：webview->plugin\n    contents.on('fromwebview', function(data) {\n        console.log(\"data.checkSave---\"+data)\n        if(data.type === \"updateFlowData\"){\n            settingFlowData = data.settingFlowData || [];\n            Settings.setDocumentSettingForKey(document, settingFlowKey, settingFlowData);\n        }else if(data.type === \"doFlow\"){\n            dist = data.dist;\n            dist.branch = dist.step;\n            flowBoards = data.items;\n            flowName = data.flowName || \"交互流程\";\n            createPageAndArtboard();\n            sketch.UI.message(\"Successfully flowed pages！\");\n\n            settingFlowData = data.settingFlowData || [];\n\n            if(!!data.checkSave){\n                var settingFlowDataItem = {\n                    id: 'flow' + (new Date()).getTime(),\n                    name:flowName,\n                    items:data.items\n                };\n\n                settingFlowData.unshift(settingFlowDataItem);\n                Settings.setDocumentSettingForKey(document, settingFlowKey, settingFlowData);\n            }\n            //flowArtboard.selected = false;\n            closeWin();\n        }\n    });\n\n    contents.on('closed', function(s) {\n        closeWin();\n    });\n\n    // 向Webview传送selectedArtBoards数据\n    setSelectedArtBoards(contents);\n}\n\n\n//向Webview传送selectedArtBoards数据\nconst setSelectedArtBoards = (contents) => {\n    var treeBook = doSerializData(selectedArtBoards);\n    settingFlowData = Settings.documentSettingForKey(document, settingFlowKey) || [];\n    var setData = [];\n    setData.push(treeBook);\n    setData.push(settingFlowData);\n\n    var selectedArtBoardsData = JSON.stringify(setData);\n\n    contents\n        .executeJavaScript(`someGlobalFunctionDefinedInTheWebview(${selectedArtBoardsData})`)\n        .then(res => {\n            // do something with the result\n            console.log(\"send data success,from plugin to webview!\")\n        })\n};\n\n//格式化selectedArtBoards数据\nconst doSerializData = (selectedArtBoards) => {\n    var serializDatas = [];\n    for(var i=0;i<selectedArtBoards.length;i++){\n        serializDatas.push({\n            id: selectedArtBoards[i].id,\n            abId: selectedArtBoards[i].id,\n            content: selectedArtBoards[i].name,\n            fillType: selectedArtBoards[i].fillType || false\n        });\n    };\n\n    return serializDatas;\n};\n\n\n","module.exports = require(\"events\");","module.exports = require(\"sketch\");","module.exports = require(\"sketch/dom\");","module.exports = require(\"sketch/settings\");","module.exports = require(\"sketch/ui\");"],"sourceRoot":""}